(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=i(n);fetch(n.href,a)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),isModelListener=e=>e.startsWith("onUpdate:"),extend=Object.assign,remove=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(e,t)=>hasOwnProperty$1.call(e,t),isArray=Array.isArray,isMap=e=>toTypeString(e)==="[object Map]",isSet=e=>toTypeString(e)==="[object Set]",isDate=e=>toTypeString(e)==="[object Date]",isFunction=e=>typeof e=="function",isString=e=>typeof e=="string",isSymbol=e=>typeof e=="symbol",isObject=e=>e!==null&&typeof e=="object",isPromise=e=>(isObject(e)||isFunction(e))&&isFunction(e.then)&&isFunction(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(t,i)=>i?i.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},def=(e,t,i,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:i})},looseToNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(e){if(isArray(e)){const t={};for(let i=0;i<e.length;i++){const r=e[i],n=isString(r)?parseStringStyle(r):normalizeStyle(r);if(n)for(const a in n)t[a]=n[a]}return t}else if(isString(e)||isObject(e))return e}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(e){const t={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(i=>{if(i){const r=i.split(propertyDelimiterRE);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function normalizeClass(e){let t="";if(isString(e))t=e;else if(isArray(e))for(let i=0;i<e.length;i++){const r=normalizeClass(e[i]);r&&(t+=r+" ")}else if(isObject(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}function looseCompareArrays(e,t){if(e.length!==t.length)return!1;let i=!0;for(let r=0;i&&r<e.length;r++)i=looseEqual(e[r],t[r]);return i}function looseEqual(e,t){if(e===t)return!0;let i=isDate(e),r=isDate(t);if(i||r)return i&&r?e.getTime()===t.getTime():!1;if(i=isSymbol(e),r=isSymbol(t),i||r)return e===t;if(i=isArray(e),r=isArray(t),i||r)return i&&r?looseCompareArrays(e,t):!1;if(i=isObject(e),r=isObject(t),i||r){if(!i||!r)return!1;const n=Object.keys(e).length,a=Object.keys(t).length;if(n!==a)return!1;for(const o in e){const s=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(s&&!l||!s&&l||!looseEqual(e[o],t[o]))return!1}}return String(e)===String(t)}function looseIndexOf(e,t){return e.findIndex(i=>looseEqual(i,t))}const isRef$1=e=>!!(e&&e.__v_isRef===!0),toDisplayString=e=>isString(e)?e:e==null?"":isArray(e)||isObject(e)&&(e.toString===objectToString||!isFunction(e.toString))?isRef$1(e)?toDisplayString(e.value):JSON.stringify(e,replacer,2):String(e),replacer=(e,t)=>isRef$1(t)?replacer(e,t.value):isMap(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[r,n],a)=>(i[stringifySymbol(r,a)+" =>"]=n,i),{})}:isSet(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>stringifySymbol(i))}:isSymbol(t)?stringifySymbol(t):isObject(t)&&!isArray(t)&&!isPlainObject(t)?String(t):t,stringifySymbol=(e,t="")=>{var i;return isSymbol(e)?`Symbol(${(i=e.description)!=null?i:t})`:e};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!t&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=i}}}on(){++this._on===1&&(this.prevScope=activeEffectScope,activeEffectScope=this)}off(){this._on>0&&--this._on===0&&(activeEffectScope=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(this.effects.length=0,i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function getCurrentScope(){return activeEffectScope}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const t=activeSub,i=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=t,shouldTrack=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)removeSub(t);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(e,t=!1){if(e.flags|=8,t){e.next=batchedComputed,batchedComputed=e;return}e.next=batchedSub,batchedSub=e}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let t=batchedComputed;for(batchedComputed=void 0;t;){const i=t.next;t.next=void 0,t.flags&=-9,t=i}}let e;for(;batchedSub;){let t=batchedSub;for(batchedSub=void 0;t;){const i=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=i}}if(e)throw e}function prepareDeps(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function cleanupDeps(e){let t,i=e.depsTail,r=i;for(;r;){const n=r.prevDep;r.version===-1?(r===i&&(i=n),removeSub(r),removeDep(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}e.deps=t,e.depsTail=i}function isDirty(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(refreshComputed(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function refreshComputed(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===globalVersion)||(e.globalVersion=globalVersion,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!isDirty(e))))return;e.flags|=2;const t=e.dep,i=activeSub,r=shouldTrack;activeSub=e,shouldTrack=!0;try{prepareDeps(e);const n=e.fn(e._value);(t.version===0||hasChanged(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(n){throw t.version++,n}finally{activeSub=i,shouldTrack=r,cleanupDeps(e),e.flags&=-3}}function removeSub(e,t=!1){const{dep:i,prevSub:r,nextSub:n}=e;if(r&&(r.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=r,e.nextSub=void 0),i.subs===e&&(i.subs=r,!r&&i.computed)){i.computed.flags&=-5;for(let a=i.computed.deps;a;a=a.nextDep)removeSub(a,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function removeDep(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function cleanupEffect(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=activeSub;activeSub=void 0;try{t()}finally{activeSub=i}}}let globalVersion=0;class Link{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==activeSub)i=this.activeLink=new Link(activeSub,this),activeSub.deps?(i.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=i,activeSub.depsTail=i):activeSub.deps=activeSub.depsTail=i,addSub(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const r=i.nextDep;r.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=r),i.prevDep=activeSub.depsTail,i.nextDep=void 0,activeSub.depsTail.nextDep=i,activeSub.depsTail=i,activeSub.deps===i&&(activeSub.deps=r)}return i}trigger(t){this.version++,globalVersion++,this.notify(t)}notify(t){startBatch();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{endBatch()}}}function addSub(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)addSub(r)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(e,t,i){if(shouldTrack&&activeSub){let r=targetMap.get(e);r||targetMap.set(e,r=new Map);let n=r.get(i);n||(r.set(i,n=new Dep),n.map=r,n.key=i),n.track()}}function trigger(e,t,i,r,n,a){const o=targetMap.get(e);if(!o){globalVersion++;return}const s=l=>{l&&l.trigger()};if(startBatch(),t==="clear")o.forEach(s);else{const l=isArray(e),u=l&&isIntegerKey(i);if(l&&i==="length"){const c=Number(r);o.forEach((m,f)=>{(f==="length"||f===ARRAY_ITERATE_KEY||!isSymbol(f)&&f>=c)&&s(m)})}else switch((i!==void 0||o.has(void 0))&&s(o.get(i)),u&&s(o.get(ARRAY_ITERATE_KEY)),t){case"add":l?u&&s(o.get("length")):(s(o.get(ITERATE_KEY)),isMap(e)&&s(o.get(MAP_KEY_ITERATE_KEY)));break;case"delete":l||(s(o.get(ITERATE_KEY)),isMap(e)&&s(o.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&s(o.get(ITERATE_KEY));break}}endBatch()}function reactiveReadArray(e){const t=toRaw(e);return t===e?t:(track(t,"iterate",ARRAY_ITERATE_KEY),isShallow(e)?t:t.map(toReactive))}function shallowReadArray(e){return track(e=toRaw(e),"iterate",ARRAY_ITERATE_KEY),e}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...e){return reactiveReadArray(this).concat(...e.map(t=>isArray(t)?reactiveReadArray(t):t))},entries(){return iterator(this,"entries",e=>(e[1]=toReactive(e[1]),e))},every(e,t){return apply(this,"every",e,t,void 0,arguments)},filter(e,t){return apply(this,"filter",e,t,i=>i.map(toReactive),arguments)},find(e,t){return apply(this,"find",e,t,toReactive,arguments)},findIndex(e,t){return apply(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return apply(this,"findLast",e,t,toReactive,arguments)},findLastIndex(e,t){return apply(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return apply(this,"forEach",e,t,void 0,arguments)},includes(...e){return searchProxy(this,"includes",e)},indexOf(...e){return searchProxy(this,"indexOf",e)},join(e){return reactiveReadArray(this).join(e)},lastIndexOf(...e){return searchProxy(this,"lastIndexOf",e)},map(e,t){return apply(this,"map",e,t,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...e){return noTracking(this,"push",e)},reduce(e,...t){return reduce(this,"reduce",e,t)},reduceRight(e,...t){return reduce(this,"reduceRight",e,t)},shift(){return noTracking(this,"shift")},some(e,t){return apply(this,"some",e,t,void 0,arguments)},splice(...e){return noTracking(this,"splice",e)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(e){return reactiveReadArray(this).toSorted(e)},toSpliced(...e){return reactiveReadArray(this).toSpliced(...e)},unshift(...e){return noTracking(this,"unshift",e)},values(){return iterator(this,"values",toReactive)}};function iterator(e,t,i){const r=shallowReadArray(e),n=r[t]();return r!==e&&!isShallow(e)&&(n._next=n.next,n.next=()=>{const a=n._next();return a.value&&(a.value=i(a.value)),a}),n}const arrayProto=Array.prototype;function apply(e,t,i,r,n,a){const o=shallowReadArray(e),s=o!==e&&!isShallow(e),l=o[t];if(l!==arrayProto[t]){const m=l.apply(e,a);return s?toReactive(m):m}let u=i;o!==e&&(s?u=function(m,f){return i.call(this,toReactive(m),f,e)}:i.length>2&&(u=function(m,f){return i.call(this,m,f,e)}));const c=l.call(o,u,r);return s&&n?n(c):c}function reduce(e,t,i,r){const n=shallowReadArray(e);let a=i;return n!==e&&(isShallow(e)?i.length>3&&(a=function(o,s,l){return i.call(this,o,s,l,e)}):a=function(o,s,l){return i.call(this,o,toReactive(s),l,e)}),n[t](a,...r)}function searchProxy(e,t,i){const r=toRaw(e);track(r,"iterate",ARRAY_ITERATE_KEY);const n=r[t](...i);return(n===-1||n===!1)&&isProxy(i[0])?(i[0]=toRaw(i[0]),r[t](...i)):n}function noTracking(e,t,i=[]){pauseTracking(),startBatch();const r=toRaw(e)[t].apply(e,i);return endBatch(),resetTracking(),r}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol));function hasOwnProperty(e){isSymbol(e)||(e=String(e));const t=toRaw(this);return track(t,"has",e),t.hasOwnProperty(e)}class BaseReactiveHandler{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,r){if(i==="__v_skip")return t.__v_skip;const n=this._isReadonly,a=this._isShallow;if(i==="__v_isReactive")return!n;if(i==="__v_isReadonly")return n;if(i==="__v_isShallow")return a;if(i==="__v_raw")return r===(n?a?shallowReadonlyMap:readonlyMap:a?shallowReactiveMap:reactiveMap).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=isArray(t);if(!n){let l;if(o&&(l=arrayInstrumentations[i]))return l;if(i==="hasOwnProperty")return hasOwnProperty}const s=Reflect.get(t,i,isRef(t)?t:r);return(isSymbol(i)?builtInSymbols.has(i):isNonTrackableKeys(i))||(n||track(t,"get",i),a)?s:isRef(s)?o&&isIntegerKey(i)?s:s.value:isObject(s)?n?readonly(s):reactive(s):s}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(t=!1){super(!1,t)}set(t,i,r,n){let a=t[i];if(!this._isShallow){const l=isReadonly(a);if(!isShallow(r)&&!isReadonly(r)&&(a=toRaw(a),r=toRaw(r)),!isArray(t)&&isRef(a)&&!isRef(r))return l?!1:(a.value=r,!0)}const o=isArray(t)&&isIntegerKey(i)?Number(i)<t.length:hasOwn(t,i),s=Reflect.set(t,i,r,isRef(t)?t:n);return t===toRaw(n)&&(o?hasChanged(r,a)&&trigger(t,"set",i,r):trigger(t,"add",i,r)),s}deleteProperty(t,i){const r=hasOwn(t,i);t[i];const n=Reflect.deleteProperty(t,i);return n&&r&&trigger(t,"delete",i,void 0),n}has(t,i){const r=Reflect.has(t,i);return(!isSymbol(i)||!builtInSymbols.has(i))&&track(t,"has",i),r}ownKeys(t){return track(t,"iterate",isArray(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function createIterableMethod(e,t,i){return function(...r){const n=this.__v_raw,a=toRaw(n),o=isMap(a),s=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=n[e](...r),c=i?toShallow:t?toReadonly:toReactive;return!t&&track(a,"iterate",l?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:m,done:f}=u.next();return f?{value:m,done:f}:{value:s?[c(m[0]),c(m[1])]:c(m),done:f}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function createInstrumentations(e,t){const i={get(n){const a=this.__v_raw,o=toRaw(a),s=toRaw(n);e||(hasChanged(n,s)&&track(o,"get",n),track(o,"get",s));const{has:l}=getProto(o),u=t?toShallow:e?toReadonly:toReactive;if(l.call(o,n))return u(a.get(n));if(l.call(o,s))return u(a.get(s));a!==o&&a.get(n)},get size(){const n=this.__v_raw;return!e&&track(toRaw(n),"iterate",ITERATE_KEY),Reflect.get(n,"size",n)},has(n){const a=this.__v_raw,o=toRaw(a),s=toRaw(n);return e||(hasChanged(n,s)&&track(o,"has",n),track(o,"has",s)),n===s?a.has(n):a.has(n)||a.has(s)},forEach(n,a){const o=this,s=o.__v_raw,l=toRaw(s),u=t?toShallow:e?toReadonly:toReactive;return!e&&track(l,"iterate",ITERATE_KEY),s.forEach((c,m)=>n.call(a,u(c),u(m),o))}};return extend(i,e?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(n){!t&&!isShallow(n)&&!isReadonly(n)&&(n=toRaw(n));const a=toRaw(this);return getProto(a).has.call(a,n)||(a.add(n),trigger(a,"add",n,n)),this},set(n,a){!t&&!isShallow(a)&&!isReadonly(a)&&(a=toRaw(a));const o=toRaw(this),{has:s,get:l}=getProto(o);let u=s.call(o,n);u||(n=toRaw(n),u=s.call(o,n));const c=l.call(o,n);return o.set(n,a),u?hasChanged(a,c)&&trigger(o,"set",n,a):trigger(o,"add",n,a),this},delete(n){const a=toRaw(this),{has:o,get:s}=getProto(a);let l=o.call(a,n);l||(n=toRaw(n),l=o.call(a,n)),s&&s.call(a,n);const u=a.delete(n);return l&&trigger(a,"delete",n,void 0),u},clear(){const n=toRaw(this),a=n.size!==0,o=n.clear();return a&&trigger(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{i[n]=createIterableMethod(n,e,t)}),i}function createInstrumentationGetter(e,t){const i=createInstrumentations(e,t);return(r,n,a)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?r:Reflect.get(hasOwn(i,n)&&n in r?i:r,n,a)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(e){return createReactiveObject(e,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(e,t,i,r,n){if(!isObject(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=getTargetType(e);if(a===0)return e;const o=n.get(e);if(o)return o;const s=new Proxy(e,a===2?r:i);return n.set(e,s),s}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return e?!!e.__v_raw:!1}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return!hasOwn(e,"__v_skip")&&Object.isExtensible(e)&&def(e,"__v_skip",!0),e}const toReactive=e=>isObject(e)?reactive(e):e,toReadonly=e=>isObject(e)?readonly(e):e;function isRef(e){return e?e.__v_isRef===!0:!1}function ref(e){return createRef(e,!1)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(t,i){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:toRaw(t),this._value=i?t:toReactive(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,r=this.__v_isShallow||isShallow(t)||isReadonly(t);t=r?t:toRaw(t),hasChanged(t,i)&&(this._rawValue=t,this._value=r?t:toReactive(t),this.dep.trigger())}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,i)=>t==="__v_raw"?e:unref(Reflect.get(e,t,i)),set:(e,t,i,r)=>{const n=e[t];return isRef(n)&&!isRef(i)?(n.value=i,!0):Reflect.set(e,t,i,r)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(t,i,r){this.fn=t,this.setter=i,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const t=this.dep.track();return refreshComputed(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function computed$1(e,t,i=!1){let r,n;return isFunction(e)?r=e:(r=e.get,n=e.set),new ComputedRefImpl(r,n,i)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(e,t=!1,i=activeWatcher){if(i){let r=cleanupMap.get(i);r||cleanupMap.set(i,r=[]),r.push(e)}}function watch$1(e,t,i=EMPTY_OBJ){const{immediate:r,deep:n,once:a,scheduler:o,augmentJob:s,call:l}=i,u=C=>n?C:isShallow(C)||n===!1||n===0?traverse(C,1):traverse(C);let c,m,f,d,b=!1,y=!1;if(isRef(e)?(m=()=>e.value,b=isShallow(e)):isReactive(e)?(m=()=>u(e),b=!0):isArray(e)?(y=!0,b=e.some(C=>isReactive(C)||isShallow(C)),m=()=>e.map(C=>{if(isRef(C))return C.value;if(isReactive(C))return u(C);if(isFunction(C))return l?l(C,2):C()})):isFunction(e)?t?m=l?()=>l(e,2):e:m=()=>{if(f){pauseTracking();try{f()}finally{resetTracking()}}const C=activeWatcher;activeWatcher=c;try{return l?l(e,3,[d]):e(d)}finally{activeWatcher=C}}:m=NOOP,t&&n){const C=m,B=n===!0?1/0:n;m=()=>traverse(C(),B)}const w=getCurrentScope(),T=()=>{c.stop(),w&&w.active&&remove(w.effects,c)};if(a&&t){const C=t;t=(...B)=>{C(...B),T()}}let E=y?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const R=C=>{if(!(!(c.flags&1)||!c.dirty&&!C))if(t){const B=c.run();if(n||b||(y?B.some((D,_)=>hasChanged(D,E[_])):hasChanged(B,E))){f&&f();const D=activeWatcher;activeWatcher=c;try{const _=[B,E===INITIAL_WATCHER_VALUE?void 0:y&&E[0]===INITIAL_WATCHER_VALUE?[]:E,d];E=B,l?l(t,3,_):t(..._)}finally{activeWatcher=D}}}else c.run()};return s&&s(R),c=new ReactiveEffect(m),c.scheduler=o?()=>o(R,!1):R,d=C=>onWatcherCleanup(C,!1,c),f=c.onStop=()=>{const C=cleanupMap.get(c);if(C){if(l)l(C,4);else for(const B of C)B();cleanupMap.delete(c)}},t?r?R(!0):E=c.run():o?o(R.bind(null,!0),!0):c.run(),T.pause=c.pause.bind(c),T.resume=c.resume.bind(c),T.stop=T,T}function traverse(e,t=1/0,i){if(t<=0||!isObject(e)||e.__v_skip||(i=i||new Set,i.has(e)))return e;if(i.add(e),t--,isRef(e))traverse(e.value,t,i);else if(isArray(e))for(let r=0;r<e.length;r++)traverse(e[r],t,i);else if(isSet(e)||isMap(e))e.forEach(r=>{traverse(r,t,i)});else if(isPlainObject(e)){for(const r in e)traverse(e[r],t,i);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&traverse(e[r],t,i)}return e}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(e,...t){if(isWarning)return;isWarning=!0,pauseTracking();const i=stack.length?stack[stack.length-1].component:null,r=i&&i.appContext.config.warnHandler,n=getComponentTrace();if(r)callWithErrorHandling(r,i,11,[e+t.map(a=>{var o,s;return(s=(o=a.toString)==null?void 0:o.call(a))!=null?s:JSON.stringify(a)}).join(""),i&&i.proxy,n.map(({vnode:a})=>`at <${formatComponentName(i,a.type)}>`).join(`
`),n]);else{const a=[`[Vue warn]: ${e}`,...t];n.length&&a.push(`
`,...formatTrace(n)),console.warn(...a)}resetTracking(),isWarning=!1}function getComponentTrace(){let e=stack[stack.length-1];if(!e)return[];const t=[];for(;e;){const i=t[0];i&&i.vnode===e?i.recurseCount++:t.push({vnode:e,recurseCount:0});const r=e.component&&e.component.parent;e=r&&r.vnode}return t}function formatTrace(e){const t=[];return e.forEach((i,r)=>{t.push(...r===0?[]:[`
`],...formatTraceEntry(i))}),t}function formatTraceEntry({vnode:e,recurseCount:t}){const i=t>0?`... (${t} recursive calls)`:"",r=e.component?e.component.parent==null:!1,n=` at <${formatComponentName(e.component,e.type,r)}`,a=">"+i;return e.props?[n,...formatProps(e.props),a]:[n+a]}function formatProps(e){const t=[],i=Object.keys(e);return i.slice(0,3).forEach(r=>{t.push(...formatProp(r,e[r]))}),i.length>3&&t.push(" ..."),t}function formatProp(e,t,i){return isString(t)?(t=JSON.stringify(t),i?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?i?t:[`${e}=${t}`]:isRef(t)?(t=formatProp(e,toRaw(t.value),!0),i?t:[`${e}=Ref<`,t,">"]):isFunction(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=toRaw(t),i?t:[`${e}=`,t])}function callWithErrorHandling(e,t,i,r){try{return r?e(...r):e()}catch(n){handleError(n,t,i)}}function callWithAsyncErrorHandling(e,t,i,r){if(isFunction(e)){const n=callWithErrorHandling(e,t,i,r);return n&&isPromise(n)&&n.catch(a=>{handleError(a,t,i)}),n}if(isArray(e)){const n=[];for(let a=0;a<e.length;a++)n.push(callWithAsyncErrorHandling(e[a],t,i,r));return n}}function handleError(e,t,i,r=!0){const n=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||EMPTY_OBJ;if(t){let s=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${i}`;for(;s;){const c=s.ec;if(c){for(let m=0;m<c.length;m++)if(c[m](e,l,u)===!1)return}s=s.parent}if(a){pauseTracking(),callWithErrorHandling(a,null,10,[e,l,u]),resetTracking();return}}logError(e,i,n,r,o)}function logError(e,t,i,r=!0,n=!1){if(n)throw e;console.error(e)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,i=queue.length;for(;t<i;){const r=t+i>>>1,n=queue[r],a=getId(n);a<e||a===e&&n.flags&2?t=r+1:i=r}return t}function queueJob(e){if(!(e.flags&1)){const t=getId(e),i=queue[queue.length-1];!i||!(e.flags&2)&&t>=getId(i)?queue.push(e):queue.splice(findInsertionIndex(t),0,e),e.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(e){isArray(e)?pendingPostFlushCbs.push(...e):activePostFlushCbs&&e.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,e):e.flags&1||(pendingPostFlushCbs.push(e),e.flags|=1),queueFlush()}function flushPreFlushCbs(e,t,i=flushIndex+1){for(;i<queue.length;i++){const r=queue[i];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;queue.splice(i,1),i--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)].sort((i,r)=>getId(i)-getId(r));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const i=activePostFlushCbs[postFlushIndex];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?e.flags&2?-1:1/0:e.id;function flushJobs(e){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const t=queue[flushIndex];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),callWithErrorHandling(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const t=queue[flushIndex];t&&(t.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function withCtx(e,t=currentRenderingInstance,i){if(!t||e._n)return e;const r=(...n)=>{r._d&&setBlockTracking(-1);const a=setCurrentRenderingInstance(t);let o;try{o=e(...n)}finally{setCurrentRenderingInstance(a),r._d&&setBlockTracking(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function withDirectives(e,t){if(currentRenderingInstance===null)return e;const i=getComponentPublicInstance(currentRenderingInstance),r=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[a,o,s,l=EMPTY_OBJ]=t[n];a&&(isFunction(a)&&(a={mounted:a,updated:a}),a.deep&&traverse(o),r.push({dir:a,instance:i,value:o,oldValue:void 0,arg:s,modifiers:l}))}return e}function invokeDirectiveHook(e,t,i,r){const n=e.dirs,a=t&&t.dirs;for(let o=0;o<n.length;o++){const s=n[o];a&&(s.oldValue=a[o].value);let l=s.dir[r];l&&(pauseTracking(),callWithAsyncErrorHandling(l,i,8,[e.el,s,e,t]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=e=>e.__isTeleport;function setTransitionHooks(e,t){e.shapeFlag&6&&e.component?(e.transition=t,setTransitionHooks(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function markAsyncBoundary(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function setRef(e,t,i,r,n=!1){if(isArray(e)){e.forEach((b,y)=>setRef(b,t&&(isArray(t)?t[y]:t),i,r,n));return}if(isAsyncWrapper(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&setRef(e,t,i,r.component.subTree);return}const a=r.shapeFlag&4?getComponentPublicInstance(r.component):r.el,o=n?null:a,{i:s,r:l}=e,u=t&&t.r,c=s.refs===EMPTY_OBJ?s.refs={}:s.refs,m=s.setupState,f=toRaw(m),d=m===EMPTY_OBJ?()=>!1:b=>hasOwn(f,b);if(u!=null&&u!==l&&(isString(u)?(c[u]=null,d(u)&&(m[u]=null)):isRef(u)&&(u.value=null)),isFunction(l))callWithErrorHandling(l,s,12,[o,c]);else{const b=isString(l),y=isRef(l);if(b||y){const w=()=>{if(e.f){const T=b?d(l)?m[l]:c[l]:l.value;n?isArray(T)&&remove(T,a):isArray(T)?T.includes(a)||T.push(a):b?(c[l]=[a],d(l)&&(m[l]=c[l])):(l.value=[a],e.k&&(c[e.k]=l.value))}else b?(c[l]=o,d(l)&&(m[l]=o)):y&&(l.value=o,e.k&&(c[e.k]=o))};o?(w.id=-1,queuePostRenderEffect(w,i)):w()}}}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,i=currentInstance){const r=e.__wdc||(e.__wdc=()=>{let n=i;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(injectHook(t,r,i),i){let n=i.parent;for(;n&&n.parent;)isKeepAlive(n.parent.vnode)&&injectToKeepAliveRoot(r,t,i,n),n=n.parent}}function injectToKeepAliveRoot(e,t,i,r){const n=injectHook(t,e,r,!0);onUnmounted(()=>{remove(r[t],n)},i)}function injectHook(e,t,i=currentInstance,r=!1){if(i){const n=i[e]||(i[e]=[]),a=t.__weh||(t.__weh=(...o)=>{pauseTracking();const s=setCurrentInstance(i),l=callWithAsyncErrorHandling(t,i,e,o);return s(),resetTracking(),l});return r?n.unshift(a):n.push(a),a}}const createHook=e=>(t,i=currentInstance)=>{(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...r)=>t(...r),i)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function renderList(e,t,i,r){let n;const a=i,o=isArray(e);if(o||isString(e)){const s=o&&isReactive(e);let l=!1,u=!1;s&&(l=!isShallow(e),u=isReadonly(e),e=shallowReadArray(e)),n=new Array(e.length);for(let c=0,m=e.length;c<m;c++)n[c]=t(l?u?toReadonly(toReactive(e[c])):toReactive(e[c]):e[c],c,void 0,a)}else if(typeof e=="number"){n=new Array(e);for(let s=0;s<e;s++)n[s]=t(s+1,s,void 0,a)}else if(isObject(e))if(e[Symbol.iterator])n=Array.from(e,(s,l)=>t(s,l,void 0,a));else{const s=Object.keys(e);n=new Array(s.length);for(let l=0,u=s.length;l<u;l++){const c=s[l];n[l]=t(e[c],c,l,a)}}else n=[];return n}const getPublicInstance=e=>e?isStatefulComponent(e)?getComponentPublicInstance(e):getPublicInstance(e.parent):null,publicPropertiesMap=extend(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>{queueJob(e.update)}),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,t)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn(e,t),PublicInstanceProxyHandlers={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:r,data:n,props:a,accessCache:o,type:s,appContext:l}=e;let u;if(t[0]!=="$"){const d=o[t];if(d!==void 0)switch(d){case 1:return r[t];case 2:return n[t];case 4:return i[t];case 3:return a[t]}else{if(hasSetupBinding(r,t))return o[t]=1,r[t];if(n!==EMPTY_OBJ&&hasOwn(n,t))return o[t]=2,n[t];if((u=e.propsOptions[0])&&hasOwn(u,t))return o[t]=3,a[t];if(i!==EMPTY_OBJ&&hasOwn(i,t))return o[t]=4,i[t];shouldCacheAccess&&(o[t]=0)}}const c=publicPropertiesMap[t];let m,f;if(c)return t==="$attrs"&&track(e.attrs,"get",""),c(e);if((m=s.__cssModules)&&(m=m[t]))return m;if(i!==EMPTY_OBJ&&hasOwn(i,t))return o[t]=4,i[t];if(f=l.config.globalProperties,hasOwn(f,t))return f[t]},set({_:e},t,i){const{data:r,setupState:n,ctx:a}=e;return hasSetupBinding(n,t)?(n[t]=i,!0):r!==EMPTY_OBJ&&hasOwn(r,t)?(r[t]=i,!0):hasOwn(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:r,appContext:n,propsOptions:a}},o){let s;return!!i[o]||e!==EMPTY_OBJ&&hasOwn(e,o)||hasSetupBinding(t,o)||(s=a[0])&&hasOwn(s,o)||hasOwn(r,o)||hasOwn(publicPropertiesMap,o)||hasOwn(n.config.globalProperties,o)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:hasOwn(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function normalizePropsOrEmits(e){return isArray(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),i=e.proxy,r=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook(t.beforeCreate,e,"bc");const{data:n,computed:a,methods:o,watch:s,provide:l,inject:u,created:c,beforeMount:m,mounted:f,beforeUpdate:d,updated:b,activated:y,deactivated:w,beforeDestroy:T,beforeUnmount:E,destroyed:R,unmounted:C,render:B,renderTracked:D,renderTriggered:_,errorCaptured:x,serverPrefetch:ee,expose:N,inheritAttrs:U,components:Z,directives:H,filters:se}=t;if(u&&resolveInjections(u,r,null),o)for(const ge in o){const Y=o[ge];isFunction(Y)&&(r[ge]=Y.bind(i))}if(n){const ge=n.call(i,i);isObject(ge)&&(e.data=reactive(ge))}if(shouldCacheAccess=!0,a)for(const ge in a){const Y=a[ge],he=isFunction(Y)?Y.bind(i,i):isFunction(Y.get)?Y.get.bind(i,i):NOOP,q=!isFunction(Y)&&isFunction(Y.set)?Y.set.bind(i):NOOP,Q=computed({get:he,set:q});Object.defineProperty(r,ge,{enumerable:!0,configurable:!0,get:()=>Q.value,set:ae=>Q.value=ae})}if(s)for(const ge in s)createWatcher(s[ge],r,i,ge);if(l){const ge=isFunction(l)?l.call(i):l;Reflect.ownKeys(ge).forEach(Y=>{provide(Y,ge[Y])})}c&&callHook(c,e,"c");function le(ge,Y){isArray(Y)?Y.forEach(he=>ge(he.bind(i))):Y&&ge(Y.bind(i))}if(le(onBeforeMount,m),le(onMounted,f),le(onBeforeUpdate,d),le(onUpdated,b),le(onActivated,y),le(onDeactivated,w),le(onErrorCaptured,x),le(onRenderTracked,D),le(onRenderTriggered,_),le(onBeforeUnmount,E),le(onUnmounted,C),le(onServerPrefetch,ee),isArray(N))if(N.length){const ge=e.exposed||(e.exposed={});N.forEach(Y=>{Object.defineProperty(ge,Y,{get:()=>i[Y],set:he=>i[Y]=he,enumerable:!0})})}else e.exposed||(e.exposed={});B&&e.render===NOOP&&(e.render=B),U!=null&&(e.inheritAttrs=U),Z&&(e.components=Z),H&&(e.directives=H),ee&&markAsyncBoundary(e)}function resolveInjections(e,t,i=NOOP){isArray(e)&&(e=normalizeInject(e));for(const r in e){const n=e[r];let a;isObject(n)?"default"in n?a=inject(n.from||r,n.default,!0):a=inject(n.from||r):a=inject(n),isRef(a)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):t[r]=a}}function callHook(e,t,i){callWithAsyncErrorHandling(isArray(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,i)}function createWatcher(e,t,i,r){let n=r.includes(".")?createPathGetter(i,r):()=>i[r];if(isString(e)){const a=t[e];isFunction(a)&&watch(n,a)}else if(isFunction(e))watch(n,e.bind(i));else if(isObject(e))if(isArray(e))e.forEach(a=>createWatcher(a,t,i,r));else{const a=isFunction(e.handler)?e.handler.bind(i):t[e.handler];isFunction(a)&&watch(n,a,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:i,extends:r}=t,{mixins:n,optionsCache:a,config:{optionMergeStrategies:o}}=e.appContext,s=a.get(t);let l;return s?l=s:!n.length&&!i&&!r?l=t:(l={},n.length&&n.forEach(u=>mergeOptions(l,u,o,!0)),mergeOptions(l,t,o)),isObject(t)&&a.set(t,l),l}function mergeOptions(e,t,i,r=!1){const{mixins:n,extends:a}=t;a&&mergeOptions(e,a,i,!0),n&&n.forEach(o=>mergeOptions(e,o,i,!0));for(const o in t)if(!(r&&o==="expose")){const s=internalOptionMergeStrats[o]||i&&i[o];e[o]=s?s(e[o],t[o]):t[o]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend(isFunction(e)?e.call(this,this):e,isFunction(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend(Object.create(null),e,t):t}function mergeEmitsOrPropsOptions(e,t){return e?isArray(e)&&isArray(t)?[...new Set([...e,...t])]:extend(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(t??{})):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const i=extend(Object.create(null),e);for(const r in t)i[r]=mergeAsArray(e[r],t[r]);return i}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,t){return function(r,n=null){isFunction(r)||(r=extend({},r)),n!=null&&!isObject(n)&&(n=null);const a=createAppContext(),o=new WeakSet,s=[];let l=!1;const u=a.app={_uid:uid$1++,_component:r,_props:n,_container:null,_context:a,_instance:null,version,get config(){return a.config},set config(c){},use(c,...m){return o.has(c)||(c&&isFunction(c.install)?(o.add(c),c.install(u,...m)):isFunction(c)&&(o.add(c),c(u,...m))),u},mixin(c){return a.mixins.includes(c)||a.mixins.push(c),u},component(c,m){return m?(a.components[c]=m,u):a.components[c]},directive(c,m){return m?(a.directives[c]=m,u):a.directives[c]},mount(c,m,f){if(!l){const d=u._ceVNode||createVNode(r,n);return d.appContext=a,f===!0?f="svg":f===!1&&(f=void 0),e(d,c,f),l=!0,u._container=c,c.__vue_app__=u,getComponentPublicInstance(d.component)}},onUnmount(c){s.push(c)},unmount(){l&&(callWithAsyncErrorHandling(s,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,m){return a.provides[c]=m,u},runWithContext(c){const m=currentApp;currentApp=u;try{return c()}finally{currentApp=m}}};return u}}let currentApp=null;function provide(e,t){if(currentInstance){let i=currentInstance.provides;const r=currentInstance.parent&&currentInstance.parent.provides;r===i&&(i=currentInstance.provides=Object.create(r)),i[e]=t}}function inject(e,t,i=!1){const r=getCurrentInstance();if(r||currentApp){let n=currentApp?currentApp._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return i&&isFunction(t)?t.call(r&&r.proxy):t}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=e=>Object.getPrototypeOf(e)===internalObjectProto;function initProps(e,t,i,r=!1){const n={},a=createInternalObject();e.propsDefaults=Object.create(null),setFullProps(e,t,n,a);for(const o in e.propsOptions[0])o in n||(n[o]=void 0);i?e.props=r?n:shallowReactive(n):e.type.props?e.props=n:e.props=a,e.attrs=a}function updateProps(e,t,i,r){const{props:n,attrs:a,vnode:{patchFlag:o}}=e,s=toRaw(n),[l]=e.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let m=0;m<c.length;m++){let f=c[m];if(isEmitListener(e.emitsOptions,f))continue;const d=t[f];if(l)if(hasOwn(a,f))d!==a[f]&&(a[f]=d,u=!0);else{const b=camelize(f);n[b]=resolvePropValue(l,s,b,d,e,!1)}else d!==a[f]&&(a[f]=d,u=!0)}}}else{setFullProps(e,t,n,a)&&(u=!0);let c;for(const m in s)(!t||!hasOwn(t,m)&&((c=hyphenate(m))===m||!hasOwn(t,c)))&&(l?i&&(i[m]!==void 0||i[c]!==void 0)&&(n[m]=resolvePropValue(l,s,m,void 0,e,!0)):delete n[m]);if(a!==s)for(const m in a)(!t||!hasOwn(t,m))&&(delete a[m],u=!0)}u&&trigger(e.attrs,"set","")}function setFullProps(e,t,i,r){const[n,a]=e.propsOptions;let o=!1,s;if(t)for(let l in t){if(isReservedProp(l))continue;const u=t[l];let c;n&&hasOwn(n,c=camelize(l))?!a||!a.includes(c)?i[c]=u:(s||(s={}))[c]=u:isEmitListener(e.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(a){const l=toRaw(i),u=s||EMPTY_OBJ;for(let c=0;c<a.length;c++){const m=a[c];i[m]=resolvePropValue(n,l,m,u[m],e,!hasOwn(u,m))}}return o}function resolvePropValue(e,t,i,r,n,a){const o=e[i];if(o!=null){const s=hasOwn(o,"default");if(s&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&isFunction(l)){const{propsDefaults:u}=n;if(i in u)r=u[i];else{const c=setCurrentInstance(n);r=u[i]=l.call(null,t),c()}}else r=l;n.ce&&n.ce._setProp(i,r)}o[0]&&(a&&!s?r=!1:o[1]&&(r===""||r===hyphenate(i))&&(r=!0))}return r}const mixinPropsCache=new WeakMap;function normalizePropsOptions(e,t,i=!1){const r=i?mixinPropsCache:t.propsCache,n=r.get(e);if(n)return n;const a=e.props,o={},s=[];let l=!1;if(!isFunction(e)){const c=m=>{l=!0;const[f,d]=normalizePropsOptions(m,t,!0);extend(o,f),d&&s.push(...d)};!i&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!a&&!l)return isObject(e)&&r.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray(a))for(let c=0;c<a.length;c++){const m=camelize(a[c]);validatePropName(m)&&(o[m]=EMPTY_OBJ)}else if(a)for(const c in a){const m=camelize(c);if(validatePropName(m)){const f=a[c],d=o[m]=isArray(f)||isFunction(f)?{type:f}:extend({},f),b=d.type;let y=!1,w=!0;if(isArray(b))for(let T=0;T<b.length;++T){const E=b[T],R=isFunction(E)&&E.name;if(R==="Boolean"){y=!0;break}else R==="String"&&(w=!1)}else y=isFunction(b)&&b.name==="Boolean";d[0]=y,d[1]=w,(y||hasOwn(d,"default"))&&s.push(m)}}const u=[o,s];return isObject(e)&&r.set(e,u),u}function validatePropName(e){return e[0]!=="$"&&!isReservedProp(e)}const isInternalKey=e=>e==="_"||e==="__"||e==="_ctx"||e==="$stable",normalizeSlotValue=e=>isArray(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot=(e,t,i)=>{if(t._n)return t;const r=withCtx((...n)=>normalizeSlotValue(t(...n)),i);return r._c=!1,r},normalizeObjectSlots=(e,t,i)=>{const r=e._ctx;for(const n in e){if(isInternalKey(n))continue;const a=e[n];if(isFunction(a))t[n]=normalizeSlot(n,a,r);else if(a!=null){const o=normalizeSlotValue(a);t[n]=()=>o}}},normalizeVNodeSlots=(e,t)=>{const i=normalizeSlotValue(t);e.slots.default=()=>i},assignSlots=(e,t,i)=>{for(const r in t)(i||!isInternalKey(r))&&(e[r]=t[r])},initSlots=(e,t,i)=>{const r=e.slots=createInternalObject();if(e.vnode.shapeFlag&32){const n=t.__;n&&def(r,"__",n,!0);const a=t._;a?(assignSlots(r,t,i),i&&def(r,"_",a,!0)):normalizeObjectSlots(t,r)}else t&&normalizeVNodeSlots(e,t)},updateSlots=(e,t,i)=>{const{vnode:r,slots:n}=e;let a=!0,o=EMPTY_OBJ;if(r.shapeFlag&32){const s=t._;s?i&&s===1?a=!1:assignSlots(n,t,i):(a=!t.$stable,normalizeObjectSlots(t,n)),o=t}else t&&(normalizeVNodeSlots(e,t),o={default:1});if(a)for(const s in n)!isInternalKey(s)&&o[s]==null&&delete n[s]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){const i=getGlobalThis();i.__VUE__=!0;const{insert:r,remove:n,patchProp:a,createElement:o,createText:s,createComment:l,setText:u,setElementText:c,parentNode:m,nextSibling:f,setScopeId:d=NOOP,insertStaticContent:b}=e,y=(k,v,I,O=null,z=null,j=null,K=void 0,M=null,$=!!v.dynamicChildren)=>{if(k===v)return;k&&!isSameVNodeType(k,v)&&(O=we(k),ae(k,z,j,!0),k=null),v.patchFlag===-2&&($=!1,v.dynamicChildren=null);const{type:V,ref:X,shapeFlag:te}=v;switch(V){case Text:w(k,v,I,O);break;case Comment:T(k,v,I,O);break;case Static:k==null&&E(v,I,O,K);break;case Fragment:Z(k,v,I,O,z,j,K,M,$);break;default:te&1?B(k,v,I,O,z,j,K,M,$):te&6?H(k,v,I,O,z,j,K,M,$):(te&64||te&128)&&V.process(k,v,I,O,z,j,K,M,$,J)}X!=null&&z?setRef(X,k&&k.ref,j,v||k,!v):X==null&&k&&k.ref!=null&&setRef(k.ref,null,j,k,!0)},w=(k,v,I,O)=>{if(k==null)r(v.el=s(v.children),I,O);else{const z=v.el=k.el;v.children!==k.children&&u(z,v.children)}},T=(k,v,I,O)=>{k==null?r(v.el=l(v.children||""),I,O):v.el=k.el},E=(k,v,I,O)=>{[k.el,k.anchor]=b(k.children,v,I,O,k.el,k.anchor)},R=({el:k,anchor:v},I,O)=>{let z;for(;k&&k!==v;)z=f(k),r(k,I,O),k=z;r(v,I,O)},C=({el:k,anchor:v})=>{let I;for(;k&&k!==v;)I=f(k),n(k),k=I;n(v)},B=(k,v,I,O,z,j,K,M,$)=>{v.type==="svg"?K="svg":v.type==="math"&&(K="mathml"),k==null?D(v,I,O,z,j,K,M,$):ee(k,v,z,j,K,M,$)},D=(k,v,I,O,z,j,K,M)=>{let $,V;const{props:X,shapeFlag:te,transition:pe,dirs:de}=k;if($=k.el=o(k.type,j,X&&X.is,X),te&8?c($,k.children):te&16&&x(k.children,$,null,O,z,resolveChildrenNamespace(k,j),K,M),de&&invokeDirectiveHook(k,null,O,"created"),_($,k,k.scopeId,K,O),X){for(const S in X)S!=="value"&&!isReservedProp(S)&&a($,S,null,X[S],j,O);"value"in X&&a($,"value",null,X.value,j),(V=X.onVnodeBeforeMount)&&invokeVNodeHook(V,O,k)}de&&invokeDirectiveHook(k,null,O,"beforeMount");const Te=needTransition(z,pe);Te&&pe.beforeEnter($),r($,v,I),((V=X&&X.onVnodeMounted)||Te||de)&&queuePostRenderEffect(()=>{V&&invokeVNodeHook(V,O,k),Te&&pe.enter($),de&&invokeDirectiveHook(k,null,O,"mounted")},z)},_=(k,v,I,O,z)=>{if(I&&d(k,I),O)for(let j=0;j<O.length;j++)d(k,O[j]);if(z){let j=z.subTree;if(v===j||isSuspense(j.type)&&(j.ssContent===v||j.ssFallback===v)){const K=z.vnode;_(k,K,K.scopeId,K.slotScopeIds,z.parent)}}},x=(k,v,I,O,z,j,K,M,$=0)=>{for(let V=$;V<k.length;V++){const X=k[V]=M?cloneIfMounted(k[V]):normalizeVNode(k[V]);y(null,X,v,I,O,z,j,K,M)}},ee=(k,v,I,O,z,j,K)=>{const M=v.el=k.el;let{patchFlag:$,dynamicChildren:V,dirs:X}=v;$|=k.patchFlag&16;const te=k.props||EMPTY_OBJ,pe=v.props||EMPTY_OBJ;let de;if(I&&toggleRecurse(I,!1),(de=pe.onVnodeBeforeUpdate)&&invokeVNodeHook(de,I,v,k),X&&invokeDirectiveHook(v,k,I,"beforeUpdate"),I&&toggleRecurse(I,!0),(te.innerHTML&&pe.innerHTML==null||te.textContent&&pe.textContent==null)&&c(M,""),V?N(k.dynamicChildren,V,M,I,O,resolveChildrenNamespace(v,z),j):K||Y(k,v,M,null,I,O,resolveChildrenNamespace(v,z),j,!1),$>0){if($&16)U(M,te,pe,I,z);else if($&2&&te.class!==pe.class&&a(M,"class",null,pe.class,z),$&4&&a(M,"style",te.style,pe.style,z),$&8){const Te=v.dynamicProps;for(let S=0;S<Te.length;S++){const h=Te[S],g=te[h],A=pe[h];(A!==g||h==="value")&&a(M,h,g,A,z,I)}}$&1&&k.children!==v.children&&c(M,v.children)}else!K&&V==null&&U(M,te,pe,I,z);((de=pe.onVnodeUpdated)||X)&&queuePostRenderEffect(()=>{de&&invokeVNodeHook(de,I,v,k),X&&invokeDirectiveHook(v,k,I,"updated")},O)},N=(k,v,I,O,z,j,K)=>{for(let M=0;M<v.length;M++){const $=k[M],V=v[M],X=$.el&&($.type===Fragment||!isSameVNodeType($,V)||$.shapeFlag&198)?m($.el):I;y($,V,X,null,O,z,j,K,!0)}},U=(k,v,I,O,z)=>{if(v!==I){if(v!==EMPTY_OBJ)for(const j in v)!isReservedProp(j)&&!(j in I)&&a(k,j,v[j],null,z,O);for(const j in I){if(isReservedProp(j))continue;const K=I[j],M=v[j];K!==M&&j!=="value"&&a(k,j,M,K,z,O)}"value"in I&&a(k,"value",v.value,I.value,z)}},Z=(k,v,I,O,z,j,K,M,$)=>{const V=v.el=k?k.el:s(""),X=v.anchor=k?k.anchor:s("");let{patchFlag:te,dynamicChildren:pe,slotScopeIds:de}=v;de&&(M=M?M.concat(de):de),k==null?(r(V,I,O),r(X,I,O),x(v.children||[],I,X,z,j,K,M,$)):te>0&&te&64&&pe&&k.dynamicChildren?(N(k.dynamicChildren,pe,I,z,j,K,M),(v.key!=null||z&&v===z.subTree)&&traverseStaticChildren(k,v,!0)):Y(k,v,I,X,z,j,K,M,$)},H=(k,v,I,O,z,j,K,M,$)=>{v.slotScopeIds=M,k==null?v.shapeFlag&512?z.ctx.activate(v,I,O,K,$):se(v,I,O,z,j,K,$):fe(k,v,$)},se=(k,v,I,O,z,j,K)=>{const M=k.component=createComponentInstance(k,O,z);if(isKeepAlive(k)&&(M.ctx.renderer=J),setupComponent(M,!1,K),M.asyncDep){if(z&&z.registerDep(M,le,K),!k.el){const $=M.subTree=createVNode(Comment);T(null,$,v,I),k.placeholder=$.el}}else le(M,k,v,I,z,j,K)},fe=(k,v,I)=>{const O=v.component=k.component;if(shouldUpdateComponent(k,v,I))if(O.asyncDep&&!O.asyncResolved){ge(O,v,I);return}else O.next=v,O.update();else v.el=k.el,O.vnode=v},le=(k,v,I,O,z,j,K)=>{const M=()=>{if(k.isMounted){let{next:te,bu:pe,u:de,parent:Te,vnode:S}=k;{const G=locateNonHydratedAsyncRoot(k);if(G){te&&(te.el=S.el,ge(k,te,K)),G.asyncDep.then(()=>{k.isUnmounted||M()});return}}let h=te,g;toggleRecurse(k,!1),te?(te.el=S.el,ge(k,te,K)):te=S,pe&&invokeArrayFns(pe),(g=te.props&&te.props.onVnodeBeforeUpdate)&&invokeVNodeHook(g,Te,te,S),toggleRecurse(k,!0);const A=renderComponentRoot(k),L=k.subTree;k.subTree=A,y(L,A,m(L.el),we(L),k,z,j),te.el=A.el,h===null&&updateHOCHostEl(k,A.el),de&&queuePostRenderEffect(de,z),(g=te.props&&te.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(g,Te,te,S),z)}else{let te;const{el:pe,props:de}=v,{bm:Te,m:S,parent:h,root:g,type:A}=k,L=isAsyncWrapper(v);toggleRecurse(k,!1),Te&&invokeArrayFns(Te),!L&&(te=de&&de.onVnodeBeforeMount)&&invokeVNodeHook(te,h,v),toggleRecurse(k,!0);{g.ce&&g.ce._def.shadowRoot!==!1&&g.ce._injectChildStyle(A);const G=k.subTree=renderComponentRoot(k);y(null,G,I,O,k,z,j),v.el=G.el}if(S&&queuePostRenderEffect(S,z),!L&&(te=de&&de.onVnodeMounted)){const G=v;queuePostRenderEffect(()=>invokeVNodeHook(te,h,G),z)}(v.shapeFlag&256||h&&isAsyncWrapper(h.vnode)&&h.vnode.shapeFlag&256)&&k.a&&queuePostRenderEffect(k.a,z),k.isMounted=!0,v=I=O=null}};k.scope.on();const $=k.effect=new ReactiveEffect(M);k.scope.off();const V=k.update=$.run.bind($),X=k.job=$.runIfDirty.bind($);X.i=k,X.id=k.uid,$.scheduler=()=>queueJob(X),toggleRecurse(k,!0),V()},ge=(k,v,I)=>{v.component=k;const O=k.vnode.props;k.vnode=v,k.next=null,updateProps(k,v.props,O,I),updateSlots(k,v.children,I),pauseTracking(),flushPreFlushCbs(k),resetTracking()},Y=(k,v,I,O,z,j,K,M,$=!1)=>{const V=k&&k.children,X=k?k.shapeFlag:0,te=v.children,{patchFlag:pe,shapeFlag:de}=v;if(pe>0){if(pe&128){q(V,te,I,O,z,j,K,M,$);return}else if(pe&256){he(V,te,I,O,z,j,K,M,$);return}}de&8?(X&16&&_e(V,z,j),te!==V&&c(I,te)):X&16?de&16?q(V,te,I,O,z,j,K,M,$):_e(V,z,j,!0):(X&8&&c(I,""),de&16&&x(te,I,O,z,j,K,M,$))},he=(k,v,I,O,z,j,K,M,$)=>{k=k||EMPTY_ARR,v=v||EMPTY_ARR;const V=k.length,X=v.length,te=Math.min(V,X);let pe;for(pe=0;pe<te;pe++){const de=v[pe]=$?cloneIfMounted(v[pe]):normalizeVNode(v[pe]);y(k[pe],de,I,null,z,j,K,M,$)}V>X?_e(k,z,j,!0,!1,te):x(v,I,O,z,j,K,M,$,te)},q=(k,v,I,O,z,j,K,M,$)=>{let V=0;const X=v.length;let te=k.length-1,pe=X-1;for(;V<=te&&V<=pe;){const de=k[V],Te=v[V]=$?cloneIfMounted(v[V]):normalizeVNode(v[V]);if(isSameVNodeType(de,Te))y(de,Te,I,null,z,j,K,M,$);else break;V++}for(;V<=te&&V<=pe;){const de=k[te],Te=v[pe]=$?cloneIfMounted(v[pe]):normalizeVNode(v[pe]);if(isSameVNodeType(de,Te))y(de,Te,I,null,z,j,K,M,$);else break;te--,pe--}if(V>te){if(V<=pe){const de=pe+1,Te=de<X?v[de].el:O;for(;V<=pe;)y(null,v[V]=$?cloneIfMounted(v[V]):normalizeVNode(v[V]),I,Te,z,j,K,M,$),V++}}else if(V>pe)for(;V<=te;)ae(k[V],z,j,!0),V++;else{const de=V,Te=V,S=new Map;for(V=Te;V<=pe;V++){const Se=v[V]=$?cloneIfMounted(v[V]):normalizeVNode(v[V]);Se.key!=null&&S.set(Se.key,V)}let h,g=0;const A=pe-Te+1;let L=!1,G=0;const ne=new Array(A);for(V=0;V<A;V++)ne[V]=0;for(V=de;V<=te;V++){const Se=k[V];if(g>=A){ae(Se,z,j,!0);continue}let Ee;if(Se.key!=null)Ee=S.get(Se.key);else for(h=Te;h<=pe;h++)if(ne[h-Te]===0&&isSameVNodeType(Se,v[h])){Ee=h;break}Ee===void 0?ae(Se,z,j,!0):(ne[Ee-Te]=V+1,Ee>=G?G=Ee:L=!0,y(Se,v[Ee],I,null,z,j,K,M,$),g++)}const ve=L?getSequence(ne):EMPTY_ARR;for(h=ve.length-1,V=A-1;V>=0;V--){const Se=Te+V,Ee=v[Se],Ie=v[Se+1],xe=Se+1<X?Ie.el||Ie.placeholder:O;ne[V]===0?y(null,Ee,I,xe,z,j,K,M,$):L&&(h<0||V!==ve[h]?Q(Ee,I,xe,2):h--)}}},Q=(k,v,I,O,z=null)=>{const{el:j,type:K,transition:M,children:$,shapeFlag:V}=k;if(V&6){Q(k.component.subTree,v,I,O);return}if(V&128){k.suspense.move(v,I,O);return}if(V&64){K.move(k,v,I,J);return}if(K===Fragment){r(j,v,I);for(let te=0;te<$.length;te++)Q($[te],v,I,O);r(k.anchor,v,I);return}if(K===Static){R(k,v,I);return}if(O!==2&&V&1&&M)if(O===0)M.beforeEnter(j),r(j,v,I),queuePostRenderEffect(()=>M.enter(j),z);else{const{leave:te,delayLeave:pe,afterLeave:de}=M,Te=()=>{k.ctx.isUnmounted?n(j):r(j,v,I)},S=()=>{te(j,()=>{Te(),de&&de()})};pe?pe(j,Te,S):S()}else r(j,v,I)},ae=(k,v,I,O=!1,z=!1)=>{const{type:j,props:K,ref:M,children:$,dynamicChildren:V,shapeFlag:X,patchFlag:te,dirs:pe,cacheIndex:de}=k;if(te===-2&&(z=!1),M!=null&&(pauseTracking(),setRef(M,null,I,k,!0),resetTracking()),de!=null&&(v.renderCache[de]=void 0),X&256){v.ctx.deactivate(k);return}const Te=X&1&&pe,S=!isAsyncWrapper(k);let h;if(S&&(h=K&&K.onVnodeBeforeUnmount)&&invokeVNodeHook(h,v,k),X&6)ye(k.component,I,O);else{if(X&128){k.suspense.unmount(I,O);return}Te&&invokeDirectiveHook(k,null,v,"beforeUnmount"),X&64?k.type.remove(k,v,I,J,O):V&&!V.hasOnce&&(j!==Fragment||te>0&&te&64)?_e(V,v,I,!1,!0):(j===Fragment&&te&384||!z&&X&16)&&_e($,v,I),O&&ie(k)}(S&&(h=K&&K.onVnodeUnmounted)||Te)&&queuePostRenderEffect(()=>{h&&invokeVNodeHook(h,v,k),Te&&invokeDirectiveHook(k,null,v,"unmounted")},I)},ie=k=>{const{type:v,el:I,anchor:O,transition:z}=k;if(v===Fragment){me(I,O);return}if(v===Static){C(k);return}const j=()=>{n(I),z&&!z.persisted&&z.afterLeave&&z.afterLeave()};if(k.shapeFlag&1&&z&&!z.persisted){const{leave:K,delayLeave:M}=z,$=()=>K(I,j);M?M(k.el,j,$):$()}else j()},me=(k,v)=>{let I;for(;k!==v;)I=f(k),n(k),k=I;n(v)},ye=(k,v,I)=>{const{bum:O,scope:z,job:j,subTree:K,um:M,m:$,a:V,parent:X,slots:{__:te}}=k;invalidateMount($),invalidateMount(V),O&&invokeArrayFns(O),X&&isArray(te)&&te.forEach(pe=>{X.renderCache[pe]=void 0}),z.stop(),j&&(j.flags|=8,ae(K,k,v,I)),M&&queuePostRenderEffect(M,v),queuePostRenderEffect(()=>{k.isUnmounted=!0},v),v&&v.pendingBranch&&!v.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===v.pendingId&&(v.deps--,v.deps===0&&v.resolve())},_e=(k,v,I,O=!1,z=!1,j=0)=>{for(let K=j;K<k.length;K++)ae(k[K],v,I,O,z)},we=k=>{if(k.shapeFlag&6)return we(k.component.subTree);if(k.shapeFlag&128)return k.suspense.next();const v=f(k.anchor||k.el),I=v&&v[TeleportEndKey];return I?f(I):v};let re=!1;const W=(k,v,I)=>{k==null?v._vnode&&ae(v._vnode,null,null,!0):y(v._vnode||null,k,v,null,null,null,I),v._vnode=k,re||(re=!0,flushPreFlushCbs(),flushPostFlushCbs(),re=!1)},J={p:y,um:ae,m:Q,r:ie,mt:se,mc:x,pc:Y,pbc:N,n:we,o:e};return{render:W,hydrate:void 0,createApp:createAppAPI(W)}}function resolveChildrenNamespace({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function toggleRecurse({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function needTransition(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function traverseStaticChildren(e,t,i=!1){const r=e.children,n=t.children;if(isArray(r)&&isArray(n))for(let a=0;a<r.length;a++){const o=r[a];let s=n[a];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=n[a]=cloneIfMounted(n[a]),s.el=o.el),!i&&s.patchFlag!==-2&&traverseStaticChildren(o,s)),s.type===Text&&(s.el=o.el),s.type===Comment&&!s.el&&(s.el=o.el)}}function getSequence(e){const t=e.slice(),i=[0];let r,n,a,o,s;const l=e.length;for(r=0;r<l;r++){const u=e[r];if(u!==0){if(n=i[i.length-1],e[n]<u){t[r]=n,i.push(r);continue}for(a=0,o=i.length-1;a<o;)s=a+o>>1,e[i[s]]<u?a=s+1:o=s;u<e[i[a]]&&(a>0&&(t[r]=i[a-1]),i[a]=r)}}for(a=i.length,o=i[a-1];a-- >0;)i[a]=o,o=t[o];return i}function locateNonHydratedAsyncRoot(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:locateNonHydratedAsyncRoot(t)}function invalidateMount(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watch(e,t,i){return doWatch(e,t,i)}function doWatch(e,t,i=EMPTY_OBJ){const{immediate:r,deep:n,flush:a,once:o}=i,s=extend({},i),l=t&&r||!t&&a!=="post";let u;if(isInSSRComponentSetup){if(a==="sync"){const d=useSSRContext();u=d.__watcherHandles||(d.__watcherHandles=[])}else if(!l){const d=()=>{};return d.stop=NOOP,d.resume=NOOP,d.pause=NOOP,d}}const c=currentInstance;s.call=(d,b,y)=>callWithAsyncErrorHandling(d,c,b,y);let m=!1;a==="post"?s.scheduler=d=>{queuePostRenderEffect(d,c&&c.suspense)}:a!=="sync"&&(m=!0,s.scheduler=(d,b)=>{b?d():queueJob(d)}),s.augmentJob=d=>{t&&(d.flags|=4),m&&(d.flags|=2,c&&(d.id=c.uid,d.i=c))};const f=watch$1(e,t,s);return isInSSRComponentSetup&&(u?u.push(f):l&&f()),f}function instanceWatch(e,t,i){const r=this.proxy,n=isString(e)?e.includes(".")?createPathGetter(r,e):()=>r[e]:e.bind(r,r);let a;isFunction(t)?a=t:(a=t.handler,i=t);const o=setCurrentInstance(this),s=doWatch(n,a.bind(r),i);return o(),s}function createPathGetter(e,t){const i=t.split(".");return()=>{let r=e;for(let n=0;n<i.length&&r;n++)r=r[i[n]];return r}}const getModelModifiers=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${camelize(t)}Modifiers`]||e[`${hyphenate(t)}Modifiers`];function emit(e,t,...i){if(e.isUnmounted)return;const r=e.vnode.props||EMPTY_OBJ;let n=i;const a=t.startsWith("update:"),o=a&&getModelModifiers(r,t.slice(7));o&&(o.trim&&(n=i.map(c=>isString(c)?c.trim():c)),o.number&&(n=i.map(looseToNumber)));let s,l=r[s=toHandlerKey(t)]||r[s=toHandlerKey(camelize(t))];!l&&a&&(l=r[s=toHandlerKey(hyphenate(t))]),l&&callWithAsyncErrorHandling(l,e,6,n);const u=r[s+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,callWithAsyncErrorHandling(u,e,6,n)}}function normalizeEmitsOptions(e,t,i=!1){const r=t.emitsCache,n=r.get(e);if(n!==void 0)return n;const a=e.emits;let o={},s=!1;if(!isFunction(e)){const l=u=>{const c=normalizeEmitsOptions(u,t,!0);c&&(s=!0,extend(o,c))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!a&&!s?(isObject(e)&&r.set(e,null),null):(isArray(a)?a.forEach(l=>o[l]=null):extend(o,a),isObject(e)&&r.set(e,o),o)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn(e,t[0].toLowerCase()+t.slice(1))||hasOwn(e,hyphenate(t))||hasOwn(e,t))}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:i,proxy:r,withProxy:n,propsOptions:[a],slots:o,attrs:s,emit:l,render:u,renderCache:c,props:m,data:f,setupState:d,ctx:b,inheritAttrs:y}=e,w=setCurrentRenderingInstance(e);let T,E;try{if(i.shapeFlag&4){const C=n||r,B=C;T=normalizeVNode(u.call(B,C,c,m,d,f,b)),E=s}else{const C=t;T=normalizeVNode(C.length>1?C(m,{attrs:s,slots:o,emit:l}):C(m,null)),E=t.props?s:getFunctionalFallthrough(s)}}catch(C){blockStack.length=0,handleError(C,e,1),T=createVNode(Comment)}let R=T;if(E&&y!==!1){const C=Object.keys(E),{shapeFlag:B}=R;C.length&&B&7&&(a&&C.some(isModelListener)&&(E=filterModelListeners(E,a)),R=cloneVNode(R,E,!1,!0))}return i.dirs&&(R=cloneVNode(R,null,!1,!0),R.dirs=R.dirs?R.dirs.concat(i.dirs):i.dirs),i.transition&&setTransitionHooks(R,i.transition),T=R,setCurrentRenderingInstance(w),T}const getFunctionalFallthrough=e=>{let t;for(const i in e)(i==="class"||i==="style"||isOn(i))&&((t||(t={}))[i]=e[i]);return t},filterModelListeners=(e,t)=>{const i={};for(const r in e)(!isModelListener(r)||!(r.slice(9)in t))&&(i[r]=e[r]);return i};function shouldUpdateComponent(e,t,i){const{props:r,children:n,component:a}=e,{props:o,children:s,patchFlag:l}=t,u=a.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return r?hasPropsChanged(r,o,u):!!o;if(l&8){const c=t.dynamicProps;for(let m=0;m<c.length;m++){const f=c[m];if(o[f]!==r[f]&&!isEmitListener(u,f))return!0}}}else return(n||s)&&(!s||!s.$stable)?!0:r===o?!1:r?o?hasPropsChanged(r,o,u):!0:!!o;return!1}function hasPropsChanged(e,t,i){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let n=0;n<r.length;n++){const a=r[n];if(t[a]!==e[a]&&!isEmitListener(i,a))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},i){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=i,t=t.parent;else break}}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e,t=!1){isBlockTreeEnabled+=e,e<0&&currentBlock&&t&&(currentBlock.hasOnce=!0)}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,i,r,n,a){return setupBlock(createBaseVNode(e,t,i,r,n,a,!0))}function createBlock(e,t,i,r,n){return setupBlock(createVNode(e,t,i,r,n,!0))}function isVNode(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const normalizeKey=({key:e})=>e??null,normalizeRef=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?isString(e)||isRef(e)||isFunction(e)?{i:currentRenderingInstance,r:e,k:t,f:!!i}:e:null);function createBaseVNode(e,t=null,i=null,r=0,n=null,a=e===Fragment?0:1,o=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return s?(normalizeChildren(l,i),a&128&&e.normalize(l)):i&&(l.shapeFlag|=isString(i)?8:16),isBlockTreeEnabled>0&&!o&&currentBlock&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&currentBlock.push(l),l}const createVNode=_createVNode;function _createVNode(e,t=null,i=null,r=0,n=null,a=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode(e)){const s=cloneVNode(e,t,!0);return i&&normalizeChildren(s,i),isBlockTreeEnabled>0&&!a&&currentBlock&&(s.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=s:currentBlock.push(s)),s.patchFlag=-2,s}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:s,style:l}=t;s&&!isString(s)&&(t.class=normalizeClass(s)),isObject(l)&&(isProxy(l)&&!isArray(l)&&(l=extend({},l)),t.style=normalizeStyle(l))}const o=isString(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject(e)?4:isFunction(e)?2:0;return createBaseVNode(e,t,i,r,n,o,a,!0)}function guardReactiveProps(e){return e?isProxy(e)||isInternalObject(e)?extend({},e):e:null}function cloneVNode(e,t,i=!1,r=!1){const{props:n,ref:a,patchFlag:o,children:s,transition:l}=e,u=t?mergeProps(n||{},t):n,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&normalizeKey(u),ref:t&&t.ref?i&&a?isArray(a)?a.concat(normalizeRef(t)):[a,normalizeRef(t)]:normalizeRef(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&setTransitionHooks(c,l.clone(c)),c}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function createCommentVNode(e="",t=!1){return t?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray(e)?createVNode(Fragment,null,e.slice()):isVNode(e)?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let i=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(isArray(t))i=16;else if(typeof t=="object")if(r&65){const n=t.default;n&&(n._c&&(n._d=!1),normalizeChildren(e,n()),n._c&&(n._d=!0));return}else{i=32;const n=t._;!n&&!isInternalObject(t)?t._ctx=currentRenderingInstance:n===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction(t)?(t={default:t,_ctx:currentRenderingInstance},i=32):(t=String(t),r&64?(i=16,t=[createTextVNode(t)]):i=8);e.children=t,e.shapeFlag|=i}function mergeProps(...e){const t={};for(let i=0;i<e.length;i++){const r=e[i];for(const n in r)if(n==="class")t.class!==r.class&&(t.class=normalizeClass([t.class,r.class]));else if(n==="style")t.style=normalizeStyle([t.style,r.style]);else if(isOn(n)){const a=t[n],o=r[n];o&&a!==o&&!(isArray(a)&&a.includes(o))&&(t[n]=a?[].concat(a,o):o)}else n!==""&&(t[n]=r[n])}return t}function invokeVNodeHook(e,t,i,r=null){callWithAsyncErrorHandling(e,t,7,[i,r])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(e,t,i){const r=e.type,n=(t?t.appContext:e.appContext)||emptyAppContext,a={uid:uid++,vnode:e,type:r,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(r,n),emitsOptions:normalizeEmitsOptions(r,n),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:r.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=emit.bind(null,a),e.ce&&e.ce(a),a}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const e=getGlobalThis(),t=(i,r)=>{let n;return(n=e[i])||(n=e[i]=[]),n.push(r),a=>{n.length>1?n.forEach(o=>o(a)):n[0](a)}};internalSetCurrentInstance=t("__VUE_INSTANCE_SETTERS__",i=>currentInstance=i),setInSSRSetupState=t("__VUE_SSR_SETTERS__",i=>isInSSRComponentSetup=i)}const setCurrentInstance=e=>{const t=currentInstance;return internalSetCurrentInstance(e),e.scope.on(),()=>{e.scope.off(),internalSetCurrentInstance(t)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,t=!1,i=!1){t&&setInSSRSetupState(t);const{props:r,children:n}=e.vnode,a=isStatefulComponent(e);initProps(e,r,a,t),initSlots(e,n,i||t);const o=a?setupStatefulComponent(e,t):void 0;return t&&setInSSRSetupState(!1),o}function setupStatefulComponent(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,PublicInstanceProxyHandlers);const{setup:r}=i;if(r){pauseTracking();const n=e.setupContext=r.length>1?createSetupContext(e):null,a=setCurrentInstance(e),o=callWithErrorHandling(r,e,0,[e.props,n]),s=isPromise(o);if(resetTracking(),a(),(s||e.sp)&&!isAsyncWrapper(e)&&markAsyncBoundary(e),s){if(o.then(unsetCurrentInstance,unsetCurrentInstance),t)return o.then(l=>{handleSetupResult(e,l)}).catch(l=>{handleError(l,e,0)});e.asyncDep=o}else handleSetupResult(e,o)}else finishComponentSetup(e)}function handleSetupResult(e,t,i){isFunction(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e)}function finishComponentSetup(e,t,i){const r=e.type;e.render||(e.render=r.render||NOOP);{const n=setCurrentInstance(e);pauseTracking();try{applyOptions(e)}finally{resetTracking(),n()}}}const attrsProxyHandlers={get(e,t){return track(e,"get",""),e[t]}};function createSetupContext(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,attrsProxyHandlers),slots:e.slots,emit:e.emit,expose:t}}function getComponentPublicInstance(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in publicPropertiesMap)return publicPropertiesMap[i](e)},has(t,i){return i in t||i in publicPropertiesMap}})):e.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=e=>e.replace(classifyRE,t=>t.toUpperCase()).replace(/[-_]/g,"");function getComponentName(e,t=!0){return isFunction(e)?e.displayName||e.name:e.name||t&&e.__name}function formatComponentName(e,t,i=!1){let r=getComponentName(t);if(!r&&t.__file){const n=t.__file.match(/([^/\\]+)\.\w+$/);n&&(r=n[1])}if(!r&&e&&e.parent){const n=a=>{for(const o in a)if(a[o]===t)return o};r=n(e.components||e.parent.type.components)||n(e.appContext.components)}return r?classify(r):i?"App":"Anonymous"}function isClassComponent(e){return isFunction(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup),version="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:e=>e})}catch{}const unsafeToTrustedHTML=policy?e=>policy.createHTML(e):e=>e,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,r)=>{const n=t==="svg"?doc.createElementNS(svgNS,e):t==="mathml"?doc.createElementNS(mathmlNS,e):i?doc.createElement(e,{is:i}):doc.createElement(e);return e==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,r,n,a){const o=i?i.previousSibling:t.lastChild;if(n&&(n===a||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),i),!(n===a||!(n=n.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const s=templateContainer.content;if(r==="svg"||r==="mathml"){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}t.insertBefore(s,i)}return[o?o.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(e,t,i){const r=e[vtcKey];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(e,t,i){const r=e.style,n=isString(i);let a=!1;if(i&&!n){if(t)if(isString(t))for(const o of t.split(";")){const s=o.slice(0,o.indexOf(":")).trim();i[s]==null&&setStyle(r,s,"")}else for(const o in t)i[o]==null&&setStyle(r,o,"");for(const o in i)o==="display"&&(a=!0),setStyle(r,o,i[o])}else if(n){if(t!==i){const o=r[CSS_VAR_TEXT];o&&(i+=";"+o),r.cssText=i,a=displayRE.test(i)}}else t&&e.removeAttribute("style");vShowOriginalDisplay in e&&(e[vShowOriginalDisplay]=a?r.display:"",e[vShowHidden]&&(r.display="none"))}const importantRE=/\s*!important$/;function setStyle(e,t,i){if(isArray(i))i.forEach(r=>setStyle(e,t,r));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const r=autoPrefix(e,t);importantRE.test(i)?e.setProperty(hyphenate(r),i.replace(importantRE,""),"important"):e[r]=i}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const i=prefixCache[t];if(i)return i;let r=camelize(t);if(r!=="filter"&&r in e)return prefixCache[t]=r;r=capitalize(r);for(let n=0;n<prefixes.length;n++){const a=prefixes[n]+r;if(a in e)return prefixCache[t]=a}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,i,r,n,a=isSpecialBooleanAttr(t)){r&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,i):i==null||a&&!includeBooleanAttr(i)?e.removeAttribute(t):e.setAttribute(t,a?"":isSymbol(i)?String(i):i)}function patchDOMProp(e,t,i,r,n){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?unsafeToTrustedHTML(i):i);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const s=a==="OPTION"?e.getAttribute("value")||"":e.value,l=i==null?e.type==="checkbox"?"on":"":String(i);(s!==l||!("_value"in e))&&(e.value=l),i==null&&e.removeAttribute(t),e._value=i;return}let o=!1;if(i===""||i==null){const s=typeof e[t];s==="boolean"?i=includeBooleanAttr(i):i==null&&s==="string"?(i="",o=!0):s==="number"&&(i=0,o=!0)}try{e[t]=i}catch{}o&&e.removeAttribute(n||t)}function addEventListener(e,t,i,r){e.addEventListener(t,i,r)}function removeEventListener(e,t,i,r){e.removeEventListener(t,i,r)}const veiKey=Symbol("_vei");function patchEvent(e,t,i,r,n=null){const a=e[veiKey]||(e[veiKey]={}),o=a[t];if(r&&o)o.value=r;else{const[s,l]=parseName(t);if(r){const u=a[t]=createInvoker(r,n);addEventListener(e,s,u,l)}else o&&(removeEventListener(e,s,o,l),a[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let r;for(;r=e.match(optionsModifierRE);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,t){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(r,i.value),t,5,[r])};return i.value=e,i.attached=getNow(),i}function patchStopImmediatePropagation(e,t){if(isArray(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(r=>n=>!n._stopped&&r&&r(n))}else return t}const isNativeOn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,patchProp=(e,t,i,r,n,a)=>{const o=n==="svg";t==="class"?patchClass(e,r,o):t==="style"?patchStyle(e,i,r):isOn(t)?isModelListener(t)||patchEvent(e,t,i,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,r,o))?(patchDOMProp(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&patchAttr(e,t,r,o,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!isString(r))?patchDOMProp(e,camelize(t),r,a,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),patchAttr(e,t,r,o))};function shouldSetAsProp(e,t,i,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&isNativeOn(t)&&isFunction(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return isNativeOn(t)&&isString(i)?!1:t in e}const getModelAssigner=e=>{const t=e.props["onUpdate:modelValue"]||!1;return isArray(t)?i=>invokeArrayFns(t,i):t};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(e,{modifiers:{lazy:t,trim:i,number:r}},n){e[assignKey]=getModelAssigner(n);const a=r||n.props&&n.props.type==="number";addEventListener(e,t?"change":"input",o=>{if(o.target.composing)return;let s=e.value;i&&(s=s.trim()),a&&(s=looseToNumber(s)),e[assignKey](s)}),i&&addEventListener(e,"change",()=>{e.value=e.value.trim()}),t||(addEventListener(e,"compositionstart",onCompositionStart),addEventListener(e,"compositionend",onCompositionEnd),addEventListener(e,"change",onCompositionEnd))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:i,modifiers:{lazy:r,trim:n,number:a}},o){if(e[assignKey]=getModelAssigner(o),e.composing)return;const s=(a||e.type==="number")&&!/^0\d/.test(e.value)?looseToNumber(e.value):e.value,l=t??"";s!==l&&(document.activeElement===e&&e.type!=="range"&&(r&&t===i||n&&e.value.trim()===l)||(e.value=l))}},vModelSelect={deep:!0,created(e,{value:t,modifiers:{number:i}},r){const n=isSet(t);addEventListener(e,"change",()=>{const a=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>i?looseToNumber(getValue(o)):getValue(o));e[assignKey](e.multiple?n?new Set(a):a:a[0]),e._assigning=!0,nextTick(()=>{e._assigning=!1})}),e[assignKey]=getModelAssigner(r)},mounted(e,{value:t}){setSelected(e,t)},beforeUpdate(e,t,i){e[assignKey]=getModelAssigner(i)},updated(e,{value:t}){e._assigning||setSelected(e,t)}};function setSelected(e,t){const i=e.multiple,r=isArray(t);if(!(i&&!r&&!isSet(t))){for(let n=0,a=e.options.length;n<a;n++){const o=e.options[n],s=getValue(o);if(i)if(r){const l=typeof s;l==="string"||l==="number"?o.selected=t.some(u=>String(u)===String(s)):o.selected=looseIndexOf(t,s)>-1}else o.selected=t.has(s);else if(looseEqual(getValue(o),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function getValue(e){return"_value"in e?e._value:e.value}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:i}=t;return t.mount=r=>{const n=normalizeContainer(r);if(!n)return;const a=t._component;!isFunction(a)&&!a.render&&!a.template&&(a.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=i(n,!1,resolveRootNamespace(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t};function resolveRootNamespace(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function normalizeContainer(e){return isString(e)?document.querySelector(e):e}var lib$3={},browser$3={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var e=1e3,t=e*60,i=t*60,r=i*24,n=r*7,a=r*365.25;ms=function(c,m){m=m||{};var f=typeof c;if(f==="string"&&c.length>0)return o(c);if(f==="number"&&isFinite(c))return m.long?l(c):s(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))};function o(c){if(c=String(c),!(c.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(c);if(m){var f=parseFloat(m[1]),d=(m[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return f*a;case"weeks":case"week":case"w":return f*n;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*i;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function s(c){var m=Math.abs(c);return m>=r?Math.round(c/r)+"d":m>=i?Math.round(c/i)+"h":m>=t?Math.round(c/t)+"m":m>=e?Math.round(c/e)+"s":c+"ms"}function l(c){var m=Math.abs(c);return m>=r?u(c,m,r,"day"):m>=i?u(c,m,i,"hour"):m>=t?u(c,m,t,"minute"):m>=e?u(c,m,e,"second"):c+" ms"}function u(c,m,f,d){var b=m>=f*1.5;return Math.round(c/f)+" "+d+(b?"s":"")}return ms}var common,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;function e(t){r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=a,r.enabled=l,r.humanize=requireMs(),r.destroy=c,Object.keys(t).forEach(m=>{r[m]=t[m]}),r.names=[],r.skips=[],r.formatters={};function i(m){let f=0;for(let d=0;d<m.length;d++)f=(f<<5)-f+m.charCodeAt(d),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=i;function r(m){let f,d=null,b,y;function w(...T){if(!w.enabled)return;const E=w,R=Number(new Date),C=R-(f||R);E.diff=C,E.prev=f,E.curr=R,f=R,T[0]=r.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let B=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(_,x)=>{if(_==="%%")return"%";B++;const ee=r.formatters[x];if(typeof ee=="function"){const N=T[B];_=ee.call(E,N),T.splice(B,1),B--}return _}),r.formatArgs.call(E,T),(E.log||r.log).apply(E,T)}return w.namespace=m,w.useColors=r.useColors(),w.color=r.selectColor(m),w.extend=n,w.destroy=r.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(b!==r.namespaces&&(b=r.namespaces,y=r.enabled(m)),y),set:T=>{d=T}}),typeof r.init=="function"&&r.init(w),w}function n(m,f){const d=r(this.namespace+(typeof f>"u"?":":f)+m);return d.log=this.log,d}function a(m){r.save(m),r.namespaces=m,r.names=[],r.skips=[];const f=(typeof m=="string"?m:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const d of f)d[0]==="-"?r.skips.push(d.slice(1)):r.names.push(d)}function o(m,f){let d=0,b=0,y=-1,w=0;for(;d<m.length;)if(b<f.length&&(f[b]===m[d]||f[b]==="*"))f[b]==="*"?(y=b,w=d,b++):(d++,b++);else if(y!==-1)b=y+1,w++,d=w;else return!1;for(;b<f.length&&f[b]==="*";)b++;return b===f.length}function s(){const m=[...r.names,...r.skips.map(f=>"-"+f)].join(",");return r.enable(""),m}function l(m){for(const f of r.skips)if(o(m,f))return!1;for(const f of r.names)if(o(m,f))return!0;return!1}function u(m){return m instanceof Error?m.stack||m.message:m}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return common=e,common}var hasRequiredBrowser$3;function requireBrowser$3(){return hasRequiredBrowser$3||(hasRequiredBrowser$3=1,(function(e,t){var i={};t.formatArgs=n,t.save=a,t.load=o,t.useColors=r,t.storage=s(),t.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;u.splice(1,0,c,"color: inherit");let m=0,f=0;u[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(m++,d==="%c"&&(f=m))}),u.splice(f,0,c)}t.log=console.debug||console.log||(()=>{});function a(u){try{u?t.storage.setItem("debug",u):t.storage.removeItem("debug")}catch{}}function o(){let u;try{u=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=i.DEBUG),u}function s(){try{return localStorage}catch{}}e.exports=requireCommon()(t);const{formatters:l}=e.exports;l.j=function(u){try{return JSON.stringify(u)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}})(browser$3,browser$3.exports)),browser$3.exports}var core$2={},core$1={},ReadStreamTokenizer={},AbstractTokenizer={},lib$2={},EndOfFileStream={},hasRequiredEndOfFileStream;function requireEndOfFileStream(){return hasRequiredEndOfFileStream||(hasRequiredEndOfFileStream=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EndOfStreamError=e.defaultMessages=void 0,e.defaultMessages="End-Of-Stream";class t extends Error{constructor(){super(e.defaultMessages)}}e.EndOfStreamError=t})(EndOfFileStream)),EndOfFileStream}var StreamReader={},Deferred={},hasRequiredDeferred;function requireDeferred(){if(hasRequiredDeferred)return Deferred;hasRequiredDeferred=1,Object.defineProperty(Deferred,"__esModule",{value:!0}),Deferred.Deferred=void 0;let e=class{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((i,r)=>{this.reject=r,this.resolve=i})}};return Deferred.Deferred=e,Deferred}var hasRequiredStreamReader;function requireStreamReader(){return hasRequiredStreamReader||(hasRequiredStreamReader=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StreamReader=e.EndOfStreamError=void 0;const t=requireEndOfFileStream(),i=requireDeferred();var r=requireEndOfFileStream();Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return r.EndOfStreamError}});const n=1*1024*1024;class a{constructor(s){if(this.s=s,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!s.read||!s.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new t.EndOfStreamError)),this.s.once("error",l=>this.reject(l)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(s,l,u){const c=await this.read(s,l,u);return this.peekQueue.push(s.subarray(l,l+c)),c}async read(s,l,u){if(u===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new t.EndOfStreamError;let c=u,m=0;for(;this.peekQueue.length>0&&c>0;){const f=this.peekQueue.pop();if(!f)throw new Error("peekData should be defined");const d=Math.min(f.length,c);s.set(f.subarray(0,d),l+m),m+=d,c-=d,d<f.length&&this.peekQueue.push(f.subarray(d))}for(;c>0&&!this.endOfStream;){const f=Math.min(c,n),d=await this.readFromStream(s,l+m,f);if(m+=d,d<f)break;c-=d}return m}async readFromStream(s,l,u){const c=this.s.read(u);if(c)return s.set(c,l),c.length;{const m={buffer:s,offset:l,length:u,deferred:new i.Deferred};return this.deferred=m.deferred,this.s.once("readable",()=>{this.readDeferred(m)}),m.deferred.promise}}readDeferred(s){const l=this.s.read(s.length);l?(s.buffer.set(l,s.offset),s.deferred.resolve(l.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(s)})}reject(s){this.endOfStream=!0,this.deferred&&(this.deferred.reject(s),this.deferred=null)}}e.StreamReader=a})(StreamReader)),StreamReader}var hasRequiredLib$3;function requireLib$3(){return hasRequiredLib$3||(hasRequiredLib$3=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StreamReader=e.EndOfStreamError=void 0;var t=requireEndOfFileStream();Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return t.EndOfStreamError}});var i=requireStreamReader();Object.defineProperty(e,"StreamReader",{enumerable:!0,get:function(){return i.StreamReader}})})(lib$2)),lib$2}var hasRequiredAbstractTokenizer;function requireAbstractTokenizer(){if(hasRequiredAbstractTokenizer)return AbstractTokenizer;hasRequiredAbstractTokenizer=1,Object.defineProperty(AbstractTokenizer,"__esModule",{value:!0}),AbstractTokenizer.AbstractTokenizer=void 0;const e=requireLib$3();let t=class{constructor(r){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=r||{}}async readToken(r,n=this.position){const a=Buffer.alloc(r.len);if(await this.readBuffer(a,{position:n})<r.len)throw new e.EndOfStreamError;return r.get(a,0)}async peekToken(r,n=this.position){const a=Buffer.alloc(r.len);if(await this.peekBuffer(a,{position:n})<r.len)throw new e.EndOfStreamError;return r.get(a,0)}async readNumber(r){if(await this.readBuffer(this.numBuffer,{length:r.len})<r.len)throw new e.EndOfStreamError;return r.get(this.numBuffer,0)}async peekNumber(r){if(await this.peekBuffer(this.numBuffer,{length:r.len})<r.len)throw new e.EndOfStreamError;return r.get(this.numBuffer,0)}async ignore(r){if(this.fileInfo.size!==void 0){const n=this.fileInfo.size-this.position;if(r>n)return this.position+=n,n}return this.position+=r,r}async close(){}normalizeOptions(r,n){if(n&&n.position!==void 0&&n.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return n?{mayBeLess:n.mayBeLess===!0,offset:n.offset?n.offset:0,length:n.length?n.length:r.length-(n.offset?n.offset:0),position:n.position?n.position:this.position}:{mayBeLess:!1,offset:0,length:r.length,position:this.position}}};return AbstractTokenizer.AbstractTokenizer=t,AbstractTokenizer}var hasRequiredReadStreamTokenizer;function requireReadStreamTokenizer(){if(hasRequiredReadStreamTokenizer)return ReadStreamTokenizer;hasRequiredReadStreamTokenizer=1,Object.defineProperty(ReadStreamTokenizer,"__esModule",{value:!0}),ReadStreamTokenizer.ReadStreamTokenizer=void 0;const e=requireAbstractTokenizer(),t=requireLib$3(),i=256e3;let r=class extends e.AbstractTokenizer{constructor(a,o){super(o),this.streamReader=new t.StreamReader(a)}async getFileInfo(){return this.fileInfo}async readBuffer(a,o){const s=this.normalizeOptions(a,o),l=s.position-this.position;if(l>0)return await this.ignore(l),this.readBuffer(a,o);if(l<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(s.length===0)return 0;const u=await this.streamReader.read(a,s.offset,s.length);if(this.position+=u,(!o||!o.mayBeLess)&&u<s.length)throw new t.EndOfStreamError;return u}async peekBuffer(a,o){const s=this.normalizeOptions(a,o);let l=0;if(s.position){const u=s.position-this.position;if(u>0){const c=new Uint8Array(s.length+u);return l=await this.peekBuffer(c,{mayBeLess:s.mayBeLess}),a.set(c.subarray(u),s.offset),l-u}else if(u<0)throw new Error("Cannot peek from a negative offset in a stream")}if(s.length>0){try{l=await this.streamReader.peek(a,s.offset,s.length)}catch(u){if(o&&o.mayBeLess&&u instanceof t.EndOfStreamError)return 0;throw u}if(!s.mayBeLess&&l<s.length)throw new t.EndOfStreamError}return l}async ignore(a){const o=Math.min(i,a),s=new Uint8Array(o);let l=0;for(;l<a;){const u=a-l,c=await this.readBuffer(s,{length:Math.min(o,u)});if(c<0)return c;l+=c}return l}};return ReadStreamTokenizer.ReadStreamTokenizer=r,ReadStreamTokenizer}var BufferTokenizer={},hasRequiredBufferTokenizer;function requireBufferTokenizer(){if(hasRequiredBufferTokenizer)return BufferTokenizer;hasRequiredBufferTokenizer=1,Object.defineProperty(BufferTokenizer,"__esModule",{value:!0}),BufferTokenizer.BufferTokenizer=void 0;const e=requireLib$3(),t=requireAbstractTokenizer();let i=class extends t.AbstractTokenizer{constructor(n,a){super(a),this.uint8Array=n,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:n.length}async readBuffer(n,a){if(a&&a.position){if(a.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=a.position}const o=await this.peekBuffer(n,a);return this.position+=o,o}async peekBuffer(n,a){const o=this.normalizeOptions(n,a),s=Math.min(this.uint8Array.length-o.position,o.length);if(!o.mayBeLess&&s<o.length)throw new e.EndOfStreamError;return n.set(this.uint8Array.subarray(o.position,o.position+s),o.offset),s}async close(){}};return BufferTokenizer.BufferTokenizer=i,BufferTokenizer}var hasRequiredCore$2;function requireCore$2(){return hasRequiredCore$2||(hasRequiredCore$2=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fromBuffer=e.fromStream=e.EndOfStreamError=void 0;const t=requireReadStreamTokenizer(),i=requireBufferTokenizer();var r=requireLib$3();Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return r.EndOfStreamError}});function n(o,s){return s=s||{},new t.ReadStreamTokenizer(o,s)}e.fromStream=n;function a(o,s){return new i.BufferTokenizer(o,s)}e.fromBuffer=a})(core$1)),core$1}var ParserFactory={},lib$1={},ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredIeee754;function requireIeee754(){return hasRequiredIeee754||(hasRequiredIeee754=1,ieee754.read=function(e,t,i,r,n){var a,o,s=n*8-r-1,l=(1<<s)-1,u=l>>1,c=-7,m=i?n-1:0,f=i?-1:1,d=e[t+m];for(m+=f,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=a*256+e[t+m],m+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=o*256+e[t+m],m+=f,c-=8);if(a===0)a=1-u;else{if(a===l)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,r),a=a-u}return(d?-1:1)*o*Math.pow(2,a-r)},ieee754.write=function(e,t,i,r,n,a){var o,s,l,u=a*8-n-1,c=(1<<u)-1,m=c>>1,f=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,b=r?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+m>=1?t+=f/l:t+=f*Math.pow(2,1-m),t*l>=2&&(o++,l/=2),o+m>=c?(s=0,o=c):o+m>=1?(s=(t*l-1)*Math.pow(2,n),o=o+m):(s=t*Math.pow(2,m-1)*Math.pow(2,n),o=0));n>=8;e[i+d]=s&255,d+=b,s/=256,n-=8);for(o=o<<n|s,u+=n;u>0;e[i+d]=o&255,d+=b,o/=256,u-=8);e[i+d-b]|=y*128}),ieee754}var hasRequiredLib$2;function requireLib$2(){return hasRequiredLib$2||(hasRequiredLib$2=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AnsiStringType=e.StringType=e.BufferType=e.Uint8ArrayType=e.IgnoreType=e.Float80_LE=e.Float80_BE=e.Float64_LE=e.Float64_BE=e.Float32_LE=e.Float32_BE=e.Float16_LE=e.Float16_BE=e.INT64_BE=e.UINT64_BE=e.INT64_LE=e.UINT64_LE=e.INT32_LE=e.INT32_BE=e.INT24_BE=e.INT24_LE=e.INT16_LE=e.INT16_BE=e.INT8=e.UINT32_BE=e.UINT32_LE=e.UINT24_BE=e.UINT24_LE=e.UINT16_BE=e.UINT16_LE=e.UINT8=void 0;const t=requireIeee754();function i(l){return new DataView(l.buffer,l.byteOffset)}e.UINT8={len:1,get(l,u){return i(l).getUint8(u)},put(l,u,c){return i(l).setUint8(u,c),u+1}},e.UINT16_LE={len:2,get(l,u){return i(l).getUint16(u,!0)},put(l,u,c){return i(l).setUint16(u,c,!0),u+2}},e.UINT16_BE={len:2,get(l,u){return i(l).getUint16(u)},put(l,u,c){return i(l).setUint16(u,c),u+2}},e.UINT24_LE={len:3,get(l,u){const c=i(l);return c.getUint8(u)+(c.getUint16(u+1,!0)<<8)},put(l,u,c){const m=i(l);return m.setUint8(u,c&255),m.setUint16(u+1,c>>8,!0),u+3}},e.UINT24_BE={len:3,get(l,u){const c=i(l);return(c.getUint16(u)<<8)+c.getUint8(u+2)},put(l,u,c){const m=i(l);return m.setUint16(u,c>>8),m.setUint8(u+2,c&255),u+3}},e.UINT32_LE={len:4,get(l,u){return i(l).getUint32(u,!0)},put(l,u,c){return i(l).setUint32(u,c,!0),u+4}},e.UINT32_BE={len:4,get(l,u){return i(l).getUint32(u)},put(l,u,c){return i(l).setUint32(u,c),u+4}},e.INT8={len:1,get(l,u){return i(l).getInt8(u)},put(l,u,c){return i(l).setInt8(u,c),u+1}},e.INT16_BE={len:2,get(l,u){return i(l).getInt16(u)},put(l,u,c){return i(l).setInt16(u,c),u+2}},e.INT16_LE={len:2,get(l,u){return i(l).getInt16(u,!0)},put(l,u,c){return i(l).setInt16(u,c,!0),u+2}},e.INT24_LE={len:3,get(l,u){const c=e.UINT24_LE.get(l,u);return c>8388607?c-16777216:c},put(l,u,c){const m=i(l);return m.setUint8(u,c&255),m.setUint16(u+1,c>>8,!0),u+3}},e.INT24_BE={len:3,get(l,u){const c=e.UINT24_BE.get(l,u);return c>8388607?c-16777216:c},put(l,u,c){const m=i(l);return m.setUint16(u,c>>8),m.setUint8(u+2,c&255),u+3}},e.INT32_BE={len:4,get(l,u){return i(l).getInt32(u)},put(l,u,c){return i(l).setInt32(u,c),u+4}},e.INT32_LE={len:4,get(l,u){return i(l).getInt32(u,!0)},put(l,u,c){return i(l).setInt32(u,c,!0),u+4}},e.UINT64_LE={len:8,get(l,u){return i(l).getBigUint64(u,!0)},put(l,u,c){return i(l).setBigUint64(u,c,!0),u+8}},e.INT64_LE={len:8,get(l,u){return i(l).getBigInt64(u,!0)},put(l,u,c){return i(l).setBigInt64(u,c,!0),u+8}},e.UINT64_BE={len:8,get(l,u){return i(l).getBigUint64(u)},put(l,u,c){return i(l).setBigUint64(u,c),u+8}},e.INT64_BE={len:8,get(l,u){return i(l).getBigInt64(u)},put(l,u,c){return i(l).setBigInt64(u,c),u+8}},e.Float16_BE={len:2,get(l,u){return t.read(l,u,!1,10,this.len)},put(l,u,c){return t.write(l,c,u,!1,10,this.len),u+this.len}},e.Float16_LE={len:2,get(l,u){return t.read(l,u,!0,10,this.len)},put(l,u,c){return t.write(l,c,u,!0,10,this.len),u+this.len}},e.Float32_BE={len:4,get(l,u){return i(l).getFloat32(u)},put(l,u,c){return i(l).setFloat32(u,c),u+4}},e.Float32_LE={len:4,get(l,u){return i(l).getFloat32(u,!0)},put(l,u,c){return i(l).setFloat32(u,c,!0),u+4}},e.Float64_BE={len:8,get(l,u){return i(l).getFloat64(u)},put(l,u,c){return i(l).setFloat64(u,c),u+8}},e.Float64_LE={len:8,get(l,u){return i(l).getFloat64(u,!0)},put(l,u,c){return i(l).setFloat64(u,c,!0),u+8}},e.Float80_BE={len:10,get(l,u){return t.read(l,u,!1,63,this.len)},put(l,u,c){return t.write(l,c,u,!1,63,this.len),u+this.len}},e.Float80_LE={len:10,get(l,u){return t.read(l,u,!0,63,this.len)},put(l,u,c){return t.write(l,c,u,!0,63,this.len),u+this.len}};class r{constructor(u){this.len=u}get(u,c){}}e.IgnoreType=r;class n{constructor(u){this.len=u}get(u,c){return u.subarray(c,c+this.len)}}e.Uint8ArrayType=n;class a{constructor(u){this.len=u}get(u,c){return Buffer.from(u.subarray(c,c+this.len))}}e.BufferType=a;class o{constructor(u,c){this.len=u,this.encoding=c}get(u,c){return Buffer.from(u).toString(this.encoding,c,c+this.len)}}e.StringType=o;class s{constructor(u){this.len=u}static decode(u,c,m){let f="";for(let d=c;d<m;++d)f+=s.codePointToString(s.singleByteDecoder(u[d]));return f}static inRange(u,c,m){return c<=u&&u<=m}static codePointToString(u){return u<=65535?String.fromCharCode(u):(u-=65536,String.fromCharCode((u>>10)+55296,(u&1023)+56320))}static singleByteDecoder(u){if(s.inRange(u,0,127))return u;const c=s.windows1252[u-128];if(c===null)throw Error("invaliding encoding");return c}get(u,c=0){return s.decode(u,c,c+this.len)}}e.AnsiStringType=s,s.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]})(lib$1)),lib$1}var util$1={},hasRequiredUtil$2;function requireUtil$2(){return hasRequiredUtil$2||(hasRequiredUtil$2=1,util$1.stringToBytes=e=>[...e].map(t=>t.charCodeAt(0)),util$1.tarHeaderChecksumMatches=(e,t=0)=>{const i=parseInt(e.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(i))return!1;let r=256;for(let n=t;n<t+148;n++)r+=e[n];for(let n=t+156;n<t+512;n++)r+=e[n];return i===r},util$1.uint32SyncSafeToken={get:(e,t)=>e[t+3]&127|e[t+2]<<7|e[t+1]<<14|e[t]<<21,len:4}),util$1}var supported,hasRequiredSupported;function requireSupported(){return hasRequiredSupported||(hasRequiredSupported=1,supported={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]}),supported}var core,hasRequiredCore$1;function requireCore$1(){if(hasRequiredCore$1)return core;hasRequiredCore$1=1;const Token=requireLib$2(),strtok3=requireCore$2(),{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=requireUtil$2(),supported=requireSupported(),minimumBytes=4100;async function fromStream(e){const t=await strtok3.fromStream(e);try{return await fromTokenizer(t)}finally{await t.close()}}async function fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||Buffer.isBuffer(e)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof e}\``);const t=e instanceof Buffer?e:Buffer.from(e);if(!(t&&t.length>1))return;const i=strtok3.fromBuffer(t);return fromTokenizer(i)}function _check(e,t,i){i={offset:0,...i};for(const[r,n]of t.entries())if(i.mask){if(n!==(i.mask[r]&e[r+i.offset]))return!1}else if(n!==e[r+i.offset])return!1;return!0}async function fromTokenizer(e){try{return _fromTokenizer(e)}catch(t){if(!(t instanceof strtok3.EndOfStreamError))throw t}}async function _fromTokenizer(e){let t=Buffer.alloc(minimumBytes);const i=12,r=(a,o)=>_check(t,a,o),n=(a,o)=>r(stringToBytes(a),o);if(e.fileInfo.size||(e.fileInfo.size=Number.MAX_SAFE_INTEGER),await e.peekBuffer(t,{length:i,mayBeLess:!0}),r([66,77]))return{ext:"bmp",mime:"image/bmp"};if(r([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(r([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(r([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(r([37,33]))return await e.peekBuffer(t,{length:24,mayBeLess:!0}),n("PS-Adobe-",{offset:2})&&n(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(r([31,160])||r([31,157]))return{ext:"Z",mime:"application/x-compress"};if(r([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(r([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(r([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(r([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(n("ID3")){await e.ignore(6);const a=await e.readToken(uint32SyncSafeToken);return e.position+a>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(a),fromTokenizer(e))}if(n("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((t[0]===67||t[0]===70)&&r([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(r([71,73,70]))return{ext:"gif",mime:"image/gif"};if(n("FLIF"))return{ext:"flif",mime:"image/flif"};if(n("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(n("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(n("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(n("FORM"))return{ext:"aif",mime:"audio/aiff"};if(n("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(r([80,75,3,4])){try{for(;e.position+30<e.fileInfo.size;){await e.readBuffer(t,{length:30});const a={compressedSize:t.readUInt32LE(18),uncompressedSize:t.readUInt32LE(22),filenameLength:t.readUInt16LE(26),extraFieldLength:t.readUInt16LE(28)};if(a.filename=await e.readToken(new Token.StringType(a.filenameLength,"utf-8")),await e.ignore(a.extraFieldLength),a.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(a.filename.endsWith(".rels")||a.filename.endsWith(".xml"))switch(a.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if(a.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(a.filename.startsWith("3D/")&&a.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(a.filename==="mimetype"&&a.compressedSize===a.uncompressedSize)switch(await e.readToken(new Token.StringType(a.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if(a.compressedSize===0){let o=-1;for(;o<0&&e.position<e.fileInfo.size;)await e.peekBuffer(t,{mayBeLess:!0}),o=t.indexOf("504B0304",0,"hex"),await e.ignore(o>=0?o:t.length)}else await e.ignore(a.compressedSize)}}catch(a){if(!(a instanceof strtok3.EndOfStreamError))throw a}return{ext:"zip",mime:"application/zip"}}if(n("OggS")){await e.ignore(28);const a=Buffer.alloc(8);return await e.readBuffer(a),_check(a,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(a,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(a,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(a,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(a,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(a,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(r([80,75])&&(t[2]===3||t[2]===5||t[2]===7)&&(t[3]===4||t[3]===6||t[3]===8))return{ext:"zip",mime:"application/zip"};if(n("ftyp",{offset:4})&&(t[8]&96)!==0){const a=t.toString("binary",8,12).replace("\0"," ").trim();switch(a){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return a.startsWith("3g")?a.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(n("MThd"))return{ext:"mid",mime:"audio/midi"};if(n("wOFF")&&(r([0,1,0,0],{offset:4})||n("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(n("wOF2")&&(r([0,1,0,0],{offset:4})||n("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(r([212,195,178,161])||r([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(n("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(n("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(n("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(r([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(n("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(n("%PDF")){await e.ignore(1350);const a=10*1024*1024,o=Buffer.alloc(Math.min(a,e.fileInfo.size));return await e.readBuffer(o,{mayBeLess:!0}),o.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(r([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(r([73,73,42,0]))return n("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:r([28,0,254,0],{offset:8})||r([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:r([8,0,0,0],{offset:4})&&(r([45,0,254,0],{offset:8})||r([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(t=Buffer.alloc(24),await e.peekBuffer(t),(r([16,251,134,1],{offset:4})||r([8,0,0,0],{offset:4}))&&r([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(r([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(n("MAC "))return{ext:"ape",mime:"audio/ape"};if(r([26,69,223,163])){async function a(){const c=await e.peekNumber(Token.UINT8);let m=128,f=0;for(;(c&m)===0&&m!==0;)++f,m>>=1;const d=Buffer.alloc(f+1);return await e.readBuffer(d),d}async function o(){const c=await a(),m=await a();m[0]^=128>>m.length-1;const f=Math.min(6,m.length);return{id:c.readUIntBE(0,c.length),len:m.readUIntBE(m.length-f,f)}}async function s(c,m){for(;m>0;){const f=await o();if(f.id===17026)return e.readToken(new Token.StringType(f.len,"utf-8"));await e.ignore(f.len),--m}}const l=await o();switch(await s(1,l.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(r([82,73,70,70])){if(r([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(r([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(r([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(n("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(r([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(n("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(n("MSCF")||n("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(r([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(r([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(r([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(r([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(n("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(n("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(r([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(n("IMPM"))return{ext:"it",mime:"audio/x-it"};if(n("-lh0-",{offset:2})||n("-lh1-",{offset:2})||n("-lh2-",{offset:2})||n("-lh3-",{offset:2})||n("-lh4-",{offset:2})||n("-lh5-",{offset:2})||n("-lh6-",{offset:2})||n("-lh7-",{offset:2})||n("-lzs-",{offset:2})||n("-lz4-",{offset:2})||n("-lz5-",{offset:2})||n("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(r([0,0,1,186])){if(r([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(r([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(n("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(r([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(n("<?xml "))return{ext:"xml",mime:"application/xml"};if(r([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(r([82,97,114,33,26,7])&&(t[6]===0||t[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(n("solid "))return{ext:"stl",mime:"model/stl"};if(n("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(n("!<arch>"))return await e.ignore(8),await e.readToken(new Token.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(r([137,80,78,71,13,10,26,10])){await e.ignore(8);async function a(){return{length:await e.readToken(Token.INT32_BE),type:await e.readToken(new Token.StringType(4,"binary"))}}do{const o=await a();if(o.length<0)return;switch(o.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(o.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(r([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(r([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(r([102,114,101,101],{offset:4})||r([109,100,97,116],{offset:4})||r([109,111,111,118],{offset:4})||r([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(r([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(n("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(r([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(r([48,38,178,117,142,102,207,17,166,217])){async function a(){const o=Buffer.alloc(16);return await e.readBuffer(o),{id:o,size:Number(await e.readToken(Token.UINT64_LE))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){const o=await a();let s=o.size-24;if(_check(o.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const l=Buffer.alloc(16);if(s-=await e.readBuffer(l),_check(l,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(l,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(s)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(r([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((r([126,16,4])||r([126,24,4]))&&r([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(r([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(r([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await e.ignore(20),await e.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(r([255,10])||r([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(r([0,0,1,186])||r([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(r([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(r([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(r([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(r([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(t,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),n("BEGIN:")){if(n("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(n("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(n("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(n("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(n("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(r([4,0,0,0])&&t.length>=16){const a=t.readUInt32LE(12);if(a>12&&t.length>=a+16)try{const o=t.slice(16,a+16).toString();if(JSON.parse(o).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(r([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(n("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(r([71],{offset:4})&&(r([71],{offset:192})||r([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(r([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(r([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(r([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(r([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(r([76,80],{offset:34})&&(r([0,0,1],{offset:8})||r([1,0,2],{offset:8})||r([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(r([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(t,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(t))return{ext:"tar",mime:"application/x-tar"};if(r([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(n("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(t.length>=2&&r([255,224],{offset:0,mask:[255,224]})){if(r([16],{offset:1,mask:[22]}))return r([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(r([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(r([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(r([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}const stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{const e=new stream.PassThrough;let t;stream.pipeline?t=stream.pipeline(readableStream,e,()=>{}):t=readableStream.pipe(e);const i=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const r=await fromBuffer(i);e.fileType=r}catch(r){reject(r)}resolve(t)})}),fileType={fromStream,fromTokenizer,fromBuffer,stream};return Object.defineProperty(fileType,"extensions",{get(){return new Set(supported.extensions)}}),Object.defineProperty(fileType,"mimeTypes",{get(){return new Set(supported.mimeTypes)}}),core=fileType,core}var contentType={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var hasRequiredContentType;function requireContentType(){if(hasRequiredContentType)return contentType;hasRequiredContentType=1;var e=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,t=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,i=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,r=/\\([\u000b\u0020-\u00ff])/g,n=/([\\"])/g,a=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;contentType.format=o,contentType.parse=s;function o(m){if(!m||typeof m!="object")throw new TypeError("argument obj is required");var f=m.parameters,d=m.type;if(!d||!a.test(d))throw new TypeError("invalid type");var b=d;if(f&&typeof f=="object")for(var y,w=Object.keys(f).sort(),T=0;T<w.length;T++){if(y=w[T],!i.test(y))throw new TypeError("invalid parameter name");b+="; "+y+"="+u(f[y])}return b}function s(m){if(!m)throw new TypeError("argument string is required");var f=typeof m=="object"?l(m):m;if(typeof f!="string")throw new TypeError("argument string is required to be a string");var d=f.indexOf(";"),b=d!==-1?f.slice(0,d).trim():f.trim();if(!a.test(b))throw new TypeError("invalid media type");var y=new c(b.toLowerCase());if(d!==-1){var w,T,E;for(e.lastIndex=d;T=e.exec(f);){if(T.index!==d)throw new TypeError("invalid parameter format");d+=T[0].length,w=T[1].toLowerCase(),E=T[2],E.charCodeAt(0)===34&&(E=E.slice(1,-1),E.indexOf("\\")!==-1&&(E=E.replace(r,"$1"))),y.parameters[w]=E}if(d!==f.length)throw new TypeError("invalid parameter format")}return y}function l(m){var f;if(typeof m.getHeader=="function"?f=m.getHeader("content-type"):typeof m.headers=="object"&&(f=m.headers&&m.headers["content-type"]),typeof f!="string")throw new TypeError("content-type header is missing from object");return f}function u(m){var f=String(m);if(i.test(f))return f;if(f.length>0&&!t.test(f))throw new TypeError("invalid parameter value");return'"'+f.replace(n,"\\$1")+'"'}function c(m){this.parameters=Object.create(null),this.type=m}return contentType}var mediaTyper={};/*!
 * media-typer
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var hasRequiredMediaTyper;function requireMediaTyper(){if(hasRequiredMediaTyper)return mediaTyper;hasRequiredMediaTyper=1;var e=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,t=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,i=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;mediaTyper.format=r,mediaTyper.parse=a,mediaTyper.test=n;function r(s){if(!s||typeof s!="object")throw new TypeError("argument obj is required");var l=s.subtype,u=s.suffix,c=s.type;if(!c||!t.test(c))throw new TypeError("invalid type");if(!l||!e.test(l))throw new TypeError("invalid subtype");var m=c+"/"+l;if(u){if(!t.test(u))throw new TypeError("invalid suffix");m+="+"+u}return m}function n(s){if(!s)throw new TypeError("argument string is required");if(typeof s!="string")throw new TypeError("argument string is required to be a string");return i.test(s.toLowerCase())}function a(s){if(!s)throw new TypeError("argument string is required");if(typeof s!="string")throw new TypeError("argument string is required to be a string");var l=i.exec(s.toLowerCase());if(!l)throw new TypeError("invalid media type");var u=l[1],c=l[2],m,f=c.lastIndexOf("+");return f!==-1&&(m=c.substr(f+1),c=c.substr(0,f)),new o(u,c,m)}function o(s,l,u){this.type=s,this.subtype=l,this.suffix=u}return mediaTyper}var MetadataCollector={},type={},types={},hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TrackType=e.TargetType=e.DataType=void 0,(function(t){t[t.string=0]="string",t[t.uint=1]="uint",t[t.uid=2]="uid",t[t.bool=3]="bool",t[t.binary=4]="binary",t[t.float=5]="float"})(e.DataType||(e.DataType={})),(function(t){t[t.shot=10]="shot",t[t.scene=20]="scene",t[t.track=30]="track",t[t.part=40]="part",t[t.album=50]="album",t[t.edition=60]="edition",t[t.collection=70]="collection"})(e.TargetType||(e.TargetType={})),(function(t){t[t.video=1]="video",t[t.audio=2]="audio",t[t.complex=3]="complex",t[t.logo=4]="logo",t[t.subtitle=17]="subtitle",t[t.button=18]="button",t[t.control=32]="control"})(e.TrackType||(e.TrackType={}))})(types)),types}var hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TrackType=void 0;var t=requireTypes();Object.defineProperty(e,"TrackType",{enumerable:!0,get:function(){return t.TrackType}})})(type)),type}var GenericTagTypes={},hasRequiredGenericTagTypes;function requireGenericTagTypes(){return hasRequiredGenericTagTypes||(hasRequiredGenericTagTypes=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isUnique=e.isSingleton=e.commonTags=void 0,e.commonTags={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};function t(r){return e.commonTags.hasOwnProperty(r)&&!e.commonTags[r].multiple}e.isSingleton=t;function i(r){return!e.commonTags[r].multiple||e.commonTags[r].unique}e.isUnique=i})(GenericTagTypes)),GenericTagTypes}var CombinedTagMapper={},ID3v1TagMap={},GenericTagMapper={},hasRequiredGenericTagMapper;function requireGenericTagMapper(){if(hasRequiredGenericTagMapper)return GenericTagMapper;hasRequiredGenericTagMapper=1,Object.defineProperty(GenericTagMapper,"__esModule",{value:!0}),GenericTagMapper.CommonTagMapper=void 0;class e{static toIntOrNull(i){const r=parseInt(i,10);return isNaN(r)?null:r}static normalizeTrack(i){const r=i.toString().split("/");return{no:parseInt(r[0],10)||null,of:parseInt(r[1],10)||null}}constructor(i,r){this.tagTypes=i,this.tagMap=r}mapGenericTag(i,r){i={id:i.id,value:i.value},this.postMap(i,r);const n=this.getCommonName(i.id);return n?{id:n,value:i.value}:null}getCommonName(i){return this.tagMap[i]}postMap(i,r){}}return e.maxRatingScore=1,GenericTagMapper.CommonTagMapper=e,GenericTagMapper}var hasRequiredID3v1TagMap;function requireID3v1TagMap(){if(hasRequiredID3v1TagMap)return ID3v1TagMap;hasRequiredID3v1TagMap=1,Object.defineProperty(ID3v1TagMap,"__esModule",{value:!0}),ID3v1TagMap.ID3v1TagMapper=void 0;const e=requireGenericTagMapper(),t={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"};class i extends e.CommonTagMapper{constructor(){super(["ID3v1"],t)}}return ID3v1TagMap.ID3v1TagMapper=i,ID3v1TagMap}var ID3v24TagMapper={},CaseInsensitiveTagMap={},hasRequiredCaseInsensitiveTagMap;function requireCaseInsensitiveTagMap(){if(hasRequiredCaseInsensitiveTagMap)return CaseInsensitiveTagMap;hasRequiredCaseInsensitiveTagMap=1,Object.defineProperty(CaseInsensitiveTagMap,"__esModule",{value:!0}),CaseInsensitiveTagMap.CaseInsensitiveTagMap=void 0;const e=requireGenericTagMapper();let t=class extends e.CommonTagMapper{constructor(r,n){const a={};for(const o of Object.keys(n))a[o.toUpperCase()]=n[o];super(r,a)}getCommonName(r){return this.tagMap[r.toUpperCase()]}};return CaseInsensitiveTagMap.CaseInsensitiveTagMap=t,CaseInsensitiveTagMap}var Util={},hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return Util;hasRequiredUtil$1=1,Object.defineProperty(Util,"__esModule",{value:!0}),Util.toRatio=Util.dbToRatio=Util.ratioToDb=Util.a2hex=Util.isBitSet=Util.getBitAllignedNumber=Util.stripNulls=Util.decodeString=Util.trimRightNull=Util.findZero=Util.getBit=void 0;function e(f,d,b){return(f[d]&1<<b)!==0}Util.getBit=e;function t(f,d,b,y){let w=d;if(y==="utf16le"){for(;f[w]!==0||f[w+1]!==0;){if(w>=b)return b;w+=2}return w}else{for(;f[w]!==0;){if(w>=b)return b;w++}return w}}Util.findZero=t;function i(f){const d=f.indexOf("\0");return d===-1?f:f.substr(0,d)}Util.trimRightNull=i;function r(f){const d=f.length;if((d&1)!==0)throw new Error("Buffer length must be even");for(let b=0;b<d;b+=2){const y=f[b];f[b]=f[b+1],f[b+1]=y}return f}function n(f,d){if(f[0]===255&&f[1]===254)return n(f.subarray(2),d);if(d==="utf16le"&&f[0]===254&&f[1]===255){if((f.length&1)!==0)throw new Error("Expected even number of octets for 16-bit unicode string");return n(r(f),d)}return Buffer.from(f).toString(d)}Util.decodeString=n;function a(f){return f=f.replace(/^\x00+/g,""),f=f.replace(/\x00+$/g,""),f}Util.stripNulls=a;function o(f,d,b,y){const w=d+~~(b/8),T=b%8;let E=f[w];E&=255>>T;const R=8-T,C=y-R;return C<0?E>>=8-T-y:C>0&&(E<<=C,E|=o(f,d,b+R,C)),E}Util.getBitAllignedNumber=o;function s(f,d,b){return o(f,d,b,1)===1}Util.isBitSet=s;function l(f){const d=[];for(let b=0,y=f.length;b<y;b++){const w=Number(f.charCodeAt(b)).toString(16);d.push(w.length===1?"0"+w:w)}return d.join(" ")}Util.a2hex=l;function u(f){return 10*Math.log10(f)}Util.ratioToDb=u;function c(f){return Math.pow(10,f/10)}Util.dbToRatio=c;function m(f){const d=f.split(" ").map(b=>b.trim().toLowerCase());if(d.length>=1){const b=parseFloat(d[0]);return d.length===2&&d[1]==="db"?{dB:b,ratio:c(b)}:{dB:u(b),ratio:b}}}return Util.toRatio=m,Util}var hasRequiredID3v24TagMapper;function requireID3v24TagMapper(){if(hasRequiredID3v24TagMapper)return ID3v24TagMapper;hasRequiredID3v24TagMapper=1,Object.defineProperty(ID3v24TagMapper,"__esModule",{value:!0}),ID3v24TagMapper.ID3v24TagMapper=void 0;const e=requireGenericTagMapper(),t=requireCaseInsensitiveTagMap(),i=requireUtil$1(),r={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer","USLT:description":"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"date",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl"};let n=class et extends t.CaseInsensitiveTagMap{static toRating(o){return{source:o.email,rating:o.rating>0?(o.rating-1)/254*e.CommonTagMapper.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],r)}postMap(o,s){switch(o.id){case"UFID":o.value.owner_identifier==="http://musicbrainz.org"&&(o.id+=":"+o.value.owner_identifier,o.value=i.decodeString(o.value.identifier,"latin1"));break;case"PRIV":switch(o.value.owner_identifier){case"AverageLevel":case"PeakValue":o.id+=":"+o.value.owner_identifier,o.value=o.value.data.length===4?o.value.data.readUInt32LE(0):null,o.value===null&&s.addWarning("Failed to parse PRIV:PeakValue");break;default:s.addWarning(`Unknown PRIV owner-identifier: ${o.value.owner_identifier}`)}break;case"COMM":o.value=o.value?o.value.text:null;break;case"POPM":o.value=et.toRating(o.value);break}}};return ID3v24TagMapper.ID3v24TagMapper=n,ID3v24TagMapper}var AsfTagMapper={},hasRequiredAsfTagMapper;function requireAsfTagMapper(){if(hasRequiredAsfTagMapper)return AsfTagMapper;hasRequiredAsfTagMapper=1,Object.defineProperty(AsfTagMapper,"__esModule",{value:!0}),AsfTagMapper.AsfTagMapper=void 0;const e=requireGenericTagMapper(),t={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"};let i=class rt extends e.CommonTagMapper{static toRating(n){return{rating:parseFloat(n+1)/5}}constructor(){super(["asf"],t)}postMap(n){switch(n.id){case"WM/SharedUserRating":const a=n.id.split(":");n.value=rt.toRating(n.value),n.id=a[0];break}}};return AsfTagMapper.AsfTagMapper=i,AsfTagMapper}var ID3v22TagMapper={},hasRequiredID3v22TagMapper;function requireID3v22TagMapper(){return hasRequiredID3v22TagMapper||(hasRequiredID3v22TagMapper=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ID3v22TagMapper=e.id3v22TagMap=void 0;const t=requireCaseInsensitiveTagMap();e.id3v22TagMap={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website","COM:iTunPGAP":"gapless",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};class i extends t.CaseInsensitiveTagMap{constructor(){super(["ID3v2.2"],e.id3v22TagMap)}}e.ID3v22TagMapper=i})(ID3v22TagMapper)),ID3v22TagMapper}var APEv2TagMapper={},hasRequiredAPEv2TagMapper;function requireAPEv2TagMapper(){if(hasRequiredAPEv2TagMapper)return APEv2TagMapper;hasRequiredAPEv2TagMapper=1,Object.defineProperty(APEv2TagMapper,"__esModule",{value:!0}),APEv2TagMapper.APEv2TagMapper=void 0;const e=requireCaseInsensitiveTagMap(),t={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"};let i=class extends e.CaseInsensitiveTagMap{constructor(){super(["APEv2"],t)}};return APEv2TagMapper.APEv2TagMapper=i,APEv2TagMapper}var MP4TagMapper={},hasRequiredMP4TagMapper;function requireMP4TagMapper(){return hasRequiredMP4TagMapper||(hasRequiredMP4TagMapper=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MP4TagMapper=e.tagType=void 0;const t=requireCaseInsensitiveTagMap(),i={"nam":"title","ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","alb":"album","day":"date","cmt":"comment","com":"comment",trkn:"track",disk:"disk","gen":"genre",covr:"picture","wrt":"composer","lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear",desc:"description",ldes:"longDescription","mvn":"movement","mvi":"movementIndex","mvc":"movementTotal","wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"};e.tagType="iTunes";class r extends t.CaseInsensitiveTagMap{constructor(){super([e.tagType],i)}postMap(a,o){switch(a.id){case"rate":a.value={source:void 0,rating:parseFloat(a.value)/100};break}}}e.MP4TagMapper=r})(MP4TagMapper)),MP4TagMapper}var VorbisTagMapper={},hasRequiredVorbisTagMapper;function requireVorbisTagMapper(){if(hasRequiredVorbisTagMapper)return VorbisTagMapper;hasRequiredVorbisTagMapper=1,Object.defineProperty(VorbisTagMapper,"__esModule",{value:!0}),VorbisTagMapper.VorbisTagMapper=void 0;const e=requireGenericTagMapper(),t={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"};let i=class je extends e.CommonTagMapper{static toRating(n,a,o){return{source:n&&n.toLowerCase(),rating:parseFloat(a)/o*e.CommonTagMapper.maxRatingScore}}constructor(){super(["vorbis"],t)}postMap(n){if(n.id==="RATING")n.value=je.toRating(void 0,n.value,100);else if(n.id.indexOf("RATING:")===0){const a=n.id.split(":");n.value=je.toRating(a[1],n.value,1),n.id=a[0]}}};return VorbisTagMapper.VorbisTagMapper=i,VorbisTagMapper}var RiffInfoTagMap={},hasRequiredRiffInfoTagMap;function requireRiffInfoTagMap(){return hasRequiredRiffInfoTagMap||(hasRequiredRiffInfoTagMap=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RiffInfoTagMapper=e.riffInfoTagMap=void 0;const t=requireGenericTagMapper();e.riffInfoTagMap={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};class i extends t.CommonTagMapper{constructor(){super(["exif"],e.riffInfoTagMap)}}e.RiffInfoTagMapper=i})(RiffInfoTagMap)),RiffInfoTagMap}var MatroskaTagMapper={},hasRequiredMatroskaTagMapper;function requireMatroskaTagMapper(){if(hasRequiredMatroskaTagMapper)return MatroskaTagMapper;hasRequiredMatroskaTagMapper=1,Object.defineProperty(MatroskaTagMapper,"__esModule",{value:!0}),MatroskaTagMapper.MatroskaTagMapper=void 0;const e=requireCaseInsensitiveTagMap(),t={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"};let i=class extends e.CaseInsensitiveTagMap{constructor(){super(["matroska"],t)}};return MatroskaTagMapper.MatroskaTagMapper=i,MatroskaTagMapper}var AiffTagMap={},hasRequiredAiffTagMap;function requireAiffTagMap(){if(hasRequiredAiffTagMap)return AiffTagMap;hasRequiredAiffTagMap=1,Object.defineProperty(AiffTagMap,"__esModule",{value:!0}),AiffTagMap.AiffTagMapper=void 0;const e=requireGenericTagMapper(),t={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"};class i extends e.CommonTagMapper{constructor(){super(["AIFF"],t)}}return AiffTagMap.AiffTagMapper=i,AiffTagMap}var hasRequiredCombinedTagMapper;function requireCombinedTagMapper(){if(hasRequiredCombinedTagMapper)return CombinedTagMapper;hasRequiredCombinedTagMapper=1,Object.defineProperty(CombinedTagMapper,"__esModule",{value:!0}),CombinedTagMapper.CombinedTagMapper=void 0;const e=requireID3v1TagMap(),t=requireID3v24TagMapper(),i=requireAsfTagMapper(),r=requireID3v22TagMapper(),n=requireAPEv2TagMapper(),a=requireMP4TagMapper(),o=requireVorbisTagMapper(),s=requireRiffInfoTagMap(),l=requireMatroskaTagMapper(),u=requireAiffTagMap();let c=class{constructor(){this.tagMappers={},[new e.ID3v1TagMapper,new r.ID3v22TagMapper,new t.ID3v24TagMapper,new a.MP4TagMapper,new a.MP4TagMapper,new o.VorbisTagMapper,new n.APEv2TagMapper,new i.AsfTagMapper,new s.RiffInfoTagMapper,new l.MatroskaTagMapper,new u.AiffTagMapper].forEach(f=>{this.registerTagMapper(f)})}mapTag(f,d,b){if(this.tagMappers[f])return this.tagMappers[f].mapGenericTag(d,b);throw new Error("No generic tag mapper defined for tag-format: "+f)}registerTagMapper(f){for(const d of f.tagTypes)this.tagMappers[d]=f}};return CombinedTagMapper.CombinedTagMapper=c,CombinedTagMapper}var hasRequiredMetadataCollector;function requireMetadataCollector(){if(hasRequiredMetadataCollector)return MetadataCollector;hasRequiredMetadataCollector=1,Object.defineProperty(MetadataCollector,"__esModule",{value:!0}),MetadataCollector.joinArtists=MetadataCollector.MetadataCollector=void 0;const e=requireType(),t=requireBrowser$3(),i=requireGenericTagTypes(),r=requireCombinedTagMapper(),n=requireGenericTagMapper(),a=requireUtil$1(),o=requireCore$1(),s=(0,t.default)("music-metadata:collector"),l=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"];let u=class{constructor(f){this.opts=f,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new r.CombinedTagMapper;let d=1;for(const b of l)this.originPriority[b]=d++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(f){s(`streamInfo: type=${e.TrackType[f.type]}, codec=${f.codecName}`),this.format.trackInfo.push(f)}setFormat(f,d){s(`format: ${f} = ${d}`),this.format[f]=d,this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:f,value:d}})}addTag(f,d,b){s(`tag ${f}.${d} = ${b}`),this.native[f]||(this.format.tagTypes.push(f),this.native[f]=[]),this.native[f].push({id:d,value:b}),this.toCommon(f,d,b)}addWarning(f){this.quality.warnings.push({message:f})}postMap(f,d){switch(d.id){case"artist":if(this.commonOrigin.artist===this.originPriority[f])return this.postMap("artificial",{id:"artists",value:d.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:d.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||this.common.artists.indexOf(d.value)===-1)){const T=(this.common.artists||[]).concat([d.value]),R={id:"artist",value:c(T)};this.setGenericTag("artificial",R)}break;case"picture":this.postFixPicture(d.value).then(T=>{T!==null&&(d.value=T,this.setGenericTag(f,d))});return;case"totaltracks":this.common.track.of=n.CommonTagMapper.toIntOrNull(d.value);return;case"totaldiscs":this.common.disk.of=n.CommonTagMapper.toIntOrNull(d.value);return;case"movementTotal":this.common.movementIndex.of=n.CommonTagMapper.toIntOrNull(d.value);return;case"track":case"disk":case"movementIndex":const b=this.common[d.id].of;this.common[d.id]=n.CommonTagMapper.normalizeTrack(d.value),this.common[d.id].of=b??this.common[d.id].of;return;case"bpm":case"year":case"originalyear":d.value=parseInt(d.value,10);break;case"date":const y=parseInt(d.value.substr(0,4),10);isNaN(y)||(this.common.year=y);break;case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":d.value=typeof d.value=="string"?parseInt(d.value,10):d.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":d.value=(0,a.toRatio)(d.value);break;case"replaygain_track_minmax":d.value=d.value.split(",").map(T=>parseInt(T,10));break;case"replaygain_undo":const w=d.value.split(",").map(T=>parseInt(T,10));d.value={leftChannel:w[0],rightChannel:w[1]};break;case"gapless":case"compilation":case"podcast":case"showMovement":d.value=d.value==="1"||d.value===1;break;case"isrc":if(this.common[d.id]&&this.common[d.id].indexOf(d.value)!==-1)return;break}d.value!==null&&this.setGenericTag(f,d)}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}async postFixPicture(f){if(f.data&&f.data.length>0){if(!f.format){const d=await o.fromBuffer(f.data);if(d)f.format=d.mime;else return null}switch(f.format=f.format.toLocaleLowerCase(),f.format){case"image/jpg":f.format="image/jpeg"}return f}return this.addWarning("Empty picture tag found"),null}toCommon(f,d,b){const y={id:d,value:b},w=this.tagMapper.mapTag(f,y,this);w&&this.postMap(f,w)}setGenericTag(f,d){s(`common.${d.id} = ${d.value}`);const b=this.commonOrigin[d.id]||1e3,y=this.originPriority[f];if((0,i.isSingleton)(d.id))if(y<=b)this.common[d.id]=d.value,this.commonOrigin[d.id]=y;else return s(`Ignore native tag (singleton): ${f}.${d.id} = ${d.value}`);else if(y===b)!(0,i.isUnique)(d.id)||this.common[d.id].indexOf(d.value)===-1?this.common[d.id].push(d.value):s(`Ignore duplicate value: ${f}.${d.id} = ${d.value}`);else if(y<b)this.common[d.id]=[d.value],this.commonOrigin[d.id]=y;else return s(`Ignore native tag (list): ${f}.${d.id} = ${d.value}`);this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:d.id,value:d.value}})}};MetadataCollector.MetadataCollector=u;function c(m){return m.length>2?m.slice(0,m.length-1).join(", ")+" & "+m[m.length-1]:m.join(" & ")}return MetadataCollector.joinArtists=c,MetadataCollector}var AiffParser={},ID3v2Parser={},FrameParser={},ID3v2Token={},hasRequiredID3v2Token;function requireID3v2Token(){return hasRequiredID3v2Token||(hasRequiredID3v2Token=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TextEncodingToken=e.ExtendedHeader=e.ID3v2Header=e.UINT32SYNCSAFE=e.AttachedPictureType=void 0;const t=requireLib$2(),i=requireUtil$1();(function(r){r[r.Other=0]="Other",r[r["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",r[r["Other file icon"]=2]="Other file icon",r[r["Cover (front)"]=3]="Cover (front)",r[r["Cover (back)"]=4]="Cover (back)",r[r["Leaflet page"]=5]="Leaflet page",r[r["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",r[r["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",r[r["Artist/performer"]=8]="Artist/performer",r[r.Conductor=9]="Conductor",r[r["Band/Orchestra"]=10]="Band/Orchestra",r[r.Composer=11]="Composer",r[r["Lyricist/text writer"]=12]="Lyricist/text writer",r[r["Recording Location"]=13]="Recording Location",r[r["During recording"]=14]="During recording",r[r["During performance"]=15]="During performance",r[r["Movie/video screen capture"]=16]="Movie/video screen capture",r[r["A bright coloured fish"]=17]="A bright coloured fish",r[r.Illustration=18]="Illustration",r[r["Band/artist logotype"]=19]="Band/artist logotype",r[r["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"})(e.AttachedPictureType||(e.AttachedPictureType={})),e.UINT32SYNCSAFE={get:(r,n)=>r[n+3]&127|r[n+2]<<7|r[n+1]<<14|r[n]<<21,len:4},e.ID3v2Header={len:10,get:(r,n)=>({fileIdentifier:new t.StringType(3,"ascii").get(r,n),version:{major:t.INT8.get(r,n+3),revision:t.INT8.get(r,n+4)},flags:{unsynchronisation:i.getBit(r,n+5,7),isExtendedHeader:i.getBit(r,n+5,6),expIndicator:i.getBit(r,n+5,5),footer:i.getBit(r,n+5,4)},size:e.UINT32SYNCSAFE.get(r,n+6)})},e.ExtendedHeader={len:10,get:(r,n)=>({size:t.UINT32_BE.get(r,n),extendedFlags:t.UINT16_BE.get(r,n+4),sizeOfPadding:t.UINT32_BE.get(r,n+6),crcDataPresent:i.getBit(r,n+4,31)})},e.TextEncodingToken={len:1,get:(r,n)=>{switch(r[n]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf16le",bom:!0};case 2:return{encoding:"utf16le",bom:!1};case 3:return{encoding:"utf8",bom:!1};default:return{encoding:"utf8",bom:!1}}}}})(ID3v2Token)),ID3v2Token}var ID3v1Parser={},BasicParser={},hasRequiredBasicParser;function requireBasicParser(){if(hasRequiredBasicParser)return BasicParser;hasRequiredBasicParser=1,Object.defineProperty(BasicParser,"__esModule",{value:!0}),BasicParser.BasicParser=void 0;let e=class{init(i,r,n){return this.metadata=i,this.tokenizer=r,this.options=n,this}};return BasicParser.BasicParser=e,BasicParser}var APEv2Parser={},APEv2Token={},FourCC={},hasRequiredFourCC;function requireFourCC(){return hasRequiredFourCC||(hasRequiredFourCC=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FourCcToken=void 0;const t=requireUtil$1(),i=/^[\x21-\x7e][\x20-\x7e\x00()]{3}/;e.FourCcToken={len:4,get:(r,n)=>{const a=r.toString("binary",n,n+e.FourCcToken.len);if(!a.match(i))throw new Error(`FourCC contains invalid characters: ${t.a2hex(a)} "${a}"`);return a},put:(r,n,a)=>{const o=Buffer.from(a,"binary");if(o.length!==4)throw new Error("Invalid length");return o.copy(r,n)}}})(FourCC)),FourCC}var hasRequiredAPEv2Token;function requireAPEv2Token(){return hasRequiredAPEv2Token||(hasRequiredAPEv2Token=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isBitSet=e.parseTagFlags=e.TagField=e.TagItemHeader=e.TagFooter=e.Header=e.DescriptorParser=e.DataType=void 0;const t=requireLib$2(),i=requireFourCC();(function(o){o[o.text_utf8=0]="text_utf8",o[o.binary=1]="binary",o[o.external_info=2]="external_info",o[o.reserved=3]="reserved"})(e.DataType||(e.DataType={})),e.DescriptorParser={len:52,get:(o,s)=>({ID:i.FourCcToken.get(o,s),version:t.UINT32_LE.get(o,s+4)/1e3,descriptorBytes:t.UINT32_LE.get(o,s+8),headerBytes:t.UINT32_LE.get(o,s+12),seekTableBytes:t.UINT32_LE.get(o,s+16),headerDataBytes:t.UINT32_LE.get(o,s+20),apeFrameDataBytes:t.UINT32_LE.get(o,s+24),apeFrameDataBytesHigh:t.UINT32_LE.get(o,s+28),terminatingDataBytes:t.UINT32_LE.get(o,s+32),fileMD5:new t.Uint8ArrayType(16).get(o,s+36)})},e.Header={len:24,get:(o,s)=>({compressionLevel:t.UINT16_LE.get(o,s),formatFlags:t.UINT16_LE.get(o,s+2),blocksPerFrame:t.UINT32_LE.get(o,s+4),finalFrameBlocks:t.UINT32_LE.get(o,s+8),totalFrames:t.UINT32_LE.get(o,s+12),bitsPerSample:t.UINT16_LE.get(o,s+16),channel:t.UINT16_LE.get(o,s+18),sampleRate:t.UINT32_LE.get(o,s+20)})},e.TagFooter={len:32,get:(o,s)=>({ID:new t.StringType(8,"ascii").get(o,s),version:t.UINT32_LE.get(o,s+8),size:t.UINT32_LE.get(o,s+12),fields:t.UINT32_LE.get(o,s+16),flags:n(t.UINT32_LE.get(o,s+20))})},e.TagItemHeader={len:8,get:(o,s)=>({size:t.UINT32_LE.get(o,s),flags:n(t.UINT32_LE.get(o,s+4))})};const r=o=>new t.Uint8ArrayType(o.size-e.TagFooter.len);e.TagField=r;function n(o){return{containsHeader:a(o,31),containsFooter:a(o,30),isHeader:a(o,31),readOnly:a(o,0),dataType:(o&6)>>1}}e.parseTagFlags=n;function a(o,s){return(o&1<<s)!==0}e.isBitSet=a})(APEv2Token)),APEv2Token}var hasRequiredAPEv2Parser;function requireAPEv2Parser(){if(hasRequiredAPEv2Parser)return APEv2Parser;hasRequiredAPEv2Parser=1,Object.defineProperty(APEv2Parser,"__esModule",{value:!0}),APEv2Parser.APEv2Parser=void 0;const e=requireBrowser$3(),t=requireCore$2(),i=requireLib$2(),r=requireUtil$1(),n=requireBasicParser(),a=requireAPEv2Token(),o=(0,e.default)("music-metadata:parser:APEv2"),s="APEv2",l="APETAGEX";let u=class Oe extends n.BasicParser{constructor(){super(...arguments),this.ape={}}static tryParseApeHeader(m,f,d){const b=new Oe;return b.init(m,f,d),b.tryParseApeHeader()}static calculateDuration(m){let f=m.totalFrames>1?m.blocksPerFrame*(m.totalFrames-1):0;return f+=m.finalFrameBlocks,f/m.sampleRate}static async findApeFooterOffset(m,f){const d=Buffer.alloc(a.TagFooter.len);await m.randomRead(d,0,a.TagFooter.len,f-a.TagFooter.len);const b=a.TagFooter.get(d,0);if(b.ID==="APETAGEX")return o(`APE footer header at offset=${f}`),{footer:b,offset:f-b.size}}static parseTagFooter(m,f,d){const b=a.TagFooter.get(f,f.length-a.TagFooter.len);if(b.ID!==l)throw new Error("Unexpected APEv2 Footer ID preamble value.");t.fromBuffer(f);const y=new Oe;return y.init(m,t.fromBuffer(f),d),y.parseTags(b)}async tryParseApeHeader(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<a.TagFooter.len){o("No APEv2 header found, end-of-file reached");return}const m=await this.tokenizer.peekToken(a.TagFooter);if(m.ID===l)return await this.tokenizer.ignore(a.TagFooter.len),this.parseTags(m);if(o(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){const f=this.tokenizer.fileInfo.size-this.tokenizer.position,d=Buffer.alloc(f);return await this.tokenizer.readBuffer(d),Oe.parseTagFooter(this.metadata,d,this.options)}}async parse(){const m=await this.tokenizer.readToken(a.DescriptorParser);if(m.ID!=="MAC ")throw new Error("Unexpected descriptor ID");this.ape.descriptor=m;const f=m.descriptorBytes-a.DescriptorParser.len,d=await(f>0?this.parseDescriptorExpansion(f):this.parseHeader());return await this.tokenizer.ignore(d.forwardBytes),this.tryParseApeHeader()}async parseTags(m){const f=Buffer.alloc(256);let d=m.size-a.TagFooter.len;o(`Parse APE tags at offset=${this.tokenizer.position}, size=${d}`);for(let b=0;b<m.fields;b++){if(d<a.TagItemHeader.len){this.metadata.addWarning(`APEv2 Tag-header: ${m.fields-b} items remaining, but no more tag data to read.`);break}const y=await this.tokenizer.readToken(a.TagItemHeader);d-=a.TagItemHeader.len+y.size,await this.tokenizer.peekBuffer(f,{length:Math.min(f.length,d)});let w=r.findZero(f,0,f.length);const T=await this.tokenizer.readToken(new i.StringType(w,"ascii"));switch(await this.tokenizer.ignore(1),d-=T.length+1,y.flags.dataType){case a.DataType.text_utf8:{const R=(await this.tokenizer.readToken(new i.StringType(y.size,"utf8"))).split(/\x00/g);for(const C of R)this.metadata.addTag(s,T,C);break}case a.DataType.binary:if(this.options.skipCovers)await this.tokenizer.ignore(y.size);else{const E=Buffer.alloc(y.size);await this.tokenizer.readBuffer(E),w=r.findZero(E,0,E.length);const R=E.toString("utf8",0,w),C=Buffer.from(E.slice(w+1));this.metadata.addTag(s,T,{description:R,data:C})}break;case a.DataType.external_info:o(`Ignore external info ${T}`),await this.tokenizer.ignore(y.size);break;case a.DataType.reserved:o(`Ignore external info ${T}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${T}"`),await this.tokenizer.ignore(y.size);break}}}async parseDescriptorExpansion(m){return await this.tokenizer.ignore(m),this.parseHeader()}async parseHeader(){const m=await this.tokenizer.readToken(a.Header);return this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",m.bitsPerSample),this.metadata.setFormat("sampleRate",m.sampleRate),this.metadata.setFormat("numberOfChannels",m.channel),this.metadata.setFormat("duration",Oe.calculateDuration(m)),{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}}};return APEv2Parser.APEv2Parser=u,APEv2Parser}var hasRequiredID3v1Parser;function requireID3v1Parser(){return hasRequiredID3v1Parser||(hasRequiredID3v1Parser=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasID3v1Header=e.ID3v1Parser=e.Genres=void 0;const t=requireBrowser$3(),i=requireLib$2(),r=requireUtil$1(),n=requireBasicParser(),a=requireAPEv2Parser(),o=(0,t.default)("music-metadata:parser:ID3v1");e.Genres=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"];const s={len:128,get:(m,f)=>{const d=new l(3).get(m,f);return d==="TAG"?{header:d,title:new l(30).get(m,f+3),artist:new l(30).get(m,f+33),album:new l(30).get(m,f+63),year:new l(4).get(m,f+93),comment:new l(28).get(m,f+97),zeroByte:i.UINT8.get(m,f+127),track:i.UINT8.get(m,f+126),genre:i.UINT8.get(m,f+127)}:null}};class l extends i.StringType{constructor(f){super(f,"binary")}get(f,d){let b=super.get(f,d);return b=r.trimRightNull(b),b=b.trim(),b.length>0?b:void 0}}class u extends n.BasicParser{static getGenre(f){if(f<e.Genres.length)return e.Genres[f]}async parse(){if(!this.tokenizer.fileInfo.size){o("Skip checking for ID3v1 because the file-size is unknown");return}if(this.options.apeHeader){this.tokenizer.ignore(this.options.apeHeader.offset-this.tokenizer.position);const b=new a.APEv2Parser;b.init(this.metadata,this.tokenizer,this.options),await b.parseTags(this.options.apeHeader.footer)}const f=this.tokenizer.fileInfo.size-s.len;if(this.tokenizer.position>f){o("Already consumed the last 128 bytes");return}const d=await this.tokenizer.readToken(s,f);if(d){o("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-s.len);for(const y of["title","artist","album","comment","track","year"])d[y]&&d[y]!==""&&this.addTag(y,d[y]);const b=u.getGenre(d.genre);b&&this.addTag("genre",b)}else o("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-s.len)}addTag(f,d){this.metadata.addTag("ID3v1",f,d)}}e.ID3v1Parser=u;async function c(m){if(m.fileSize>=128){const f=Buffer.alloc(3);return await m.randomRead(f,0,f.length,m.fileSize-128),f.toString("binary")==="TAG"}return!1}e.hasID3v1Header=c})(ID3v1Parser)),ID3v1Parser}var hasRequiredFrameParser;function requireFrameParser(){if(hasRequiredFrameParser)return FrameParser;hasRequiredFrameParser=1,Object.defineProperty(FrameParser,"__esModule",{value:!0}),FrameParser.FrameParser=FrameParser.parseGenre=void 0;const e=requireBrowser$3(),t=requireLib$2(),i=requireUtil$1(),r=requireID3v2Token(),n=requireID3v1Parser(),a=(0,e.default)("music-metadata:id3v2:frame-parser"),o="latin1";function s(c){const m=[];let f,d="";for(const b of c)if(typeof f=="string")if(b==="("&&f==="")d+="(",f=void 0;else if(b===")"){d!==""&&(m.push(d),d="");const y=l(f);y&&m.push(y),f=void 0}else f+=b;else b==="("?f="":d+=b;return d&&(m.length===0&&d.match(/^\d*$/)&&(d=n.Genres[d]),m.push(d)),m}FrameParser.parseGenre=s;function l(c){if(c==="RX")return"Remix";if(c==="CR")return"Cover";if(c.match(/^\d*$/))return n.Genres[c]}let u=class Pe{constructor(m,f){this.major=m,this.warningCollector=f}readData(m,f,d){if(m.length===0){this.warningCollector.addWarning(`id3v2.${this.major} header has empty tag type=${f}`);return}const{encoding:b,bom:y}=r.TextEncodingToken.get(m,0),w=m.length;let T=0,E=[];const R=Pe.getNullTerminatorLength(b);let C;const B={};switch(a(`Parsing tag type=${f}, encoding=${b}, bom=${y}`),f!=="TXXX"&&f[0]==="T"?"T*":f){case"T*":case"IPLS":case"MVIN":case"MVNM":case"PCS":case"PCST":let D;try{D=i.decodeString(m.slice(1),b).replace(/\x00+$/,"")}catch(ee){this.warningCollector.addWarning(`id3v2.${this.major} type=${f} header has invalid string value: ${ee.message}`)}switch(f){case"TMCL":case"TIPL":case"IPLS":E=this.splitValue(f,D),E=Pe.functionList(E);break;case"TRK":case"TRCK":case"TPOS":E=D;break;case"TCOM":case"TEXT":case"TOLY":case"TOPE":case"TPE1":case"TSRC":E=this.splitValue(f,D);break;case"TCO":case"TCON":E=this.splitValue(f,D).map(ee=>s(ee)).reduce((ee,N)=>ee.concat(N),[]);break;case"PCS":case"PCST":E=this.major>=4?this.splitValue(f,D):[D],E=Array.isArray(E)&&E[0]===""?1:0;break;default:E=this.major>=4?this.splitValue(f,D):[D]}break;case"TXXX":E=Pe.readIdentifierAndData(m,T+1,w,b),E={description:E.id,text:this.splitValue(f,i.decodeString(E.data,b).replace(/\x00+$/,""))};break;case"PIC":case"APIC":if(d){const ee={};switch(T+=1,this.major){case 2:ee.format=i.decodeString(m.slice(T,T+3),"latin1"),T+=3;break;case 3:case 4:C=i.findZero(m,T,w,o),ee.format=i.decodeString(m.slice(T,C),o),T=C+1;break;default:throw new Error("Warning: unexpected major versionIndex: "+this.major)}ee.format=Pe.fixPictureMimeType(ee.format),ee.type=r.AttachedPictureType[m[T]],T+=1,C=i.findZero(m,T,w,b),ee.description=i.decodeString(m.slice(T,C),b),T=C+R,ee.data=Buffer.from(m.slice(T,w)),E=ee}break;case"CNT":case"PCNT":E=t.UINT32_BE.get(m,0);break;case"SYLT":for(T+=7,E=[];T<w;){const ee=m.slice(T,T=i.findZero(m,T,w,b));T+=5,E.push(i.decodeString(ee,b))}break;case"ULT":case"USLT":case"COM":case"COMM":T+=1,B.language=i.decodeString(m.slice(T,T+3),o),T+=3,C=i.findZero(m,T,w,b),B.description=i.decodeString(m.slice(T,C),b),T=C+R,B.text=i.decodeString(m.slice(T,w),b).replace(/\x00+$/,""),E=[B];break;case"UFID":E=Pe.readIdentifierAndData(m,T,w,o),E={owner_identifier:E.id,identifier:E.data};break;case"PRIV":E=Pe.readIdentifierAndData(m,T,w,o),E={owner_identifier:E.id,data:E.data};break;case"POPM":C=i.findZero(m,T,w,o);const _=i.decodeString(m.slice(T,C),o);T=C+1;const x=w-T;E={email:_,rating:t.UINT8.get(m,T),counter:x>=5?t.UINT32_BE.get(m,T+1):void 0};break;case"GEOB":{C=i.findZero(m,T+1,w,b);const ee=i.decodeString(m.slice(T+1,C),o);T=C+1,C=i.findZero(m,T,w-T,b);const N=i.decodeString(m.slice(T,C),o);T=C+1,C=i.findZero(m,T,w-T,b);const U=i.decodeString(m.slice(T,C),o);E={type:ee,filename:N,description:U,data:m.slice(T+1,w)};break}case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":E=i.decodeString(m.slice(T,C),o);break;case"WXXX":{C=i.findZero(m,T+1,w,b);const ee=i.decodeString(m.slice(T+1,C),b);T=C+(b==="utf16le"?2:1),E={description:ee,url:i.decodeString(m.slice(T,w),o)};break}case"WFD":case"WFED":E=i.decodeString(m.slice(T+1,i.findZero(m,T+1,w,b)),b);break;case"MCDI":{E=m.slice(0,w);break}default:a("Warning: unsupported id3v2-tag-type: "+f);break}return E}static fixPictureMimeType(m){switch(m=m.toLocaleLowerCase(),m){case"jpg":return"image/jpeg";case"png":return"image/png"}return m}static functionList(m){const f={};for(let d=0;d+1<m.length;d+=2){const b=m[d+1].split(",");f[m[d]]=f.hasOwnProperty(m[d])?f[m[d]].concat(b):b}return f}splitValue(m,f){let d;return this.major<4?(d=f.split(/\x00/g),d.length>1?this.warningCollector.addWarning(`ID3v2.${this.major} ${m} uses non standard null-separator.`):d=f.split(/\//g)):d=f.split(/\x00/g),Pe.trimArray(d)}static trimArray(m){return m.map(f=>f.replace(/\x00+$/,"").trim())}static readIdentifierAndData(m,f,d,b){const y=i.findZero(m,f,d,b),w=i.decodeString(m.slice(f,y),b);return f=y+Pe.getNullTerminatorLength(b),{id:w,data:m.slice(f,d)}}static getNullTerminatorLength(m){return m==="utf16le"?2:1}};return FrameParser.FrameParser=u,FrameParser}var hasRequiredID3v2Parser;function requireID3v2Parser(){if(hasRequiredID3v2Parser)return ID3v2Parser;hasRequiredID3v2Parser=1,Object.defineProperty(ID3v2Parser,"__esModule",{value:!0}),ID3v2Parser.ID3v2Parser=void 0;const e=requireLib$2(),t=requireUtil$1(),i=requireFrameParser(),r=requireID3v2Token();let n=class Me{static removeUnsyncBytes(o){let s=0,l=0;for(;s<o.length-1;)s!==l&&(o[l]=o[s]),s+=o[s]===255&&o[s+1]===0?2:1,l++;return s<o.length&&(o[l++]=o[s]),o.slice(0,l)}static getFrameHeaderLength(o){switch(o){case 2:return 6;case 3:case 4:return 10;default:throw new Error("header versionIndex is incorrect")}}static readFrameFlags(o){return{status:{tag_alter_preservation:t.getBit(o,0,6),file_alter_preservation:t.getBit(o,0,5),read_only:t.getBit(o,0,4)},format:{grouping_identity:t.getBit(o,1,7),compression:t.getBit(o,1,3),encryption:t.getBit(o,1,2),unsynchronisation:t.getBit(o,1,1),data_length_indicator:t.getBit(o,1,0)}}}static readFrameData(o,s,l,u,c){const m=new i.FrameParser(l,c);switch(l){case 2:return m.readData(o,s.id,u);case 3:case 4:return s.flags.format.unsynchronisation&&(o=Me.removeUnsyncBytes(o)),s.flags.format.data_length_indicator&&(o=o.slice(4,o.length)),m.readData(o,s.id,u);default:throw new Error("Unexpected majorVer: "+l)}}static makeDescriptionTagName(o,s){return o+(s?":"+s:"")}async parse(o,s,l){this.tokenizer=s,this.metadata=o,this.options=l;const u=await this.tokenizer.readToken(r.ID3v2Header);if(u.fileIdentifier!=="ID3")throw new Error("expected ID3-header file-identifier 'ID3' was not found");return this.id3Header=u,this.headerType="ID3v2."+u.version.major,u.flags.isExtendedHeader?this.parseExtendedHeader():this.parseId3Data(u.size)}async parseExtendedHeader(){const o=await this.tokenizer.readToken(r.ExtendedHeader),s=o.size-r.ExtendedHeader.len;return s>0?this.parseExtendedHeaderData(s,o.size):this.parseId3Data(this.id3Header.size-o.size)}async parseExtendedHeaderData(o,s){return await this.tokenizer.ignore(o),this.parseId3Data(this.id3Header.size-s)}async parseId3Data(o){const s=await this.tokenizer.readToken(new e.Uint8ArrayType(o));for(const l of this.parseMetadata(s))if(l.id==="TXXX"){if(l.value)for(const u of l.value.text)this.addTag(Me.makeDescriptionTagName(l.id,l.value.description),u)}else if(l.id==="COM")for(const u of l.value)this.addTag(Me.makeDescriptionTagName(l.id,u.description),u.text);else if(l.id==="COMM")for(const u of l.value)this.addTag(Me.makeDescriptionTagName(l.id,u.description),u);else if(Array.isArray(l.value))for(const u of l.value)this.addTag(l.id,u);else this.addTag(l.id,l.value)}addTag(o,s){this.metadata.addTag(this.headerType,o,s)}parseMetadata(o){let s=0;const l=[];for(;s!==o.length;){const u=Me.getFrameHeaderLength(this.id3Header.version.major);if(s+u>o.length){this.metadata.addWarning("Illegal ID3v2 tag length");break}const c=o.slice(s,s+=u),m=this.readFrameHeader(c,this.id3Header.version.major),f=o.slice(s,s+=m.length),d=Me.readFrameData(f,m,this.id3Header.version.major,!this.options.skipCovers,this.metadata);d&&l.push({id:m.id,value:d})}return l}readFrameHeader(o,s){let l;switch(s){case 2:l={id:Buffer.from(o.slice(0,3)).toString("ascii"),length:e.UINT24_BE.get(o,3)},l.id.match(/[A-Z0-9]{3}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${l.id}`);break;case 3:case 4:l={id:Buffer.from(o.slice(0,4)).toString("ascii"),length:(s===4?r.UINT32SYNCSAFE:e.UINT32_BE).get(o,4),flags:Me.readFrameFlags(o.slice(8,10))},l.id.match(/[A-Z0-9]{4}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${l.id}`);break;default:throw new Error("Unexpected majorVer: "+s)}return l}};return ID3v2Parser.ID3v2Parser=n,ID3v2Parser}var AiffToken={},hasRequiredAiffToken;function requireAiffToken(){if(hasRequiredAiffToken)return AiffToken;hasRequiredAiffToken=1,Object.defineProperty(AiffToken,"__esModule",{value:!0}),AiffToken.Common=void 0;const e=requireLib$2(),t=requireFourCC();class i{constructor(n,a){this.isAifc=a;const o=a?22:18;if(n.chunkSize<o)throw new Error(`COMMON CHUNK size should always be at least ${o}`);this.len=n.chunkSize}get(n,a){const o=n.readUInt16BE(a+8)-16398,s=n.readUInt16BE(a+8+2),l={numChannels:n.readUInt16BE(a),numSampleFrames:n.readUInt32BE(a+2),sampleSize:n.readUInt16BE(a+6),sampleRate:o<0?s>>Math.abs(o):s<<o};if(this.isAifc){if(l.compressionType=t.FourCcToken.get(n,a+18),this.len>22){const u=n.readInt8(a+22);if(u>0){const c=(u+1)%2;if(23+u+c===this.len)l.compressionName=new e.StringType(u,"binary").get(n,a+23);else throw new Error("Illegal pstring length")}else l.compressionName=void 0}}else l.compressionName="PCM";return l}}return AiffToken.Common=i,AiffToken}var iff={},hasRequiredIff;function requireIff(){if(hasRequiredIff)return iff;hasRequiredIff=1,Object.defineProperty(iff,"__esModule",{value:!0}),iff.Header=void 0;const e=requireLib$2(),t=requireFourCC();return iff.Header={len:8,get:(i,r)=>({chunkID:t.FourCcToken.get(i,r),chunkSize:Number(BigInt(e.UINT32_BE.get(i,r+4)))})},iff}var hasRequiredAiffParser;function requireAiffParser(){if(hasRequiredAiffParser)return AiffParser;hasRequiredAiffParser=1,Object.defineProperty(AiffParser,"__esModule",{value:!0}),AiffParser.AIFFParser=void 0;const e=requireLib$2(),t=requireBrowser$3(),i=requireCore$2(),r=requireID3v2Parser(),n=requireFourCC(),a=requireBasicParser(),o=requireAiffToken(),s=requireIff(),l=(0,t.default)("music-metadata:parser:aiff"),u={NONE:"not compressed	PCM	Apple Computer",sowt:"PCM (byte swapped)",fl32:"32-bit floating point IEEE 32-bit float",fl64:"64-bit floating point IEEE 64-bit float	Apple Computer",alaw:"ALaw 2:1	8-bit ITU-T G.711 A-law",ulaw:"Law 2:1	8-bit ITU-T G.711 -law	Apple Computer",ULAW:"CCITT G.711 u-law 8-bit ITU-T G.711 -law",ALAW:"CCITT G.711 A-law 8-bit ITU-T G.711 A-law",FL32:"Float 32	IEEE 32-bit float "};class c extends a.BasicParser{async parse(){if((await this.tokenizer.readToken(s.Header)).chunkID!=="FORM")throw new Error("Invalid Chunk-ID, expected 'FORM'");const d=await this.tokenizer.readToken(n.FourCcToken);switch(d){case"AIFF":this.metadata.setFormat("container",d),this.isCompressed=!1;break;case"AIFC":this.metadata.setFormat("container","AIFF-C"),this.isCompressed=!0;break;default:throw Error("Unsupported AIFF type: "+d)}this.metadata.setFormat("lossless",!this.isCompressed);try{for(;!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=s.Header.len;){l("Reading AIFF chunk at offset="+this.tokenizer.position);const b=await this.tokenizer.readToken(s.Header),y=2*Math.round(b.chunkSize/2),w=await this.readData(b);await this.tokenizer.ignore(y-w)}}catch(b){if(b instanceof i.EndOfStreamError)l("End-of-stream");else throw b}}async readData(f){var d;switch(f.chunkID){case"COMM":const b=await this.tokenizer.readToken(new o.Common(f,this.isCompressed));return this.metadata.setFormat("bitsPerSample",b.sampleSize),this.metadata.setFormat("sampleRate",b.sampleRate),this.metadata.setFormat("numberOfChannels",b.numChannels),this.metadata.setFormat("numberOfSamples",b.numSampleFrames),this.metadata.setFormat("duration",b.numSampleFrames/b.sampleRate),this.metadata.setFormat("codec",(d=b.compressionName)!==null&&d!==void 0?d:u[b.compressionType]),f.chunkSize;case"ID3 ":const y=await this.tokenizer.readToken(new e.Uint8ArrayType(f.chunkSize)),w=i.fromBuffer(y);return await new r.ID3v2Parser().parse(this.metadata,w,this.options),f.chunkSize;case"SSND":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*f.chunkSize/this.metadata.format.duration),0;case"NAME":case"AUTH":case"(c) ":case"ANNO":return this.readTextChunk(f);default:return l(`Ignore chunk id=${f.chunkID}, size=${f.chunkSize}`),0}}async readTextChunk(f){return(await this.tokenizer.readToken(new e.StringType(f.chunkSize,"ascii"))).split("\0").map(b=>b.trim()).filter(b=>b&&b.length>0).forEach(b=>{this.metadata.addTag("AIFF",f.chunkID,b.trim())}),f.chunkSize}}return AiffParser.AIFFParser=c,AiffParser}var AsfParser={},GUID={},hasRequiredGUID;function requireGUID(){if(hasRequiredGUID)return GUID;hasRequiredGUID=1,Object.defineProperty(GUID,"__esModule",{value:!0});let e=class Ce{static fromBin(i,r=0){return new Ce(this.decode(i,r))}static decode(i,r=0){return(i.readUInt32LE(r).toString(16)+"-"+i.readUInt16LE(r+4).toString(16)+"-"+i.readUInt16LE(r+6).toString(16)+"-"+i.readUInt16BE(r+8).toString(16)+"-"+i.slice(r+10,r+16).toString("hex")).toUpperCase()}static decodeMediaType(i){switch(i.str){case Ce.AudioMedia.str:return"audio";case Ce.VideoMedia.str:return"video";case Ce.CommandMedia.str:return"command";case Ce.Degradable_JPEG_Media.str:return"degradable-jpeg";case Ce.FileTransferMedia.str:return"file-transfer";case Ce.BinaryMedia.str:return"binary"}}static encode(i){const r=Buffer.alloc(16);return r.writeUInt32LE(parseInt(i.slice(0,8),16),0),r.writeUInt16LE(parseInt(i.slice(9,13),16),4),r.writeUInt16LE(parseInt(i.slice(14,18),16),6),Buffer.from(i.slice(19,23),"hex").copy(r,8),Buffer.from(i.slice(24),"hex").copy(r,10),r}constructor(i){this.str=i}equals(i){return this.str===i.str}toBin(){return Ce.encode(this.str)}};return e.HeaderObject=new e("75B22630-668E-11CF-A6D9-00AA0062CE6C"),e.DataObject=new e("75B22636-668E-11CF-A6D9-00AA0062CE6C"),e.SimpleIndexObject=new e("33000890-E5B1-11CF-89F4-00A0C90349CB"),e.IndexObject=new e("D6E229D3-35DA-11D1-9034-00A0C90349BE"),e.MediaObjectIndexObject=new e("FEB103F8-12AD-4C64-840F-2A1D2F7AD48C"),e.TimecodeIndexObject=new e("3CB73FD0-0C4A-4803-953D-EDF7B6228F0C"),e.FilePropertiesObject=new e("8CABDCA1-A947-11CF-8EE4-00C00C205365"),e.StreamPropertiesObject=new e("B7DC0791-A9B7-11CF-8EE6-00C00C205365"),e.HeaderExtensionObject=new e("5FBF03B5-A92E-11CF-8EE3-00C00C205365"),e.CodecListObject=new e("86D15240-311D-11D0-A3A4-00A0C90348F6"),e.ScriptCommandObject=new e("1EFB1A30-0B62-11D0-A39B-00A0C90348F6"),e.MarkerObject=new e("F487CD01-A951-11CF-8EE6-00C00C205365"),e.BitrateMutualExclusionObject=new e("D6E229DC-35DA-11D1-9034-00A0C90349BE"),e.ErrorCorrectionObject=new e("75B22635-668E-11CF-A6D9-00AA0062CE6C"),e.ContentDescriptionObject=new e("75B22633-668E-11CF-A6D9-00AA0062CE6C"),e.ExtendedContentDescriptionObject=new e("D2D0A440-E307-11D2-97F0-00A0C95EA850"),e.ContentBrandingObject=new e("2211B3FA-BD23-11D2-B4B7-00A0C955FC6E"),e.StreamBitratePropertiesObject=new e("7BF875CE-468D-11D1-8D82-006097C9A2B2"),e.ContentEncryptionObject=new e("2211B3FB-BD23-11D2-B4B7-00A0C955FC6E"),e.ExtendedContentEncryptionObject=new e("298AE614-2622-4C17-B935-DAE07EE9289C"),e.DigitalSignatureObject=new e("2211B3FC-BD23-11D2-B4B7-00A0C955FC6E"),e.PaddingObject=new e("1806D474-CADF-4509-A4BA-9AABCB96AAE8"),e.ExtendedStreamPropertiesObject=new e("14E6A5CB-C672-4332-8399-A96952065B5A"),e.AdvancedMutualExclusionObject=new e("A08649CF-4775-4670-8A16-6E35357566CD"),e.GroupMutualExclusionObject=new e("D1465A40-5A79-4338-B71B-E36B8FD6C249"),e.StreamPrioritizationObject=new e("D4FED15B-88D3-454F-81F0-ED5C45999E24"),e.BandwidthSharingObject=new e("A69609E6-517B-11D2-B6AF-00C04FD908E9"),e.LanguageListObject=new e("7C4346A9-EFE0-4BFC-B229-393EDE415C85"),e.MetadataObject=new e("C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA"),e.MetadataLibraryObject=new e("44231C94-9498-49D1-A141-1D134E457054"),e.IndexParametersObject=new e("D6E229DF-35DA-11D1-9034-00A0C90349BE"),e.MediaObjectIndexParametersObject=new e("6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7"),e.TimecodeIndexParametersObject=new e("F55E496D-9797-4B5D-8C8B-604DFE9BFB24"),e.CompatibilityObject=new e("26F18B5D-4584-47EC-9F5F-0E651F0452C9"),e.AdvancedContentEncryptionObject=new e("43058533-6981-49E6-9B74-AD12CB86D58C"),e.AudioMedia=new e("F8699E40-5B4D-11CF-A8FD-00805F5C442B"),e.VideoMedia=new e("BC19EFC0-5B4D-11CF-A8FD-00805F5C442B"),e.CommandMedia=new e("59DACFC0-59E6-11D0-A3AC-00A0C90348F6"),e.JFIF_Media=new e("B61BE100-5B4E-11CF-A8FD-00805F5C442B"),e.Degradable_JPEG_Media=new e("35907DE0-E415-11CF-A917-00805F5C442B"),e.FileTransferMedia=new e("91BD222C-F21C-497A-8B6D-5AA86BFC0185"),e.BinaryMedia=new e("3AFB65E2-47EF-40F2-AC2C-70A90D71D343"),e.ASF_Index_Placeholder_Object=new e("D9AADE20-7C17-4F9C-BC28-8555DD98E2A2"),GUID.default=e,GUID}var AsfObject={},AsfUtil={},hasRequiredAsfUtil;function requireAsfUtil(){if(hasRequiredAsfUtil)return AsfUtil;hasRequiredAsfUtil=1,Object.defineProperty(AsfUtil,"__esModule",{value:!0}),AsfUtil.AsfUtil=void 0;const e=requireLib$2(),t=requireUtil$1();let i=class He{static getParserForAttr(n){return He.attributeParsers[n]}static parseUnicodeAttr(n){return t.stripNulls(t.decodeString(n,"utf16le"))}static parseByteArrayAttr(n){return Buffer.from(n)}static parseBoolAttr(n,a=0){return He.parseWordAttr(n,a)===1}static parseDWordAttr(n,a=0){return n.readUInt32LE(a)}static parseQWordAttr(n,a=0){return e.UINT64_LE.get(n,a)}static parseWordAttr(n,a=0){return n.readUInt16LE(a)}};return i.attributeParsers=[i.parseUnicodeAttr,i.parseByteArrayAttr,i.parseBoolAttr,i.parseDWordAttr,i.parseQWordAttr,i.parseWordAttr,i.parseByteArrayAttr],AsfUtil.AsfUtil=i,AsfUtil}var hasRequiredAsfObject;function requireAsfObject(){return hasRequiredAsfObject||(hasRequiredAsfObject=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WmPictureToken=e.MetadataLibraryObjectState=e.MetadataObjectState=e.ExtendedStreamPropertiesObjectState=e.ExtendedContentDescriptionObjectState=e.ContentDescriptionObjectState=e.readCodecEntries=e.HeaderExtensionObject=e.StreamPropertiesObject=e.FilePropertiesObject=e.IgnoreObjectState=e.State=e.HeaderObjectToken=e.TopLevelHeaderObjectToken=e.DataType=void 0;const t=requireUtil$1(),i=requireLib$2(),r=requireGUID(),n=requireAsfUtil(),a=requireID3v2Token();(function(D){D[D.UnicodeString=0]="UnicodeString",D[D.ByteArray=1]="ByteArray",D[D.Bool=2]="Bool",D[D.DWord=3]="DWord",D[D.QWord=4]="QWord",D[D.Word=5]="Word"})(e.DataType||(e.DataType={})),e.TopLevelHeaderObjectToken={len:30,get:(D,_)=>({objectId:r.default.fromBin(new i.BufferType(16).get(D,_)),objectSize:Number(i.UINT64_LE.get(D,_+16)),numberOfHeaderObjects:i.UINT32_LE.get(D,_+24)})},e.HeaderObjectToken={len:24,get:(D,_)=>({objectId:r.default.fromBin(new i.BufferType(16).get(D,_)),objectSize:Number(i.UINT64_LE.get(D,_+16))})};class o{constructor(_){this.len=Number(_.objectSize)-e.HeaderObjectToken.len}postProcessTag(_,x,ee,N){if(x==="WM/Picture")_.push({id:x,value:B.fromBuffer(N)});else{const U=n.AsfUtil.getParserForAttr(ee);if(!U)throw new Error("unexpected value headerType: "+ee);_.push({id:x,value:U(N)})}}}e.State=o;class s extends o{constructor(_){super(_)}get(_,x){return null}}e.IgnoreObjectState=s;class l extends o{constructor(_){super(_)}get(_,x){return{fileId:r.default.fromBin(_,x),fileSize:i.UINT64_LE.get(_,x+16),creationDate:i.UINT64_LE.get(_,x+24),dataPacketsCount:i.UINT64_LE.get(_,x+32),playDuration:i.UINT64_LE.get(_,x+40),sendDuration:i.UINT64_LE.get(_,x+48),preroll:i.UINT64_LE.get(_,x+56),flags:{broadcast:t.getBit(_,x+64,24),seekable:t.getBit(_,x+64,25)},minimumDataPacketSize:i.UINT32_LE.get(_,x+68),maximumDataPacketSize:i.UINT32_LE.get(_,x+72),maximumBitrate:i.UINT32_LE.get(_,x+76)}}}l.guid=r.default.FilePropertiesObject,e.FilePropertiesObject=l;class u extends o{constructor(_){super(_)}get(_,x){return{streamType:r.default.decodeMediaType(r.default.fromBin(_,x)),errorCorrectionType:r.default.fromBin(_,x+8)}}}u.guid=r.default.StreamPropertiesObject,e.StreamPropertiesObject=u;class c{constructor(){this.len=22}get(_,x){return{reserved1:r.default.fromBin(_,x),reserved2:_.readUInt16LE(x+16),extensionDataSize:_.readUInt32LE(x+18)}}}c.guid=r.default.HeaderExtensionObject,e.HeaderExtensionObject=c;const m={len:20,get:(D,_)=>({entryCount:D.readUInt16LE(_+16)})};async function f(D){const _=await D.readNumber(i.UINT16_LE);return(await D.readToken(new i.StringType(_*2,"utf16le"))).replace("\0","")}async function d(D){const _=await D.readToken(m),x=[];for(let ee=0;ee<_.entryCount;++ee)x.push(await y(D));return x}e.readCodecEntries=d;async function b(D){const _=await D.readNumber(i.UINT16_LE),x=Buffer.alloc(_);return await D.readBuffer(x),x}async function y(D){const _=await D.readNumber(i.UINT16_LE);return{type:{videoCodec:(_&1)===1,audioCodec:(_&2)===2},codecName:await f(D),description:await f(D),information:await b(D)}}class w extends o{constructor(_){super(_)}get(_,x){const ee=[];let N=x+10;for(let U=0;U<w.contentDescTags.length;++U){const Z=_.readUInt16LE(x+U*2);if(Z>0){const H=w.contentDescTags[U],se=N+Z;ee.push({id:H,value:n.AsfUtil.parseUnicodeAttr(_.slice(N,se))}),N=se}}return ee}}w.guid=r.default.ContentDescriptionObject,w.contentDescTags=["Title","Author","Copyright","Description","Rating"],e.ContentDescriptionObjectState=w;class T extends o{constructor(_){super(_)}get(_,x){const ee=[],N=_.readUInt16LE(x);let U=x+2;for(let Z=0;Z<N;Z+=1){const H=_.readUInt16LE(U);U+=2;const se=n.AsfUtil.parseUnicodeAttr(_.slice(U,U+H));U+=H;const fe=_.readUInt16LE(U);U+=2;const le=_.readUInt16LE(U);U+=2;const ge=_.slice(U,U+le);U+=le,this.postProcessTag(ee,se,fe,ge)}return ee}}T.guid=r.default.ExtendedContentDescriptionObject,e.ExtendedContentDescriptionObjectState=T;class E extends o{constructor(_){super(_)}get(_,x){return{startTime:i.UINT64_LE.get(_,x),endTime:i.UINT64_LE.get(_,x+8),dataBitrate:_.readInt32LE(x+12),bufferSize:_.readInt32LE(x+16),initialBufferFullness:_.readInt32LE(x+20),alternateDataBitrate:_.readInt32LE(x+24),alternateBufferSize:_.readInt32LE(x+28),alternateInitialBufferFullness:_.readInt32LE(x+32),maximumObjectSize:_.readInt32LE(x+36),flags:{reliableFlag:t.getBit(_,x+40,0),seekableFlag:t.getBit(_,x+40,1),resendLiveCleanpointsFlag:t.getBit(_,x+40,2)},streamNumber:_.readInt16LE(x+42),streamLanguageId:_.readInt16LE(x+44),averageTimePerFrame:_.readInt32LE(x+52),streamNameCount:_.readInt32LE(x+54),payloadExtensionSystems:_.readInt32LE(x+56),streamNames:[],streamPropertiesObject:null}}}E.guid=r.default.ExtendedStreamPropertiesObject,e.ExtendedStreamPropertiesObjectState=E;class R extends o{constructor(_){super(_)}get(_,x){const ee=[],N=Buffer.from(_),U=N.readUInt16LE(x);let Z=x+2;for(let H=0;H<U;H+=1){Z+=4;const se=N.readUInt16LE(Z);Z+=2;const fe=N.readUInt16LE(Z);Z+=2;const le=N.readUInt32LE(Z);Z+=4;const ge=n.AsfUtil.parseUnicodeAttr(N.slice(Z,Z+se));Z+=se;const Y=N.slice(Z,Z+le);Z+=le,this.postProcessTag(ee,ge,fe,Y)}return ee}}R.guid=r.default.MetadataObject,e.MetadataObjectState=R;class C extends R{constructor(_){super(_)}}C.guid=r.default.MetadataLibraryObject,e.MetadataLibraryObjectState=C;class B{static fromBase64(_){return this.fromBuffer(Buffer.from(_,"base64"))}static fromBuffer(_){return new B(_.length).get(_,0)}constructor(_){this.len=_}get(_,x){const ee=_.readUInt8(x++),N=_.readInt32LE(x);let U=5;for(;_.readUInt16BE(U)!==0;)U+=2;const Z=_.slice(5,U).toString("utf16le");for(;_.readUInt16BE(U)!==0;)U+=2;const H=_.slice(5,U).toString("utf16le");return{type:a.AttachedPictureType[ee],format:Z,description:H,size:N,data:_.slice(U+4)}}}e.WmPictureToken=B})(AsfObject)),AsfObject}var hasRequiredAsfParser;function requireAsfParser(){if(hasRequiredAsfParser)return AsfParser;hasRequiredAsfParser=1,Object.defineProperty(AsfParser,"__esModule",{value:!0}),AsfParser.AsfParser=void 0;const e=requireBrowser$3(),t=requireType(),i=requireGUID(),r=requireAsfObject(),n=requireBasicParser(),a=(0,e.default)("music-metadata:parser:ASF"),o="asf";let s=class extends n.BasicParser{async parse(){const u=await this.tokenizer.readToken(r.TopLevelHeaderObjectToken);if(!u.objectId.equals(i.default.HeaderObject))throw new Error("expected asf header; but was not found; got: "+u.objectId.str);try{await this.parseObjectHeader(u.numberOfHeaderObjects)}catch(c){a("Error while parsing ASF: %s",c)}}async parseObjectHeader(u){let c;do{const m=await this.tokenizer.readToken(r.HeaderObjectToken);switch(a("header GUID=%s",m.objectId.str),m.objectId.str){case r.FilePropertiesObject.guid.str:const f=await this.tokenizer.readToken(new r.FilePropertiesObject(m));this.metadata.setFormat("duration",Number(f.playDuration/BigInt(1e3))/1e4-Number(f.preroll)/1e3),this.metadata.setFormat("bitrate",f.maximumBitrate);break;case r.StreamPropertiesObject.guid.str:const d=await this.tokenizer.readToken(new r.StreamPropertiesObject(m));this.metadata.setFormat("container","ASF/"+d.streamType);break;case r.HeaderExtensionObject.guid.str:const b=await this.tokenizer.readToken(new r.HeaderExtensionObject);await this.parseExtensionObject(b.extensionDataSize);break;case r.ContentDescriptionObjectState.guid.str:c=await this.tokenizer.readToken(new r.ContentDescriptionObjectState(m)),this.addTags(c);break;case r.ExtendedContentDescriptionObjectState.guid.str:c=await this.tokenizer.readToken(new r.ExtendedContentDescriptionObjectState(m)),this.addTags(c);break;case i.default.CodecListObject.str:const y=await r.readCodecEntries(this.tokenizer);y.forEach(T=>{this.metadata.addStreamInfo({type:T.type.videoCodec?t.TrackType.video:t.TrackType.audio,codecName:T.codecName})});const w=y.filter(T=>T.type.audioCodec).map(T=>T.codecName).join("/");this.metadata.setFormat("codec",w);break;case i.default.StreamBitratePropertiesObject.str:await this.tokenizer.ignore(m.objectSize-r.HeaderObjectToken.len);break;case i.default.PaddingObject.str:a("Padding: %s bytes",m.objectSize-r.HeaderObjectToken.len),await this.tokenizer.ignore(m.objectSize-r.HeaderObjectToken.len);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+m.objectId.str),a("Ignore ASF-Object-GUID: %s",m.objectId.str),await this.tokenizer.readToken(new r.IgnoreObjectState(m))}}while(--u)}addTags(u){u.forEach(c=>{this.metadata.addTag(o,c.id,c.value)})}async parseExtensionObject(u){do{const c=await this.tokenizer.readToken(r.HeaderObjectToken),m=c.objectSize-r.HeaderObjectToken.len;switch(c.objectId.str){case r.ExtendedStreamPropertiesObjectState.guid.str:await this.tokenizer.readToken(new r.ExtendedStreamPropertiesObjectState(c));break;case r.MetadataObjectState.guid.str:const f=await this.tokenizer.readToken(new r.MetadataObjectState(c));this.addTags(f);break;case r.MetadataLibraryObjectState.guid.str:const d=await this.tokenizer.readToken(new r.MetadataLibraryObjectState(c));this.addTags(d);break;case i.default.PaddingObject.str:await this.tokenizer.ignore(m);break;case i.default.CompatibilityObject.str:this.tokenizer.ignore(m);break;case i.default.ASF_Index_Placeholder_Object.str:await this.tokenizer.ignore(m);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+c.objectId.str),await this.tokenizer.readToken(new r.IgnoreObjectState(c));break}u-=c.objectSize}while(u>0)}};return AsfParser.AsfParser=s,AsfParser}var FlacParser={},Vorbis={},hasRequiredVorbis;function requireVorbis(){if(hasRequiredVorbis)return Vorbis;hasRequiredVorbis=1,Object.defineProperty(Vorbis,"__esModule",{value:!0}),Vorbis.IdentificationHeader=Vorbis.CommonHeader=Vorbis.VorbisPictureToken=void 0;const e=requireLib$2(),t=requireID3v2Token();class i{static fromBase64(n){return this.fromBuffer(Buffer.from(n,"base64"))}static fromBuffer(n){return new i(n.length).get(n,0)}constructor(n){this.len=n}get(n,a){const o=t.AttachedPictureType[e.UINT32_BE.get(n,a)],s=e.UINT32_BE.get(n,a+=4),l=n.toString("utf-8",a+=4,a+s),u=e.UINT32_BE.get(n,a+=s),c=n.toString("utf-8",a+=4,a+u),m=e.UINT32_BE.get(n,a+=u),f=e.UINT32_BE.get(n,a+=4),d=e.UINT32_BE.get(n,a+=4),b=e.UINT32_BE.get(n,a+=4),y=e.UINT32_BE.get(n,a+=4),w=Buffer.from(n.slice(a+=4,a+y));return{type:o,format:l,description:c,width:m,height:f,colour_depth:d,indexed_color:b,data:w}}}return Vorbis.VorbisPictureToken=i,Vorbis.CommonHeader={len:7,get:(r,n)=>({packetType:r.readUInt8(n),vorbis:new e.StringType(6,"ascii").get(r,n+1)})},Vorbis.IdentificationHeader={len:23,get:(r,n)=>{const a=new DataView(r.buffer,r.byteOffset);return{version:a.getUint32(n+0,!0),channelMode:a.getUint8(n+4),sampleRate:a.getUint32(n+5,!0),bitrateMax:a.getUint32(n+9,!0),bitrateNominal:a.getUint32(n+13,!0),bitrateMin:a.getUint32(n+17,!0)}}},Vorbis}var AbstractID3Parser={},hasRequiredAbstractID3Parser;function requireAbstractID3Parser(){if(hasRequiredAbstractID3Parser)return AbstractID3Parser;hasRequiredAbstractID3Parser=1,Object.defineProperty(AbstractID3Parser,"__esModule",{value:!0}),AbstractID3Parser.AbstractID3Parser=void 0;const e=requireCore$2(),t=requireBrowser$3(),i=requireID3v2Token(),r=requireID3v2Parser(),n=requireID3v1Parser(),a=requireBasicParser(),o=(0,t.default)("music-metadata:parser:ID3");let s=class extends a.BasicParser{constructor(){super(...arguments),this.id3parser=new r.ID3v2Parser}static async startsWithID3v2Header(u){return(await u.peekToken(i.ID3v2Header)).fileIdentifier==="ID3"}async parse(){try{await this.parseID3v2()}catch(u){if(u instanceof e.EndOfStreamError)o("End-of-stream");else throw u}}finalize(){}async parseID3v2(){await this.tryReadId3v2Headers(),o("End of ID3v2 header, go to MPEG-parser: pos=%s",this.tokenizer.position),await this.postId3v2Parse(),this.options.skipPostHeaders&&this.metadata.hasAny()?this.finalize():(await new n.ID3v1Parser().init(this.metadata,this.tokenizer,this.options).parse(),this.finalize())}async tryReadId3v2Headers(){if((await this.tokenizer.peekToken(i.ID3v2Header)).fileIdentifier==="ID3")return o("Found ID3v2 header, pos=%s",this.tokenizer.position),await this.id3parser.parse(this.metadata,this.tokenizer,this.options),this.tryReadId3v2Headers()}};return AbstractID3Parser.AbstractID3Parser=s,AbstractID3Parser}var VorbisParser={},VorbisDecoder={},hasRequiredVorbisDecoder;function requireVorbisDecoder(){if(hasRequiredVorbisDecoder)return VorbisDecoder;hasRequiredVorbisDecoder=1,Object.defineProperty(VorbisDecoder,"__esModule",{value:!0}),VorbisDecoder.VorbisDecoder=void 0;const e=requireLib$2();let t=class{constructor(r,n){this.data=r,this.offset=n}readInt32(){const r=e.UINT32_LE.get(this.data,this.offset);return this.offset+=4,r}readStringUtf8(){const r=this.readInt32(),n=Buffer.from(this.data).toString("utf-8",this.offset,this.offset+r);return this.offset+=r,n}parseUserComment(){const r=this.offset,n=this.readStringUtf8(),a=n.indexOf("=");return{key:n.slice(0,a).toUpperCase(),value:n.slice(a+1),len:this.offset-r}}};return VorbisDecoder.VorbisDecoder=t,VorbisDecoder}var hasRequiredVorbisParser;function requireVorbisParser(){if(hasRequiredVorbisParser)return VorbisParser;hasRequiredVorbisParser=1,Object.defineProperty(VorbisParser,"__esModule",{value:!0}),VorbisParser.VorbisParser=void 0;const e=requireLib$2(),t=requireBrowser$3(),i=requireVorbisDecoder(),r=requireVorbis(),n=(0,t.default)("music-metadata:parser:ogg:vorbis1");let a=class{constructor(s,l){this.metadata=s,this.options=l,this.pageSegments=[]}parsePage(s,l){if(s.headerType.firstPage)this.parseFirstPage(s,l);else{if(s.headerType.continued){if(this.pageSegments.length===0)throw new Error("Cannot continue on previous page");this.pageSegments.push(l)}if(s.headerType.lastPage||!s.headerType.continued){if(this.pageSegments.length>0){const u=Buffer.concat(this.pageSegments);this.parseFullPage(u)}this.pageSegments=s.headerType.lastPage?[]:[l]}}s.headerType.lastPage&&this.calculateDuration(s)}flush(){this.parseFullPage(Buffer.concat(this.pageSegments))}parseUserComment(s,l){const c=new i.VorbisDecoder(s,l).parseUserComment();return this.addTag(c.key,c.value),c.len}addTag(s,l){if(s==="METADATA_BLOCK_PICTURE"&&typeof l=="string"){if(this.options.skipCovers){n("Ignore picture");return}l=r.VorbisPictureToken.fromBase64(l),n(`Push picture: id=${s}, format=${l.format}`)}else n(`Push tag: id=${s}, value=${l}`);this.metadata.addTag("vorbis",s,l)}calculateDuration(s){this.metadata.format.sampleRate&&s.absoluteGranulePosition>=0&&(this.metadata.setFormat("numberOfSamples",s.absoluteGranulePosition),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate))}parseFirstPage(s,l){this.metadata.setFormat("codec","Vorbis I"),n("Parse first page");const u=r.CommonHeader.get(l,0);if(u.vorbis!=="vorbis")throw new Error("Metadata does not look like Vorbis");if(u.packetType===1){const c=r.IdentificationHeader.get(l,r.CommonHeader.len);this.metadata.setFormat("sampleRate",c.sampleRate),this.metadata.setFormat("bitrate",c.bitrateNominal),this.metadata.setFormat("numberOfChannels",c.channelMode),n("sample-rate=%s[hz], bitrate=%s[b/s], channel-mode=%s",c.sampleRate,c.bitrateNominal,c.channelMode)}else throw new Error("First Ogg page should be type 1: the identification header")}parseFullPage(s){const l=r.CommonHeader.get(s,0);switch(n("Parse full page: type=%s, byteLength=%s",l.packetType,s.byteLength),l.packetType){case 3:return this.parseUserCommentList(s,r.CommonHeader.len)}}parseUserCommentList(s,l){const u=e.UINT32_LE.get(s,l);l+=4,l+=u;let c=e.UINT32_LE.get(s,l);for(l+=4;c-- >0;)l+=this.parseUserComment(s,l)}};return VorbisParser.VorbisParser=a,VorbisParser}var hasRequiredFlacParser;function requireFlacParser(){if(hasRequiredFlacParser)return FlacParser;hasRequiredFlacParser=1,Object.defineProperty(FlacParser,"__esModule",{value:!0}),FlacParser.FlacParser=void 0;const e=requireLib$2(),t=requireBrowser$3(),i=requireUtil$1(),r=requireVorbis(),n=requireAbstractID3Parser(),a=requireFourCC(),o=requireVorbisParser(),s=requireVorbisDecoder(),l=(0,t.default)("music-metadata:parser:FLAC");var u;(function(f){f[f.STREAMINFO=0]="STREAMINFO",f[f.PADDING=1]="PADDING",f[f.APPLICATION=2]="APPLICATION",f[f.SEEKTABLE=3]="SEEKTABLE",f[f.VORBIS_COMMENT=4]="VORBIS_COMMENT",f[f.CUESHEET=5]="CUESHEET",f[f.PICTURE=6]="PICTURE"})(u||(u={}));let c=class extends n.AbstractID3Parser{constructor(){super(...arguments),this.padding=0}init(d,b,y){return super.init(d,b,y),this.vorbisParser=new o.VorbisParser(d,y),this}async postId3v2Parse(){if((await this.tokenizer.readToken(a.FourCcToken)).toString()!=="fLaC")throw new Error("Invalid FLAC preamble");let b;do b=await this.tokenizer.readToken(m.BlockHeader),await this.parseDataBlock(b);while(!b.lastBlock);if(this.tokenizer.fileInfo.size&&this.metadata.format.duration){const y=this.tokenizer.fileInfo.size-this.tokenizer.position;this.metadata.setFormat("bitrate",8*y/this.metadata.format.duration)}}parseDataBlock(d){switch(l(`blockHeader type=${d.type}, length=${d.length}`),d.type){case u.STREAMINFO:return this.parseBlockStreamInfo(d.length);case u.PADDING:this.padding+=d.length;break;case u.APPLICATION:break;case u.SEEKTABLE:break;case u.VORBIS_COMMENT:return this.parseComment(d.length);case u.CUESHEET:break;case u.PICTURE:return this.parsePicture(d.length).then();default:this.metadata.addWarning("Unknown block type: "+d.type)}return this.tokenizer.ignore(d.length).then()}async parseBlockStreamInfo(d){if(d!==m.BlockStreamInfo.len)throw new Error("Unexpected block-stream-info length");const b=await this.tokenizer.readToken(m.BlockStreamInfo);this.metadata.setFormat("container","FLAC"),this.metadata.setFormat("codec","FLAC"),this.metadata.setFormat("lossless",!0),this.metadata.setFormat("numberOfChannels",b.channels),this.metadata.setFormat("bitsPerSample",b.bitsPerSample),this.metadata.setFormat("sampleRate",b.sampleRate),b.totalSamples>0&&this.metadata.setFormat("duration",b.totalSamples/b.sampleRate)}async parseComment(d){const b=await this.tokenizer.readToken(new e.Uint8ArrayType(d)),y=new s.VorbisDecoder(b,0);y.readStringUtf8();const w=y.readInt32();for(let T=0;T<w;T++){const E=y.parseUserComment();this.vorbisParser.addTag(E.key,E.value)}}async parsePicture(d){if(this.options.skipCovers)return this.tokenizer.ignore(d);{const b=await this.tokenizer.readToken(new r.VorbisPictureToken(d));this.vorbisParser.addTag("METADATA_BLOCK_PICTURE",b)}}};FlacParser.FlacParser=c;class m{}return m.BlockHeader={len:4,get:(f,d)=>({lastBlock:i.getBit(f,d,7),type:i.getBitAllignedNumber(f,d,1,7),length:e.UINT24_BE.get(f,d+1)})},m.BlockStreamInfo={len:34,get:(f,d)=>({minimumBlockSize:e.UINT16_BE.get(f,d),maximumBlockSize:e.UINT16_BE.get(f,d+2)/1e3,minimumFrameSize:e.UINT24_BE.get(f,d+4),maximumFrameSize:e.UINT24_BE.get(f,d+7),sampleRate:e.UINT24_BE.get(f,d+10)>>4,channels:i.getBitAllignedNumber(f,d+12,4,3)+1,bitsPerSample:i.getBitAllignedNumber(f,d+12,7,5)+1,totalSamples:i.getBitAllignedNumber(f,d+13,4,36),fileMD5:new e.Uint8ArrayType(16).get(f,d+18)})},FlacParser}var MP4Parser={},Atom={},AtomToken={},hasRequiredAtomToken;function requireAtomToken(){return hasRequiredAtomToken||(hasRequiredAtomToken=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ChapterText=e.StcoAtom=e.StszAtom=e.StscAtom=e.SampleToChunkToken=e.SttsAtom=e.TimeToSampleToken=e.SoundSampleDescriptionV0=e.SoundSampleDescriptionVersion=e.StsdAtom=e.TrackHeaderAtom=e.NameAtom=e.DataAtom=e.MvhdAtom=e.MdhdAtom=e.FixedLengthAtom=e.mhdr=e.tkhd=e.ftyp=e.ExtendedSize=e.Header=void 0;const t=requireLib$2(),i=requireBrowser$3(),r=requireFourCC(),n=(0,i.default)("music-metadata:parser:MP4:atom");e.Header={len:8,get:(D,_)=>{const x=t.UINT32_BE.get(D,_);if(x<0)throw new Error("Invalid atom header length");return{length:BigInt(x),name:new t.StringType(4,"binary").get(D,_+4)}},put:(D,_,x)=>(t.UINT32_BE.put(D,_,Number(x.length)),r.FourCcToken.put(D,_+4,x.name))},e.ExtendedSize=t.UINT64_BE,e.ftyp={len:4,get:(D,_)=>({type:new t.StringType(4,"ascii").get(D,_)})},e.tkhd={len:4,get:(D,_)=>({type:new t.StringType(4,"ascii").get(D,_)})},e.mhdr={len:8,get:(D,_)=>({version:t.UINT8.get(D,_),flags:t.UINT24_BE.get(D,_+1),nextItemID:t.UINT32_BE.get(D,_+4)})};class a{constructor(_,x,ee){if(this.len=_,_<x)throw new Error(`Atom ${ee} expected to be ${x}, but specifies ${_} bytes long.`);_>x&&n(`Warning: atom ${ee} expected to be ${x}, but was actually ${_} bytes long.`)}}e.FixedLengthAtom=a;const o={len:4,get:(D,_)=>{const x=t.UINT32_BE.get(D,_)-2082844800;return new Date(x*1e3)}};class s extends a{constructor(_){super(_,24,"mdhd"),this.len=_}get(_,x){return{version:t.UINT8.get(_,x+0),flags:t.UINT24_BE.get(_,x+1),creationTime:o.get(_,x+4),modificationTime:o.get(_,x+8),timeScale:t.UINT32_BE.get(_,x+12),duration:t.UINT32_BE.get(_,x+16),language:t.UINT16_BE.get(_,x+20),quality:t.UINT16_BE.get(_,x+22)}}}e.MdhdAtom=s;class l extends a{constructor(_){super(_,100,"mvhd"),this.len=_}get(_,x){return{version:t.UINT8.get(_,x),flags:t.UINT24_BE.get(_,x+1),creationTime:o.get(_,x+4),modificationTime:o.get(_,x+8),timeScale:t.UINT32_BE.get(_,x+12),duration:t.UINT32_BE.get(_,x+16),preferredRate:t.UINT32_BE.get(_,x+20),preferredVolume:t.UINT16_BE.get(_,x+24),previewTime:t.UINT32_BE.get(_,x+72),previewDuration:t.UINT32_BE.get(_,x+76),posterTime:t.UINT32_BE.get(_,x+80),selectionTime:t.UINT32_BE.get(_,x+84),selectionDuration:t.UINT32_BE.get(_,x+88),currentTime:t.UINT32_BE.get(_,x+92),nextTrackID:t.UINT32_BE.get(_,x+96)}}}e.MvhdAtom=l;class u{constructor(_){this.len=_}get(_,x){return{type:{set:t.UINT8.get(_,x+0),type:t.UINT24_BE.get(_,x+1)},locale:t.UINT24_BE.get(_,x+4),value:Buffer.from(new t.Uint8ArrayType(this.len-8).get(_,x+8))}}}e.DataAtom=u;class c{constructor(_){this.len=_}get(_,x){return{version:t.UINT8.get(_,x),flags:t.UINT24_BE.get(_,x+1),name:new t.StringType(this.len-4,"utf-8").get(_,x+4)}}}e.NameAtom=c;class m{constructor(_){this.len=_}get(_,x){return{version:t.UINT8.get(_,x),flags:t.UINT24_BE.get(_,x+1),creationTime:o.get(_,x+4),modificationTime:o.get(_,x+8),trackId:t.UINT32_BE.get(_,x+12),duration:t.UINT32_BE.get(_,x+20),layer:t.UINT16_BE.get(_,x+24),alternateGroup:t.UINT16_BE.get(_,x+26),volume:t.UINT16_BE.get(_,x+28)}}}e.TrackHeaderAtom=m;const f={len:8,get:(D,_)=>({version:t.UINT8.get(D,_),flags:t.UINT24_BE.get(D,_+1),numberOfEntries:t.UINT32_BE.get(D,_+4)})};class d{constructor(_){this.len=_}get(_,x){return{dataFormat:r.FourCcToken.get(_,x),dataReferenceIndex:t.UINT16_BE.get(_,x+10),description:new t.Uint8ArrayType(this.len-12).get(_,x+12)}}}class b{constructor(_){this.len=_}get(_,x){const ee=f.get(_,x);x+=f.len;const N=[];for(let U=0;U<ee.numberOfEntries;++U){const Z=t.UINT32_BE.get(_,x);x+=t.UINT32_BE.len,N.push(new d(Z).get(_,x)),x+=Z}return{header:ee,table:N}}}e.StsdAtom=b,e.SoundSampleDescriptionVersion={len:8,get(D,_){return{version:t.INT16_BE.get(D,_),revision:t.INT16_BE.get(D,_+2),vendor:t.INT32_BE.get(D,_+4)}}},e.SoundSampleDescriptionV0={len:12,get(D,_){return{numAudioChannels:t.INT16_BE.get(D,_+0),sampleSize:t.INT16_BE.get(D,_+2),compressionId:t.INT16_BE.get(D,_+4),packetSize:t.INT16_BE.get(D,_+6),sampleRate:t.UINT16_BE.get(D,_+8)+t.UINT16_BE.get(D,_+10)/1e4}}};class y{constructor(_,x){this.len=_,this.token=x}get(_,x){const ee=t.INT32_BE.get(_,x+4);return{version:t.INT8.get(_,x+0),flags:t.INT24_BE.get(_,x+1),numberOfEntries:ee,entries:B(_,this.token,x+8,this.len-8,ee)}}}e.TimeToSampleToken={len:8,get(D,_){return{count:t.INT32_BE.get(D,_+0),duration:t.INT32_BE.get(D,_+4)}}};class w extends y{constructor(_){super(_,e.TimeToSampleToken),this.len=_}}e.SttsAtom=w,e.SampleToChunkToken={len:12,get(D,_){return{firstChunk:t.INT32_BE.get(D,_),samplesPerChunk:t.INT32_BE.get(D,_+4),sampleDescriptionId:t.INT32_BE.get(D,_+8)}}};class T extends y{constructor(_){super(_,e.SampleToChunkToken),this.len=_}}e.StscAtom=T;class E{constructor(_){this.len=_}get(_,x){const ee=t.INT32_BE.get(_,x+8);return{version:t.INT8.get(_,x),flags:t.INT24_BE.get(_,x+1),sampleSize:t.INT32_BE.get(_,x+4),numberOfEntries:ee,entries:B(_,t.INT32_BE,x+12,this.len-12,ee)}}}e.StszAtom=E;class R extends y{constructor(_){super(_,t.INT32_BE),this.len=_}}e.StcoAtom=R;class C{constructor(_){this.len=_}get(_,x){const ee=t.INT16_BE.get(_,x+0);return new t.StringType(ee,"utf-8").get(_,x+2)}}e.ChapterText=C;function B(D,_,x,ee,N){if(n(`remainingLen=${ee}, numberOfEntries=${N} * token-len=${_.len}`),ee===0)return[];if(ee!==N*_.len)throw new Error("mismatch number-of-entries with remaining atom-length");const U=[];for(let Z=0;Z<N;++Z)U.push(_.get(D,x)),x+=_.len;return U}})(AtomToken)),AtomToken}var hasRequiredAtom;function requireAtom(){if(hasRequiredAtom)return Atom;hasRequiredAtom=1,Object.defineProperty(Atom,"__esModule",{value:!0}),Atom.Atom=void 0;const e=requireBrowser$3(),t=requireAtomToken(),i=(0,e.default)("music-metadata:parser:MP4:Atom");let r=class We{static async readAtom(a,o,s,l){const u=a.position,c=await a.readToken(t.Header);c.length===BigInt(1)&&(c.length=await a.readToken(t.ExtendedSize));const f=new We(c,c.length===BigInt(1),s),d=f.getPayloadLength(l);return i(`parse atom name=${f.atomPath}, extended=${f.extended}, offset=${u}, len=${f.header.length}`),await f.readData(a,o,d),f}constructor(a,o,s){this.header=a,this.extended=o,this.parent=s,this.children=[],this.atomPath=(this.parent?this.parent.atomPath+".":"")+this.header.name}getHeaderLength(){return this.extended?16:8}getPayloadLength(a){return(this.header.length===BigInt(0)?a:Number(this.header.length))-this.getHeaderLength()}async readAtoms(a,o,s){for(;s>0;){const l=await We.readAtom(a,o,this,s);this.children.push(l),s-=l.header.length===BigInt(0)?s:Number(l.header.length)}}async readData(a,o,s){switch(this.header.name){case"moov":case"udta":case"trak":case"mdia":case"minf":case"stbl":case"<id>":case"ilst":case"tref":return this.readAtoms(a,o,this.getPayloadLength(s));case"meta":const u=(await a.peekToken(t.Header)).name==="hdlr"?0:4;return await a.ignore(u),this.readAtoms(a,o,this.getPayloadLength(s)-u);case"mdhd":case"mvhd":case"tkhd":case"stsz":case"mdat":default:return o(this,s)}}};return Atom.Atom=r,Atom}var hasRequiredMP4Parser;function requireMP4Parser(){if(hasRequiredMP4Parser)return MP4Parser;hasRequiredMP4Parser=1,Object.defineProperty(MP4Parser,"__esModule",{value:!0}),MP4Parser.MP4Parser=void 0;const e=requireBrowser$3(),t=requireLib$2(),i=requireBasicParser(),r=requireID3v1Parser(),n=requireType(),a=requireAtom(),o=requireAtomToken(),s=(0,e.default)("music-metadata:parser:MP4"),l="iTunes",u={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function c(f,d,b){return b.indexOf(f)===d}let m=class Ve extends i.BasicParser{constructor(){super(...arguments),this.atomParsers={mvhd:async d=>{const b=await this.tokenizer.readToken(new o.MvhdAtom(d));this.metadata.setFormat("creationTime",b.creationTime),this.metadata.setFormat("modificationTime",b.modificationTime)},mdhd:async d=>{const b=await this.tokenizer.readToken(new o.MdhdAtom(d)),y=this.getTrackDescription();y.creationTime=b.creationTime,y.modificationTime=b.modificationTime,y.timeScale=b.timeScale,y.duration=b.duration},chap:async d=>{const b=this.getTrackDescription(),y=[];for(;d>=t.UINT32_BE.len;)y.push(await this.tokenizer.readNumber(t.UINT32_BE)),d-=t.UINT32_BE.len;b.chapterList=y},tkhd:async d=>{const b=await this.tokenizer.readToken(new o.TrackHeaderAtom(d));this.tracks.push(b)},mdat:async d=>{if(this.audioLengthInBytes=d,this.calculateBitRate(),this.options.includeChapters){const b=this.tracks.filter(y=>y.chapterList);if(b.length===1){const y=b[0].chapterList,w=this.tracks.filter(T=>y.indexOf(T.trackId)!==-1);if(w.length===1)return this.parseChapterTrack(w[0],b[0],d)}}await this.tokenizer.ignore(d)},ftyp:async d=>{const b=[];for(;d>0;){const w=await this.tokenizer.readToken(o.ftyp);d-=o.ftyp.len;const T=w.type.replace(/\W/g,"");T.length>0&&b.push(T)}s(`ftyp: ${b.join("/")}`);const y=b.filter(c).join("/");this.metadata.setFormat("container",y)},stsd:async d=>{const b=await this.tokenizer.readToken(new o.StsdAtom(d)),y=this.getTrackDescription();y.soundSampleDescription=b.table.map(w=>this.parseSoundSampleDescription(w))},stsc:async d=>{const b=await this.tokenizer.readToken(new o.StscAtom(d));this.getTrackDescription().sampleToChunkTable=b.entries},stts:async d=>{const b=await this.tokenizer.readToken(new o.SttsAtom(d));this.getTrackDescription().timeToSampleTable=b.entries},stsz:async d=>{const b=await this.tokenizer.readToken(new o.StszAtom(d)),y=this.getTrackDescription();y.sampleSize=b.sampleSize,y.sampleSizeTable=b.entries},stco:async d=>{const b=await this.tokenizer.readToken(new o.StcoAtom(d));this.getTrackDescription().chunkOffsetTable=b.entries},date:async d=>{const b=await this.tokenizer.readToken(new t.StringType(d,"utf-8"));this.addTag("date",b)}}}static read_BE_Integer(d,b){const y=(b?"INT":"UINT")+d.length*8+(d.length>1?"_BE":""),w=t[y];if(!w)throw new Error('Token for integer type not found: "'+y+'"');return Number(w.get(d,0))}async parse(){this.tracks=[];let d=this.tokenizer.fileInfo.size;for(;!this.tokenizer.fileInfo.size||d>0;){try{if((await this.tokenizer.peekToken(o.Header)).name==="\0\0\0\0"){const E=`Error at offset=${this.tokenizer.position}: box.id=0`;s(E),this.addWarning(E);break}}catch(T){const E=`Error at offset=${this.tokenizer.position}: ${T.message}`;s(E),this.addWarning(E);break}const w=await a.Atom.readAtom(this.tokenizer,(T,E)=>this.handleAtom(T,E),null,d);d-=w.header.length===BigInt(0)?d:Number(w.header.length)}const b=[];this.tracks.forEach(w=>{const T=[];w.soundSampleDescription.forEach(E=>{const R={},C=u[E.dataFormat];if(C?(T.push(C.format),R.codecName=C.format):R.codecName=`<${E.dataFormat}>`,E.description){const{description:B}=E;B.sampleRate>0&&(R.type=n.TrackType.audio,R.audio={samplingFrequency:B.sampleRate,bitDepth:B.sampleSize,channels:B.numAudioChannels})}this.metadata.addStreamInfo(R)}),T.length>=1&&b.push(T.join("/"))}),b.length>0&&this.metadata.setFormat("codec",b.filter(c).join("+"));const y=this.tracks.filter(w=>w.soundSampleDescription.length>=1&&w.soundSampleDescription[0].description&&w.soundSampleDescription[0].description.numAudioChannels>0);if(y.length>=1){const w=y[0];if(w.timeScale>0){const R=w.duration/w.timeScale;this.metadata.setFormat("duration",R)}const T=w.soundSampleDescription[0];if(T.description&&(this.metadata.setFormat("sampleRate",T.description.sampleRate),this.metadata.setFormat("bitsPerSample",T.description.sampleSize),this.metadata.setFormat("numberOfChannels",T.description.numAudioChannels),w.timeScale===0&&w.timeToSampleTable.length>0)){const C=w.timeToSampleTable.map(B=>B.count*B.duration).reduce((B,D)=>B+D)/T.description.sampleRate;this.metadata.setFormat("duration",C)}const E=u[T.dataFormat];E&&this.metadata.setFormat("lossless",!E.lossy),this.calculateBitRate()}}async handleAtom(d,b){if(d.parent)switch(d.parent.header.name){case"ilst":case"<id>":return this.parseMetadataItemData(d)}if(this.atomParsers[d.header.name])return this.atomParsers[d.header.name](b);s(`No parser for atom path=${d.atomPath}, payload-len=${b}, ignoring atom`),await this.tokenizer.ignore(b)}getTrackDescription(){return this.tracks[this.tracks.length-1]}calculateBitRate(){this.audioLengthInBytes&&this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*this.audioLengthInBytes/this.metadata.format.duration)}addTag(d,b){this.metadata.addTag(l,d,b)}addWarning(d){s("Warning: "+d),this.metadata.addWarning(d)}parseMetadataItemData(d){let b=d.header.name;return d.readAtoms(this.tokenizer,async(y,w)=>{const T=y.getPayloadLength(w);switch(y.header.name){case"data":return this.parseValueAtom(b,y);case"name":case"mean":case"rate":const E=await this.tokenizer.readToken(new o.NameAtom(T));b+=":"+E.name;break;default:const R=await this.tokenizer.readToken(new t.BufferType(T));this.addWarning("Unsupported meta-item: "+b+"["+y.header.name+"] => value="+R.toString("hex")+" ascii="+R.toString("ascii"))}},d.getPayloadLength(0))}async parseValueAtom(d,b){const y=await this.tokenizer.readToken(new o.DataAtom(Number(b.header.length)-o.Header.len));if(y.type.set!==0)throw new Error("Unsupported type-set != 0: "+y.type.set);switch(y.type.type){case 0:switch(d){case"trkn":case"disk":const w=t.UINT8.get(y.value,3),T=t.UINT8.get(y.value,5);this.addTag(d,w+"/"+T);break;case"gnre":const E=t.UINT8.get(y.value,1),R=r.Genres[E-1];this.addTag(d,R);break;case"rate":const C=y.value.toString("ascii");this.addTag(d,C);break;default:s("unknown proprietary value type for: "+b.atomPath)}break;case 1:case 18:this.addTag(d,y.value.toString("utf-8"));break;case 13:if(this.options.skipCovers)break;this.addTag(d,{format:"image/jpeg",data:Buffer.from(y.value)});break;case 14:if(this.options.skipCovers)break;this.addTag(d,{format:"image/png",data:Buffer.from(y.value)});break;case 21:this.addTag(d,Ve.read_BE_Integer(y.value,!0));break;case 22:this.addTag(d,Ve.read_BE_Integer(y.value,!1));break;case 65:this.addTag(d,y.value.readInt8(0));break;case 66:this.addTag(d,y.value.readInt16BE(0));break;case 67:this.addTag(d,y.value.readInt32BE(0));break;default:this.addWarning(`atom key=${d}, has unknown well-known-type (data-type): ${y.type.type}`)}}parseSoundSampleDescription(d){const b={dataFormat:d.dataFormat,dataReferenceIndex:d.dataReferenceIndex};let y=0;const w=o.SoundSampleDescriptionVersion.get(d.description,y);return y+=o.SoundSampleDescriptionVersion.len,w.version===0||w.version===1?b.description=o.SoundSampleDescriptionV0.get(d.description,y):s(`Warning: sound-sample-description ${w} not implemented`),b}async parseChapterTrack(d,b,y){if(!d.sampleSize&&d.chunkOffsetTable.length!==d.sampleSizeTable.length)throw new Error("Expected equal chunk-offset-table & sample-size-table length.");const w=[];for(let T=0;T<d.chunkOffsetTable.length&&y>0;++T){const R=d.chunkOffsetTable[T]-this.tokenizer.position,C=d.sampleSize>0?d.sampleSize:d.sampleSizeTable[T];if(y-=R+C,y<0)throw new Error("Chapter chunk exceeding token length");await this.tokenizer.ignore(R);const B=await this.tokenizer.readToken(new o.ChapterText(C));s(`Chapter ${T+1}: ${B}`);const D={title:B,sampleOffset:this.findSampleOffset(b,this.tokenizer.position)};s(`Chapter title=${D.title}, offset=${D.sampleOffset}/${this.tracks[0].duration}`),w.push(D)}this.metadata.setFormat("chapters",w),await this.tokenizer.ignore(y)}findSampleOffset(d,b){let y=0;d.timeToSampleTable.forEach(T=>{y+=T.count*T.duration}),s(`Total duration=${y}`);let w=0;for(;w<d.chunkOffsetTable.length&&d.chunkOffsetTable[w]<b;)++w;return this.getChunkDuration(w+1,d)}getChunkDuration(d,b){let y=0,w=b.timeToSampleTable[y].count,T=b.timeToSampleTable[y].duration,E=1,R=this.getSamplesPerChunk(E,b.sampleToChunkTable),C=0;for(;E<d;){const B=Math.min(w,R);C+=B*T,w-=B,R-=B,R===0?(++E,R=this.getSamplesPerChunk(E,b.sampleToChunkTable)):(++y,w=b.timeToSampleTable[y].count,T=b.timeToSampleTable[y].duration)}return C}getSamplesPerChunk(d,b){for(let y=0;y<b.length-1;++y)if(d>=b[y].firstChunk&&d<b[y+1].firstChunk)return b[y].samplesPerChunk;return b[b.length-1].samplesPerChunk}};return MP4Parser.MP4Parser=m,MP4Parser}var MpegParser={},XingTag={},ExtendedLameHeader={},ReplayGainDataFormat={},hasRequiredReplayGainDataFormat;function requireReplayGainDataFormat(){if(hasRequiredReplayGainDataFormat)return ReplayGainDataFormat;hasRequiredReplayGainDataFormat=1,Object.defineProperty(ReplayGainDataFormat,"__esModule",{value:!0}),ReplayGainDataFormat.ReplayGain=void 0;const e=requireUtil$1();var t;(function(r){r[r.not_set=0]="not_set",r[r.radio=1]="radio",r[r.audiophile=2]="audiophile"})(t||(t={}));var i;return(function(r){r[r.unspecified=0]="unspecified",r[r.engineer=1]="engineer",r[r.user=2]="user",r[r.automatic=3]="automatic",r[r.rms_average=4]="rms_average"})(i||(i={})),ReplayGainDataFormat.ReplayGain={len:2,get:(r,n)=>{const a=e.getBitAllignedNumber(r,n,0,3),o=e.getBitAllignedNumber(r,n,6,1),s=e.getBitAllignedNumber(r,n,7,9)/10;if(a>0)return{type:e.getBitAllignedNumber(r,n,0,3),origin:e.getBitAllignedNumber(r,n,3,3),adjustment:o?-s:s}}},ReplayGainDataFormat}var hasRequiredExtendedLameHeader;function requireExtendedLameHeader(){if(hasRequiredExtendedLameHeader)return ExtendedLameHeader;hasRequiredExtendedLameHeader=1,Object.defineProperty(ExtendedLameHeader,"__esModule",{value:!0}),ExtendedLameHeader.ExtendedLameHeader=void 0;const e=requireLib$2(),t=requireUtil$1(),i=requireReplayGainDataFormat();return ExtendedLameHeader.ExtendedLameHeader={len:27,get:(r,n)=>{const a=e.UINT32_BE.get(r,n+2);return{revision:t.getBitAllignedNumber(r,n,0,4),vbr_method:t.getBitAllignedNumber(r,n,4,4),lowpass_filter:100*e.UINT8.get(r,n+1),track_peak:a===0?void 0:a/Math.pow(2,23),track_gain:i.ReplayGain.get(r,6),album_gain:i.ReplayGain.get(r,8),music_length:e.UINT32_BE.get(r,n+20),music_crc:e.UINT8.get(r,n+24),header_crc:e.UINT16_BE.get(r,n+24)}}},ExtendedLameHeader}var hasRequiredXingTag;function requireXingTag(){return hasRequiredXingTag||(hasRequiredXingTag=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.readXingHeader=e.XingHeaderFlags=e.LameEncoderVersion=e.InfoTagHeaderTag=void 0;const t=requireLib$2(),i=requireUtil$1(),r=requireExtendedLameHeader();e.InfoTagHeaderTag=new t.StringType(4,"ascii"),e.LameEncoderVersion=new t.StringType(6,"ascii"),e.XingHeaderFlags={len:4,get:(a,o)=>({frames:i.isBitSet(a,o,31),bytes:i.isBitSet(a,o,30),toc:i.isBitSet(a,o,29),vbrScale:i.isBitSet(a,o,28)})};async function n(a){const o=await a.readToken(e.XingHeaderFlags),s={};if(o.frames&&(s.numFrames=await a.readToken(t.UINT32_BE)),o.bytes&&(s.streamSize=await a.readToken(t.UINT32_BE)),o.toc&&(s.toc=Buffer.alloc(100),await a.readBuffer(s.toc)),o.vbrScale&&(s.vbrScale=await a.readToken(t.UINT32_BE)),await a.peekToken(new t.StringType(4,"ascii"))==="LAME"&&(await a.ignore(4),s.lame={version:await a.readToken(new t.StringType(5,"ascii"))},s.lame.version.match(/\d+.\d+/g))){const m=s.lame.version.match(/\d+.\d+/g)[0].split(".").map(f=>parseInt(f,10));m[0]>=3&&m[1]>=90&&(s.lame.extended=await a.readToken(r.ExtendedLameHeader))}return s}e.readXingHeader=n})(XingTag)),XingTag}var hasRequiredMpegParser;function requireMpegParser(){if(hasRequiredMpegParser)return MpegParser;hasRequiredMpegParser=1,Object.defineProperty(MpegParser,"__esModule",{value:!0}),MpegParser.MpegParser=void 0;const e=requireLib$2(),t=requireCore$2(),i=requireBrowser$3(),r=requireUtil$1(),n=requireAbstractID3Parser(),a=requireXingTag(),o=(0,i.default)("music-metadata:parser:mpeg"),s=1024,l={AudioObjectTypes:["AAC Main","AAC LC","AAC SSR","AAC LTP"],SamplingFrequencies:[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,void 0,void 0,-1]},u=[void 0,["front-center"],["front-left","front-right"],["front-center","front-left","front-right"],["front-center","front-left","front-right","back-center"],["front-center","front-left","front-right","back-left","back-right"],["front-center","front-left","front-right","back-left","back-right","LFE-channel"],["front-center","front-left","front-right","side-left","side-right","back-left","back-right","LFE-channel"]];class c{constructor(y,w){this.versionIndex=r.getBitAllignedNumber(y,w+1,3,2),this.layer=c.LayerDescription[r.getBitAllignedNumber(y,w+1,5,2)],this.versionIndex>1&&this.layer===0?this.parseAdtsHeader(y,w):this.parseMpegHeader(y,w),this.isProtectedByCRC=!r.isBitSet(y,w+1,7)}calcDuration(y){return y*this.calcSamplesPerFrame()/this.samplingRate}calcSamplesPerFrame(){return c.samplesInFrameTable[this.version===1?0:1][this.layer]}calculateSideInfoLength(){if(this.layer!==3)return 2;if(this.channelModeIndex===3){if(this.version===1)return 17;if(this.version===2||this.version===2.5)return 9}else{if(this.version===1)return 32;if(this.version===2||this.version===2.5)return 17}}calcSlotSize(){return[null,4,1,1][this.layer]}parseMpegHeader(y,w){this.container="MPEG",this.bitrateIndex=r.getBitAllignedNumber(y,w+2,0,4),this.sampRateFreqIndex=r.getBitAllignedNumber(y,w+2,4,2),this.padding=r.isBitSet(y,w+2,6),this.privateBit=r.isBitSet(y,w+2,7),this.channelModeIndex=r.getBitAllignedNumber(y,w+3,0,2),this.modeExtension=r.getBitAllignedNumber(y,w+3,2,2),this.isCopyrighted=r.isBitSet(y,w+3,4),this.isOriginalMedia=r.isBitSet(y,w+3,5),this.emphasis=r.getBitAllignedNumber(y,w+3,7,2),this.version=c.VersionID[this.versionIndex],this.channelMode=c.ChannelMode[this.channelModeIndex],this.codec=`MPEG ${this.version} Layer ${this.layer}`;const T=this.calcBitrate();if(!T)throw new Error("Cannot determine bit-rate");if(this.bitrate=T*1e3,this.samplingRate=this.calcSamplingRate(),this.samplingRate==null)throw new Error("Cannot determine sampling-rate")}parseAdtsHeader(y,w){o("layer=0 => ADTS"),this.version=this.versionIndex===2?4:2,this.container="ADTS/MPEG-"+this.version;const T=r.getBitAllignedNumber(y,w+2,0,2);this.codec="AAC",this.codecProfile=l.AudioObjectTypes[T],o(`MPEG-4 audio-codec=${this.codec}`);const E=r.getBitAllignedNumber(y,w+2,2,4);this.samplingRate=l.SamplingFrequencies[E],o(`sampling-rate=${this.samplingRate}`);const R=r.getBitAllignedNumber(y,w+2,7,3);this.mp4ChannelConfig=u[R],o(`channel-config=${this.mp4ChannelConfig.join("+")}`),this.frameLength=r.getBitAllignedNumber(y,w+3,6,2)<<11}calcBitrate(){if(this.bitrateIndex===0||this.bitrateIndex===15)return;const y=`${Math.floor(this.version)}${this.layer}`;return c.bitrate_index[this.bitrateIndex][y]}calcSamplingRate(){return this.sampRateFreqIndex===3?null:c.sampling_rate_freq_index[this.version][this.sampRateFreqIndex]}}c.SyncByte1=255,c.SyncByte2=224,c.VersionID=[2.5,null,2,1],c.LayerDescription=[0,3,2,1],c.ChannelMode=["stereo","joint_stereo","dual_channel","mono"],c.bitrate_index={1:{11:32,12:32,13:32,21:32,22:8,23:8},2:{11:64,12:48,13:40,21:48,22:16,23:16},3:{11:96,12:56,13:48,21:56,22:24,23:24},4:{11:128,12:64,13:56,21:64,22:32,23:32},5:{11:160,12:80,13:64,21:80,22:40,23:40},6:{11:192,12:96,13:80,21:96,22:48,23:48},7:{11:224,12:112,13:96,21:112,22:56,23:56},8:{11:256,12:128,13:112,21:128,22:64,23:64},9:{11:288,12:160,13:128,21:144,22:80,23:80},10:{11:320,12:192,13:160,21:160,22:96,23:96},11:{11:352,12:224,13:192,21:176,22:112,23:112},12:{11:384,12:256,13:224,21:192,22:128,23:128},13:{11:416,12:320,13:256,21:224,22:144,23:144},14:{11:448,12:384,13:320,21:256,22:160,23:160}},c.sampling_rate_freq_index={1:{0:44100,1:48e3,2:32e3},2:{0:22050,1:24e3,2:16e3},2.5:{0:11025,1:12e3,2:8e3}},c.samplesInFrameTable=[[0,384,1152,1152],[0,384,1152,576]];const m={len:4,get:(b,y)=>new c(b,y)};function f(b){return"V"+Math.floor((100-b)/10)}let d=class extends n.AbstractID3Parser{constructor(){super(...arguments),this.frameCount=0,this.syncFrameCount=-1,this.countSkipFrameData=0,this.totalDataLength=0,this.bitrates=[],this.calculateEofDuration=!1,this.buf_frame_header=Buffer.alloc(4),this.syncPeek={buf:Buffer.alloc(s),len:0}}async postId3v2Parse(){this.metadata.setFormat("lossless",!1);try{let y=!1;for(;!y;)await this.sync(),y=await this.parseCommonMpegHeader()}catch(y){if(y instanceof t.EndOfStreamError){if(o("End-of-stream"),this.calculateEofDuration){const w=this.frameCount*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",w);const T=w/this.metadata.format.sampleRate;o(`Calculate duration at EOF: ${T} sec.`,T),this.metadata.setFormat("duration",T)}}else throw y}}finalize(){const y=this.metadata.format,w=this.metadata.native.hasOwnProperty("ID3v1");if(y.duration&&this.tokenizer.fileInfo.size){const T=this.tokenizer.fileInfo.size-this.mpegOffset-(w?128:0);y.codecProfile&&y.codecProfile[0]==="V"&&this.metadata.setFormat("bitrate",T*8/y.duration)}else if(this.tokenizer.fileInfo.size&&y.codecProfile==="CBR"){const T=this.tokenizer.fileInfo.size-this.mpegOffset-(w?128:0),E=Math.round(T/this.frame_size)*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",E);const R=E/y.sampleRate;o("Calculate CBR duration based on file size: %s",R),this.metadata.setFormat("duration",R)}}async sync(){let y=!1;for(;;){let w=0;if(this.syncPeek.len=await this.tokenizer.peekBuffer(this.syncPeek.buf,{length:s,mayBeLess:!0}),this.syncPeek.len<=163)throw new t.EndOfStreamError;for(;;)if(y&&(this.syncPeek.buf[w]&224)===224){this.buf_frame_header[0]=c.SyncByte1,this.buf_frame_header[1]=this.syncPeek.buf[w],await this.tokenizer.ignore(w),o(`Sync at offset=${this.tokenizer.position-1}, frameCount=${this.frameCount}`),this.syncFrameCount===this.frameCount&&(o(`Re-synced MPEG stream, frameCount=${this.frameCount}`),this.frameCount=0,this.frame_size=0),this.syncFrameCount=this.frameCount;return}else if(y=!1,w=this.syncPeek.buf.indexOf(c.SyncByte1,w),w===-1){if(this.syncPeek.len<this.syncPeek.buf.length)throw new t.EndOfStreamError;await this.tokenizer.ignore(this.syncPeek.len);break}else++w,y=!0}}async parseCommonMpegHeader(){this.frameCount===0&&(this.mpegOffset=this.tokenizer.position-1),await this.tokenizer.peekBuffer(this.buf_frame_header,{offset:1,length:3});let y;try{y=m.get(this.buf_frame_header,0)}catch(w){return await this.tokenizer.ignore(1),this.metadata.addWarning("Parse error: "+w.message),!1}return await this.tokenizer.ignore(3),this.metadata.setFormat("container",y.container),this.metadata.setFormat("codec",y.codec),this.metadata.setFormat("lossless",!1),this.metadata.setFormat("sampleRate",y.samplingRate),this.frameCount++,y.version>=2&&y.layer===0?this.parseAdts(y):this.parseAudioFrameHeader(y)}async parseAudioFrameHeader(y){this.metadata.setFormat("numberOfChannels",y.channelMode==="mono"?1:2),this.metadata.setFormat("bitrate",y.bitrate),this.frameCount<20*1e4&&o("offset=%s MP%s bitrate=%s sample-rate=%s",this.tokenizer.position-4,y.layer,y.bitrate,y.samplingRate);const w=y.calcSlotSize();if(w===null)throw new Error("invalid slot_size");const T=y.calcSamplesPerFrame();o(`samples_per_frame=${T}`);const R=T/8*y.bitrate/y.samplingRate+(y.padding?w:0);if(this.frame_size=Math.floor(R),this.audioFrameHeader=y,this.bitrates.push(y.bitrate),this.frameCount===1)return this.offset=m.len,await this.skipSideInformation(),!1;if(this.frameCount===3){if(this.areAllSame(this.bitrates)){if(this.samplesPerFrame=T,this.metadata.setFormat("codecProfile","CBR"),this.tokenizer.fileInfo.size)return!0}else if(this.metadata.format.duration)return!0;if(!this.options.duration)return!0}return this.options.duration&&this.frameCount===4&&(this.samplesPerFrame=T,this.calculateEofDuration=!0),this.offset=4,y.isProtectedByCRC?(await this.parseCrc(),!1):(await this.skipSideInformation(),!1)}async parseAdts(y){const w=Buffer.alloc(3);await this.tokenizer.readBuffer(w),y.frameLength+=r.getBitAllignedNumber(w,0,0,11),this.totalDataLength+=y.frameLength,this.samplesPerFrame=1024;const T=y.samplingRate/this.samplesPerFrame,R=8*(this.frameCount===0?0:this.totalDataLength/this.frameCount)*T+.5;if(this.metadata.setFormat("bitrate",R),o(`frame-count=${this.frameCount}, size=${y.frameLength} bytes, bit-rate=${R}`),await this.tokenizer.ignore(y.frameLength>7?y.frameLength-7:1),this.frameCount===3)if(this.metadata.setFormat("codecProfile",y.codecProfile),y.mp4ChannelConfig&&this.metadata.setFormat("numberOfChannels",y.mp4ChannelConfig.length),this.options.duration)this.calculateEofDuration=!0;else return!0;return!1}async parseCrc(){return this.crc=await this.tokenizer.readNumber(e.INT16_BE),this.offset+=2,this.skipSideInformation()}async skipSideInformation(){const y=this.audioFrameHeader.calculateSideInfoLength();await this.tokenizer.readToken(new e.Uint8ArrayType(y)),this.offset+=y,await this.readXtraInfoHeader()}async readXtraInfoHeader(){const y=await this.tokenizer.readToken(a.InfoTagHeaderTag);switch(this.offset+=a.InfoTagHeaderTag.len,y){case"Info":return this.metadata.setFormat("codecProfile","CBR"),this.readXingInfoHeader();case"Xing":const T=await this.readXingInfoHeader(),E=f(T.vbrScale);return this.metadata.setFormat("codecProfile",E),null;case"Xtra":break;case"LAME":const R=await this.tokenizer.readToken(a.LameEncoderVersion);if(this.frame_size>=this.offset+a.LameEncoderVersion.len)return this.offset+=a.LameEncoderVersion.len,this.metadata.setFormat("tool","LAME "+R),await this.skipFrameData(this.frame_size-this.offset),null;this.metadata.addWarning("Corrupt LAME header");break}const w=this.frame_size-this.offset;return w<0?this.metadata.addWarning("Frame "+this.frameCount+"corrupt: negative frameDataLeft"):await this.skipFrameData(w),null}async readXingInfoHeader(){const y=this.tokenizer.position,w=await(0,a.readXingHeader)(this.tokenizer);if(this.offset+=this.tokenizer.position-y,w.lame&&(this.metadata.setFormat("tool","LAME "+r.stripNulls(w.lame.version)),w.lame.extended&&(this.metadata.setFormat("trackPeakLevel",w.lame.extended.track_peak),w.lame.extended.track_gain&&this.metadata.setFormat("trackGain",w.lame.extended.track_gain.adjustment),w.lame.extended.album_gain&&this.metadata.setFormat("albumGain",w.lame.extended.album_gain.adjustment),this.metadata.setFormat("duration",w.lame.extended.music_length/1e3))),w.streamSize){const E=this.audioFrameHeader.calcDuration(w.numFrames);return this.metadata.setFormat("duration",E),o("Get duration from Xing header: %s",this.metadata.format.duration),w}const T=this.frame_size-this.offset;return await this.skipFrameData(T),w}async skipFrameData(y){if(y<0)throw new Error("frame-data-left cannot be negative");await this.tokenizer.ignore(y),this.countSkipFrameData+=y}areAllSame(y){const w=y[0];return y.every(T=>T===w)}};return MpegParser.MpegParser=d,MpegParser}var musepack={},MpcSv8Parser={},StreamVersion8={},hasRequiredStreamVersion8;function requireStreamVersion8(){if(hasRequiredStreamVersion8)return StreamVersion8;hasRequiredStreamVersion8=1,Object.defineProperty(StreamVersion8,"__esModule",{value:!0}),StreamVersion8.StreamReader=void 0;const e=requireLib$2(),t=requireBrowser$3(),i=requireUtil$1(),r=(0,t.default)("music-metadata:parser:musepack:sv8"),n=new e.StringType(2,"binary"),a={len:5,get:(l,u)=>({crc:e.UINT32_LE.get(l,u),streamVersion:e.UINT8.get(l,u+4)})},o={len:2,get:(l,u)=>({sampleFrequency:[44100,48e3,37800,32e3][i.getBitAllignedNumber(l,u,0,3)],maxUsedBands:i.getBitAllignedNumber(l,u,3,5),channelCount:i.getBitAllignedNumber(l,u+1,0,4)+1,msUsed:i.isBitSet(l,u+1,4),audioBlockFrames:i.getBitAllignedNumber(l,u+1,5,3)})};class s{constructor(u){this.tokenizer=u}async readPacketHeader(){const u=await this.tokenizer.readToken(n),c=await this.readVariableSizeField();return{key:u,payloadLength:c.value-2-c.len}}async readStreamHeader(u){const c={};r(`Reading SH at offset=${this.tokenizer.position}`);const m=await this.tokenizer.readToken(a);u-=a.len,Object.assign(c,m),r(`SH.streamVersion = ${m.streamVersion}`);const f=await this.readVariableSizeField();u-=f.len,c.sampleCount=f.value;const d=await this.readVariableSizeField();u-=d.len,c.beginningOfSilence=d.value;const b=await this.tokenizer.readToken(o);return u-=o.len,Object.assign(c,b),await this.tokenizer.ignore(u),c}async readVariableSizeField(u=1,c=0){let m=await this.tokenizer.readNumber(e.UINT8);return(m&128)===0?{len:u,value:c+m}:(m&=127,m+=c,this.readVariableSizeField(u+1,m<<7))}}return StreamVersion8.StreamReader=s,StreamVersion8}var hasRequiredMpcSv8Parser;function requireMpcSv8Parser(){if(hasRequiredMpcSv8Parser)return MpcSv8Parser;hasRequiredMpcSv8Parser=1,Object.defineProperty(MpcSv8Parser,"__esModule",{value:!0}),MpcSv8Parser.MpcSv8Parser=void 0;const e=requireBrowser$3(),t=requireBasicParser(),i=requireAPEv2Parser(),r=requireFourCC(),n=requireStreamVersion8(),a=(0,e.default)("music-metadata:parser:musepack");let o=class extends t.BasicParser{constructor(){super(...arguments),this.audioLength=0}async parse(){if(await this.tokenizer.readToken(r.FourCcToken)!=="MPCK")throw new Error("Invalid Magic number");return this.metadata.setFormat("container","Musepack, SV8"),this.parsePacket()}async parsePacket(){const l=new n.StreamReader(this.tokenizer);do{const u=await l.readPacketHeader();switch(a(`packet-header key=${u.key}, payloadLength=${u.payloadLength}`),u.key){case"SH":const c=await l.readStreamHeader(u.payloadLength);this.metadata.setFormat("numberOfSamples",c.sampleCount),this.metadata.setFormat("sampleRate",c.sampleFrequency),this.metadata.setFormat("duration",c.sampleCount/c.sampleFrequency),this.metadata.setFormat("numberOfChannels",c.channelCount);break;case"AP":this.audioLength+=u.payloadLength,await this.tokenizer.ignore(u.payloadLength);break;case"RG":case"EI":case"SO":case"ST":case"CT":await this.tokenizer.ignore(u.payloadLength);break;case"SE":return this.metadata.setFormat("bitrate",this.audioLength*8/this.metadata.format.duration),i.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options);default:throw new Error(`Unexpected header: ${u.key}`)}}while(!0)}};return MpcSv8Parser.MpcSv8Parser=o,MpcSv8Parser}var MpcSv7Parser={},BitReader={},hasRequiredBitReader;function requireBitReader(){if(hasRequiredBitReader)return BitReader;hasRequiredBitReader=1,Object.defineProperty(BitReader,"__esModule",{value:!0}),BitReader.BitReader=void 0;const e=requireLib$2();let t=class{constructor(r){this.tokenizer=r,this.pos=0,this.dword=void 0}async read(r){for(;this.dword===void 0;)this.dword=await this.tokenizer.readToken(e.UINT32_LE);let n=this.dword;return this.pos+=r,this.pos<32?(n>>>=32-this.pos,n&(1<<r)-1):(this.pos-=32,this.pos===0?(this.dword=void 0,n&(1<<r)-1):(this.dword=await this.tokenizer.readToken(e.UINT32_LE),this.pos&&(n<<=this.pos,n|=this.dword>>>32-this.pos),n&(1<<r)-1))}async ignore(r){if(this.pos>0){const o=32-this.pos;this.dword=void 0,r-=o,this.pos=0}const n=r%32,a=(r-n)/32;return await this.tokenizer.ignore(a*4),this.read(n)}};return BitReader.BitReader=t,BitReader}var StreamVersion7={},hasRequiredStreamVersion7;function requireStreamVersion7(){if(hasRequiredStreamVersion7)return StreamVersion7;hasRequiredStreamVersion7=1,Object.defineProperty(StreamVersion7,"__esModule",{value:!0}),StreamVersion7.Header=void 0;const e=requireLib$2(),t=requireUtil$1();return StreamVersion7.Header={len:24,get:(i,r)=>{const n={signature:Buffer.from(i).toString("latin1",r,r+3),streamMinorVersion:t.getBitAllignedNumber(i,r+3,0,4),streamMajorVersion:t.getBitAllignedNumber(i,r+3,4,4),frameCount:e.UINT32_LE.get(i,r+4),maxLevel:e.UINT16_LE.get(i,r+8),sampleFrequency:[44100,48e3,37800,32e3][t.getBitAllignedNumber(i,r+10,0,2)],link:t.getBitAllignedNumber(i,r+10,2,2),profile:t.getBitAllignedNumber(i,r+10,4,4),maxBand:t.getBitAllignedNumber(i,r+11,0,6),intensityStereo:t.isBitSet(i,r+11,6),midSideStereo:t.isBitSet(i,r+11,7),titlePeak:e.UINT16_LE.get(i,r+12),titleGain:e.UINT16_LE.get(i,r+14),albumPeak:e.UINT16_LE.get(i,r+16),albumGain:e.UINT16_LE.get(i,r+18),lastFrameLength:e.UINT32_LE.get(i,r+20)>>>20&2047,trueGapless:t.isBitSet(i,r+23,0)};return n.lastFrameLength=n.trueGapless?e.UINT32_LE.get(i,20)>>>20&2047:0,n}},StreamVersion7}var hasRequiredMpcSv7Parser;function requireMpcSv7Parser(){if(hasRequiredMpcSv7Parser)return MpcSv7Parser;hasRequiredMpcSv7Parser=1,Object.defineProperty(MpcSv7Parser,"__esModule",{value:!0}),MpcSv7Parser.MpcSv7Parser=void 0;const e=requireBrowser$3(),t=requireBasicParser(),i=requireAPEv2Parser(),r=requireBitReader(),n=requireStreamVersion7(),a=(0,e.default)("music-metadata:parser:musepack");let o=class extends t.BasicParser{constructor(){super(...arguments),this.audioLength=0}async parse(){const l=await this.tokenizer.readToken(n.Header);if(l.signature!=="MP+")throw new Error("Unexpected magic number");a(`stream-version=${l.streamMajorVersion}.${l.streamMinorVersion}`),this.metadata.setFormat("container","Musepack, SV7"),this.metadata.setFormat("sampleRate",l.sampleFrequency);const u=1152*(l.frameCount-1)+l.lastFrameLength;this.metadata.setFormat("numberOfSamples",u),this.duration=u/l.sampleFrequency,this.metadata.setFormat("duration",this.duration),this.bitreader=new r.BitReader(this.tokenizer),this.metadata.setFormat("numberOfChannels",l.midSideStereo||l.intensityStereo?2:1);const c=await this.bitreader.read(8);return this.metadata.setFormat("codec",(c/100).toFixed(2)),await this.skipAudioData(l.frameCount),a(`End of audio stream, switching to APEv2, offset=${this.tokenizer.position}`),i.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async skipAudioData(l){for(;l-- >0;){const c=await this.bitreader.read(20);this.audioLength+=20+c,await this.bitreader.ignore(c)}const u=await this.bitreader.read(11);this.audioLength+=u,this.metadata.setFormat("bitrate",this.audioLength/this.duration)}};return MpcSv7Parser.MpcSv7Parser=o,MpcSv7Parser}var hasRequiredMusepack;function requireMusepack(){if(hasRequiredMusepack)return musepack;hasRequiredMusepack=1,Object.defineProperty(musepack,"__esModule",{value:!0});const e=requireBrowser$3(),t=requireLib$2(),i=requireAbstractID3Parser(),r=requireMpcSv8Parser(),n=requireMpcSv7Parser(),a=(0,e.default)("music-metadata:parser:musepack");class o extends i.AbstractID3Parser{async postId3v2Parse(){const l=await this.tokenizer.peekToken(new t.StringType(3,"binary"));let u;switch(l){case"MP+":{a("Musepack stream-version 7"),u=new n.MpcSv7Parser;break}case"MPC":{a("Musepack stream-version 8"),u=new r.MpcSv8Parser;break}default:throw new Error("Invalid Musepack signature prefix")}return u.init(this.metadata,this.tokenizer,this.options),u.parse()}}return musepack.default=o,musepack}var OggParser={},OpusParser={},Opus={},hasRequiredOpus;function requireOpus(){if(hasRequiredOpus)return Opus;hasRequiredOpus=1,Object.defineProperty(Opus,"__esModule",{value:!0}),Opus.IdHeader=void 0;const e=requireLib$2();class t{constructor(r){if(this.len=r,r<19)throw new Error("ID-header-page 0 should be at least 19 bytes long")}get(r,n){return{magicSignature:new e.StringType(8,"ascii").get(r,n+0),version:r.readUInt8(n+8),channelCount:r.readUInt8(n+9),preSkip:r.readInt16LE(n+10),inputSampleRate:r.readInt32LE(n+12),outputGain:r.readInt16LE(n+16),channelMapping:r.readUInt8(n+18)}}}return Opus.IdHeader=t,Opus}var hasRequiredOpusParser;function requireOpusParser(){if(hasRequiredOpusParser)return OpusParser;hasRequiredOpusParser=1,Object.defineProperty(OpusParser,"__esModule",{value:!0}),OpusParser.OpusParser=void 0;const e=requireLib$2(),t=requireVorbisParser(),i=requireOpus();let r=class extends t.VorbisParser{constructor(a,o,s){super(a,o),this.tokenizer=s,this.lastPos=-1}parseFirstPage(a,o){if(this.metadata.setFormat("codec","Opus"),this.idHeader=new i.IdHeader(o.length).get(o,0),this.idHeader.magicSignature!=="OpusHead")throw new Error("Illegal ogg/Opus magic-signature");this.metadata.setFormat("sampleRate",this.idHeader.inputSampleRate),this.metadata.setFormat("numberOfChannels",this.idHeader.channelCount)}parseFullPage(a){switch(new e.StringType(8,"ascii").get(a,0)){case"OpusTags":this.parseUserCommentList(a,8),this.lastPos=this.tokenizer.position-a.length;break}}calculateDuration(a){if(this.metadata.format.sampleRate&&a.absoluteGranulePosition>=0){const o=a.absoluteGranulePosition-this.idHeader.preSkip;if(this.metadata.setFormat("numberOfSamples",o),this.metadata.setFormat("duration",o/48e3),this.lastPos!==-1&&this.tokenizer.fileInfo.size&&this.metadata.format.duration){const s=this.tokenizer.fileInfo.size-this.lastPos;this.metadata.setFormat("bitrate",8*s/this.metadata.format.duration)}}}};return OpusParser.OpusParser=r,OpusParser}var SpeexParser={},Speex={},hasRequiredSpeex;function requireSpeex(){if(hasRequiredSpeex)return Speex;hasRequiredSpeex=1,Object.defineProperty(Speex,"__esModule",{value:!0}),Speex.Header=void 0;const e=requireLib$2(),t=requireUtil$1();return Speex.Header={len:80,get:(i,r)=>({speex:new e.StringType(8,"ascii").get(i,r+0),version:t.trimRightNull(new e.StringType(20,"ascii").get(i,r+8)),version_id:i.readInt32LE(r+28),header_size:i.readInt32LE(r+32),rate:i.readInt32LE(r+36),mode:i.readInt32LE(r+40),mode_bitstream_version:i.readInt32LE(r+44),nb_channels:i.readInt32LE(r+48),bitrate:i.readInt32LE(r+52),frame_size:i.readInt32LE(r+56),vbr:i.readInt32LE(r+60),frames_per_packet:i.readInt32LE(r+64),extra_headers:i.readInt32LE(r+68),reserved1:i.readInt32LE(r+72),reserved2:i.readInt32LE(r+76)})},Speex}var hasRequiredSpeexParser;function requireSpeexParser(){if(hasRequiredSpeexParser)return SpeexParser;hasRequiredSpeexParser=1,Object.defineProperty(SpeexParser,"__esModule",{value:!0}),SpeexParser.SpeexParser=void 0;const e=requireBrowser$3(),t=requireVorbisParser(),i=requireSpeex(),r=(0,e.default)("music-metadata:parser:ogg:speex");let n=class extends t.VorbisParser{constructor(o,s,l){super(o,s),this.tokenizer=l}parseFirstPage(o,s){r("First Ogg/Speex page");const l=i.Header.get(s,0);this.metadata.setFormat("codec",`Speex ${l.version}`),this.metadata.setFormat("numberOfChannels",l.nb_channels),this.metadata.setFormat("sampleRate",l.rate),l.bitrate!==-1&&this.metadata.setFormat("bitrate",l.bitrate)}};return SpeexParser.SpeexParser=n,SpeexParser}var TheoraParser={},Theora={},hasRequiredTheora;function requireTheora(){if(hasRequiredTheora)return Theora;hasRequiredTheora=1,Object.defineProperty(Theora,"__esModule",{value:!0}),Theora.IdentificationHeader=void 0;const e=requireLib$2();return Theora.IdentificationHeader={len:42,get:(t,i)=>({id:new e.StringType(7,"ascii").get(t,i),vmaj:t.readUInt8(i+7),vmin:t.readUInt8(i+8),vrev:t.readUInt8(i+9),vmbw:t.readUInt16BE(i+10),vmbh:t.readUInt16BE(i+17),nombr:e.UINT24_BE.get(t,i+37),nqual:t.readUInt8(i+40)})},Theora}var hasRequiredTheoraParser;function requireTheoraParser(){if(hasRequiredTheoraParser)return TheoraParser;hasRequiredTheoraParser=1,Object.defineProperty(TheoraParser,"__esModule",{value:!0}),TheoraParser.TheoraParser=void 0;const e=requireBrowser$3(),t=requireTheora(),i=(0,e.default)("music-metadata:parser:ogg:theora");let r=class{constructor(a,o,s){this.metadata=a,this.tokenizer=s}parsePage(a,o){a.headerType.firstPage&&this.parseFirstPage(a,o)}flush(){i("flush")}calculateDuration(a){i("duration calculation not implemented")}parseFirstPage(a,o){i("First Ogg/Theora page"),this.metadata.setFormat("codec","Theora");const s=t.IdentificationHeader.get(o,0);this.metadata.setFormat("bitrate",s.nombr)}};return TheoraParser.TheoraParser=r,TheoraParser}var hasRequiredOggParser;function requireOggParser(){if(hasRequiredOggParser)return OggParser;hasRequiredOggParser=1,Object.defineProperty(OggParser,"__esModule",{value:!0}),OggParser.OggParser=OggParser.SegmentTable=void 0;const e=requireLib$2(),t=requireCore$2(),i=requireBrowser$3(),r=requireUtil$1(),n=requireFourCC(),a=requireBasicParser(),o=requireVorbisParser(),s=requireOpusParser(),l=requireSpeexParser(),u=requireTheoraParser(),c=(0,i.default)("music-metadata:parser:ogg");class m{static sum(b,y,w){let T=0;for(let E=y;E<y+w;++E)T+=b[E];return T}constructor(b){this.len=b.page_segments}get(b,y){return{totalPageSize:m.sum(b,y,this.len)}}}OggParser.SegmentTable=m;let f=class it extends a.BasicParser{async parse(){c("pos=%s, parsePage()",this.tokenizer.position);try{let b;do{if(b=await this.tokenizer.readToken(it.Header),b.capturePattern!=="OggS")throw new Error("Invalid Ogg capture pattern");this.metadata.setFormat("container","Ogg"),this.header=b,this.pageNumber=b.pageSequenceNo,c("page#=%s, Ogg.id=%s",b.pageSequenceNo,b.capturePattern);const y=await this.tokenizer.readToken(new m(b));c("totalPageSize=%s",y.totalPageSize);const w=await this.tokenizer.readToken(new e.Uint8ArrayType(y.totalPageSize));if(c("firstPage=%s, lastPage=%s, continued=%s",b.headerType.firstPage,b.headerType.lastPage,b.headerType.continued),b.headerType.firstPage){const T=new e.StringType(7,"ascii").get(Buffer.from(w),0);switch(T){case"vorbis":c("Set page consumer to Ogg/Vorbis"),this.pageConsumer=new o.VorbisParser(this.metadata,this.options);break;case"OpusHea":c("Set page consumer to Ogg/Opus"),this.pageConsumer=new s.OpusParser(this.metadata,this.options,this.tokenizer);break;case"Speex  ":c("Set page consumer to Ogg/Speex"),this.pageConsumer=new l.SpeexParser(this.metadata,this.options,this.tokenizer);break;case"fishead":case"\0theora":c("Set page consumer to Ogg/Theora"),this.pageConsumer=new u.TheoraParser(this.metadata,this.options,this.tokenizer);break;default:throw new Error("gg audio-codec not recognized (id="+T+")")}}this.pageConsumer.parsePage(b,w)}while(!b.headerType.lastPage)}catch(b){if(b instanceof t.EndOfStreamError)this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),c("End-of-stream"),this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),this.header&&this.pageConsumer.calculateDuration(this.header);else if(b.message.startsWith("FourCC"))this.pageNumber>0&&(this.metadata.addWarning("Invalid FourCC ID, maybe last OGG-page is not marked with last-page flag"),this.pageConsumer.flush());else throw b}}};return f.Header={len:27,get:(d,b)=>({capturePattern:n.FourCcToken.get(d,b),version:e.UINT8.get(d,b+4),headerType:{continued:r.getBit(d,b+5,0),firstPage:r.getBit(d,b+5,1),lastPage:r.getBit(d,b+5,2)},absoluteGranulePosition:Number(e.UINT64_LE.get(d,b+6)),streamSerialNumber:e.UINT32_LE.get(d,b+14),pageSequenceNo:e.UINT32_LE.get(d,b+18),pageChecksum:e.UINT32_LE.get(d,b+22),page_segments:e.UINT8.get(d,b+26)})},OggParser.OggParser=f,OggParser}var WaveParser={},RiffChunk={},hasRequiredRiffChunk;function requireRiffChunk(){if(hasRequiredRiffChunk)return RiffChunk;hasRequiredRiffChunk=1,Object.defineProperty(RiffChunk,"__esModule",{value:!0}),RiffChunk.ListInfoTagValue=RiffChunk.Header=void 0;const e=requireLib$2();RiffChunk.Header={len:8,get:(i,r)=>({chunkID:i.toString("binary",r,r+4),chunkSize:e.UINT32_LE.get(i,4)})};class t{constructor(r){this.tagHeader=r,this.len=r.chunkSize,this.len+=this.len&1}get(r,n){return new e.StringType(this.tagHeader.chunkSize,"ascii").get(r,n)}}return RiffChunk.ListInfoTagValue=t,RiffChunk}var WaveChunk={},hasRequiredWaveChunk;function requireWaveChunk(){return hasRequiredWaveChunk||(hasRequiredWaveChunk=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FactChunk=e.Format=e.WaveFormat=void 0,(function(r){r[r.PCM=1]="PCM",r[r.ADPCM=2]="ADPCM",r[r.IEEE_FLOAT=3]="IEEE_FLOAT",r[r.MPEG_ADTS_AAC=5632]="MPEG_ADTS_AAC",r[r.MPEG_LOAS=5634]="MPEG_LOAS",r[r.RAW_AAC1=255]="RAW_AAC1",r[r.DOLBY_AC3_SPDIF=146]="DOLBY_AC3_SPDIF",r[r.DVM=8192]="DVM",r[r.RAW_SPORT=576]="RAW_SPORT",r[r.ESST_AC3=577]="ESST_AC3",r[r.DRM=9]="DRM",r[r.DTS2=8193]="DTS2",r[r.MPEG=80]="MPEG"})(e.WaveFormat||(e.WaveFormat={}));class t{constructor(n){if(n.chunkSize<16)throw new Error("Invalid chunk size");this.len=n.chunkSize}get(n,a){return{wFormatTag:n.readUInt16LE(a),nChannels:n.readUInt16LE(a+2),nSamplesPerSec:n.readUInt32LE(a+4),nAvgBytesPerSec:n.readUInt32LE(a+8),nBlockAlign:n.readUInt16LE(a+12),wBitsPerSample:n.readUInt16LE(a+14)}}}e.Format=t;class i{constructor(n){if(n.chunkSize<4)throw new Error("Invalid fact chunk size.");this.len=n.chunkSize}get(n,a){return{dwSampleLength:n.readUInt32LE(a)}}}e.FactChunk=i})(WaveChunk)),WaveChunk}var BwfChunk={},hasRequiredBwfChunk;function requireBwfChunk(){if(hasRequiredBwfChunk)return BwfChunk;hasRequiredBwfChunk=1,Object.defineProperty(BwfChunk,"__esModule",{value:!0}),BwfChunk.BroadcastAudioExtensionChunk=void 0;const e=requireLib$2(),t=requireUtil$1();return BwfChunk.BroadcastAudioExtensionChunk={len:420,get:(i,r)=>({description:(0,t.stripNulls)(new e.StringType(256,"ascii").get(i,r)).trim(),originator:(0,t.stripNulls)(new e.StringType(32,"ascii").get(i,r+256)).trim(),originatorReference:(0,t.stripNulls)(new e.StringType(32,"ascii").get(i,r+288)).trim(),originationDate:(0,t.stripNulls)(new e.StringType(10,"ascii").get(i,r+320)).trim(),originationTime:(0,t.stripNulls)(new e.StringType(8,"ascii").get(i,r+330)).trim(),timeReferenceLow:e.UINT32_LE.get(i,r+338),timeReferenceHigh:e.UINT32_LE.get(i,r+342),version:e.UINT16_LE.get(i,r+346),umid:new e.Uint8ArrayType(64).get(i,r+348),loudnessValue:e.UINT16_LE.get(i,r+412),maxTruePeakLevel:e.UINT16_LE.get(i,r+414),maxMomentaryLoudness:e.UINT16_LE.get(i,r+416),maxShortTermLoudness:e.UINT16_LE.get(i,r+418)})},BwfChunk}var hasRequiredWaveParser;function requireWaveParser(){if(hasRequiredWaveParser)return WaveParser;hasRequiredWaveParser=1,Object.defineProperty(WaveParser,"__esModule",{value:!0}),WaveParser.WaveParser=void 0;const e=requireCore$2(),t=requireLib$2(),i=requireBrowser$3(),r=requireRiffChunk(),n=requireWaveChunk(),a=requireID3v2Parser(),o=requireUtil$1(),s=requireFourCC(),l=requireBasicParser(),u=requireBwfChunk(),c=(0,i.default)("music-metadata:parser:RIFF");let m=class extends l.BasicParser{async parse(){const d=await this.tokenizer.readToken(r.Header);if(c(`pos=${this.tokenizer.position}, parse: chunkID=${d.chunkID}`),d.chunkID==="RIFF")return this.parseRiffChunk(d.chunkSize).catch(b=>{if(!(b instanceof e.EndOfStreamError))throw b})}async parseRiffChunk(d){const b=await this.tokenizer.readToken(s.FourCcToken);switch(this.metadata.setFormat("container",b),b){case"WAVE":return this.readWaveChunk(d-s.FourCcToken.len);default:throw new Error(`Unsupported RIFF format: RIFF/${b}`)}}async readWaveChunk(d){for(;d>=r.Header.len;){const b=await this.tokenizer.readToken(r.Header);switch(d-=r.Header.len+b.chunkSize,b.chunkSize>d&&this.metadata.addWarning("Data chunk size exceeds file size"),this.header=b,c(`pos=${this.tokenizer.position}, readChunk: chunkID=RIFF/WAVE/${b.chunkID}`),b.chunkID){case"LIST":await this.parseListTag(b);break;case"fact":this.metadata.setFormat("lossless",!1),this.fact=await this.tokenizer.readToken(new n.FactChunk(b));break;case"fmt ":const y=await this.tokenizer.readToken(new n.Format(b));let w=n.WaveFormat[y.wFormatTag];w||(c("WAVE/non-PCM format="+y.wFormatTag),w="non-PCM ("+y.wFormatTag+")"),this.metadata.setFormat("codec",w),this.metadata.setFormat("bitsPerSample",y.wBitsPerSample),this.metadata.setFormat("sampleRate",y.nSamplesPerSec),this.metadata.setFormat("numberOfChannels",y.nChannels),this.metadata.setFormat("bitrate",y.nBlockAlign*y.nSamplesPerSec*8),this.blockAlign=y.nBlockAlign;break;case"id3 ":case"ID3 ":const T=await this.tokenizer.readToken(new t.Uint8ArrayType(b.chunkSize)),E=e.fromBuffer(T);await new a.ID3v2Parser().parse(this.metadata,E,this.options);break;case"data":this.metadata.format.lossless!==!1&&this.metadata.setFormat("lossless",!0);let R=b.chunkSize;if(this.tokenizer.fileInfo.size){const _=this.tokenizer.fileInfo.size-this.tokenizer.position;_<R&&(this.metadata.addWarning("data chunk length exceeding file length"),R=_)}const C=this.fact?this.fact.dwSampleLength:R===4294967295?void 0:R/this.blockAlign;C&&(this.metadata.setFormat("numberOfSamples",C),this.metadata.setFormat("duration",C/this.metadata.format.sampleRate)),this.metadata.format.codec==="ADPCM"?this.metadata.setFormat("bitrate",352e3):this.metadata.setFormat("bitrate",this.blockAlign*this.metadata.format.sampleRate*8),await this.tokenizer.ignore(b.chunkSize);break;case"bext":const B=await this.tokenizer.readToken(u.BroadcastAudioExtensionChunk);Object.keys(B).forEach(_=>{this.metadata.addTag("exif","bext."+_,B[_])});const D=b.chunkSize-u.BroadcastAudioExtensionChunk.len;await this.tokenizer.ignore(D);break;case"\0\0\0\0":c(`Ignore padding chunk: RIFF/${b.chunkID} of ${b.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+b.chunkID),await this.tokenizer.ignore(b.chunkSize);break;default:c(`Ignore chunk: RIFF/${b.chunkID} of ${b.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+b.chunkID),await this.tokenizer.ignore(b.chunkSize)}this.header.chunkSize%2===1&&(c("Read odd padding byte"),await this.tokenizer.ignore(1))}}async parseListTag(d){const b=await this.tokenizer.readToken(new t.StringType(4,"binary"));switch(c("pos=%s, parseListTag: chunkID=RIFF/WAVE/LIST/%s",this.tokenizer.position,b),b){case"INFO":return this.parseRiffInfoTags(d.chunkSize-4);case"adtl":default:return this.metadata.addWarning("Ignore chunk: RIFF/WAVE/LIST/"+b),c("Ignoring chunkID=RIFF/WAVE/LIST/"+b),this.tokenizer.ignore(d.chunkSize-4).then()}}async parseRiffInfoTags(d){for(;d>=8;){const b=await this.tokenizer.readToken(r.Header),y=new r.ListInfoTagValue(b),w=await this.tokenizer.readToken(y);this.addTag(b.chunkID,o.stripNulls(w)),d-=8+y.len}if(d!==0)throw Error("Illegal remaining size: "+d)}addTag(d,b){this.metadata.addTag("exif",d,b)}};return WaveParser.WaveParser=m,WaveParser}var WavPackParser={},WavPackToken={},hasRequiredWavPackToken;function requireWavPackToken(){if(hasRequiredWavPackToken)return WavPackToken;hasRequiredWavPackToken=1,Object.defineProperty(WavPackToken,"__esModule",{value:!0}),WavPackToken.WavPack=void 0;const e=requireLib$2(),t=requireFourCC(),i=[6e3,8e3,9600,11025,12e3,16e3,22050,24e3,32e3,44100,48e3,64e3,88200,96e3,192e3,-1];class r{static isBitSet(a,o){return r.getBitAllignedNumber(a,o,1)===1}static getBitAllignedNumber(a,o,s){return a>>>o&4294967295>>>32-s}}return r.BlockHeaderToken={len:32,get:(n,a)=>{const o=e.UINT32_LE.get(n,a+24),s={BlockID:t.FourCcToken.get(n,a),blockSize:e.UINT32_LE.get(n,a+4),version:e.UINT16_LE.get(n,a+8),totalSamples:e.UINT32_LE.get(n,a+12),blockIndex:e.UINT32_LE.get(n,a+16),blockSamples:e.UINT32_LE.get(n,a+20),flags:{bitsPerSample:(1+r.getBitAllignedNumber(o,0,2))*8,isMono:r.isBitSet(o,2),isHybrid:r.isBitSet(o,3),isJointStereo:r.isBitSet(o,4),crossChannel:r.isBitSet(o,5),hybridNoiseShaping:r.isBitSet(o,6),floatingPoint:r.isBitSet(o,7),samplingRate:i[r.getBitAllignedNumber(o,23,4)],isDSD:r.isBitSet(o,31)},crc:new e.Uint8ArrayType(4).get(n,a+28)};return s.flags.isDSD&&(s.totalSamples*=8),s}},r.MetadataIdToken={len:1,get:(n,a)=>({functionId:r.getBitAllignedNumber(n[a],0,6),isOptional:r.isBitSet(n[a],5),isOddSize:r.isBitSet(n[a],6),largeBlock:r.isBitSet(n[a],7)})},WavPackToken.WavPack=r,WavPackToken}var hasRequiredWavPackParser;function requireWavPackParser(){if(hasRequiredWavPackParser)return WavPackParser;hasRequiredWavPackParser=1,Object.defineProperty(WavPackParser,"__esModule",{value:!0}),WavPackParser.WavPackParser=void 0;const e=requireLib$2(),t=requireAPEv2Parser(),i=requireFourCC(),r=requireBasicParser(),n=requireWavPackToken(),o=(0,requireBrowser$3().default)("music-metadata:parser:WavPack");let s=class extends r.BasicParser{async parse(){return this.audioDataSize=0,await this.parseWavPackBlocks(),t.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async parseWavPackBlocks(){do{if(await this.tokenizer.peekToken(i.FourCcToken)!=="wvpk")break;const c=await this.tokenizer.readToken(n.WavPack.BlockHeaderToken);if(c.BlockID!=="wvpk")throw new Error("Invalid WavPack Block-ID");o(`WavPack header blockIndex=${c.blockIndex}, len=${n.WavPack.BlockHeaderToken.len}`),c.blockIndex===0&&!this.metadata.format.container&&(this.metadata.setFormat("container","WavPack"),this.metadata.setFormat("lossless",!c.flags.isHybrid),this.metadata.setFormat("bitsPerSample",c.flags.bitsPerSample),c.flags.isDSD||(this.metadata.setFormat("sampleRate",c.flags.samplingRate),this.metadata.setFormat("duration",c.totalSamples/c.flags.samplingRate)),this.metadata.setFormat("numberOfChannels",c.flags.isMono?1:2),this.metadata.setFormat("numberOfSamples",c.totalSamples),this.metadata.setFormat("codec",c.flags.isDSD?"DSD":"PCM"));const m=c.blockSize-(n.WavPack.BlockHeaderToken.len-8);await(c.blockIndex===0?this.parseMetadataSubBlock(c,m):this.tokenizer.ignore(m)),c.blockSamples>0&&(this.audioDataSize+=c.blockSize)}while(!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=n.WavPack.BlockHeaderToken.len);this.metadata.setFormat("bitrate",this.audioDataSize*8/this.metadata.format.duration)}async parseMetadataSubBlock(u,c){for(;c>n.WavPack.MetadataIdToken.len;){const m=await this.tokenizer.readToken(n.WavPack.MetadataIdToken),f=await this.tokenizer.readNumber(m.largeBlock?e.UINT24_LE:e.UINT8),d=Buffer.alloc(f*2-(m.isOddSize?1:0));switch(await this.tokenizer.readBuffer(d),o(`Metadata Sub-Blocks functionId=0x${m.functionId.toString(16)}, id.largeBlock=${m.largeBlock},data-size=${d.length}`),m.functionId){case 0:break;case 14:o("ID_DSD_BLOCK");const b=1<<d.readUInt8(0),y=u.flags.samplingRate*b*8;if(!u.flags.isDSD)throw new Error("Only expect DSD block if DSD-flag is set");this.metadata.setFormat("sampleRate",y),this.metadata.setFormat("duration",u.totalSamples/y);break;case 36:o("ID_ALT_TRAILER: trailer for non-wav files");break;case 38:this.metadata.setFormat("audioMD5",d);break;case 47:o(`ID_BLOCK_CHECKSUM: checksum=${d.toString("hex")}`);break;default:o(`Ignore unsupported meta-sub-block-id functionId=0x${m.functionId.toString(16)}`);break}c-=n.WavPack.MetadataIdToken.len+(m.largeBlock?e.UINT24_LE.len:e.UINT8.len)+f*2,o(`remainingLength=${c}`),m.isOddSize&&this.tokenizer.ignore(1)}if(c!==0)throw new Error("metadata-sub-block should fit it remaining length")}};return WavPackParser.WavPackParser=s,WavPackParser}var DsfParser={},DsfChunk={},hasRequiredDsfChunk;function requireDsfChunk(){return hasRequiredDsfChunk||(hasRequiredDsfChunk=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FormatChunk=e.ChannelType=e.DsdChunk=e.ChunkHeader=void 0;const t=requireLib$2(),i=requireFourCC();e.ChunkHeader={len:12,get:(r,n)=>({id:i.FourCcToken.get(r,n),size:t.UINT64_LE.get(r,n+4)})},e.DsdChunk={len:16,get:(r,n)=>({fileSize:t.INT64_LE.get(r,n),metadataPointer:t.INT64_LE.get(r,n+8)})},(function(r){r[r.mono=1]="mono",r[r.stereo=2]="stereo",r[r.channels=3]="channels",r[r.quad=4]="quad",r[r["4 channels"]=5]="4 channels",r[r["5 channels"]=6]="5 channels",r[r["5.1 channels"]=7]="5.1 channels"})(e.ChannelType||(e.ChannelType={})),e.FormatChunk={len:40,get:(r,n)=>({formatVersion:t.INT32_LE.get(r,n),formatID:t.INT32_LE.get(r,n+4),channelType:t.INT32_LE.get(r,n+8),channelNum:t.INT32_LE.get(r,n+12),samplingFrequency:t.INT32_LE.get(r,n+16),bitsPerSample:t.INT32_LE.get(r,n+20),sampleCount:t.INT64_LE.get(r,n+24),blockSizePerChannel:t.INT32_LE.get(r,n+32)})}})(DsfChunk)),DsfChunk}var hasRequiredDsfParser;function requireDsfParser(){if(hasRequiredDsfParser)return DsfParser;hasRequiredDsfParser=1,Object.defineProperty(DsfParser,"__esModule",{value:!0}),DsfParser.DsfParser=void 0;const e=requireBrowser$3(),t=requireAbstractID3Parser(),i=requireDsfChunk(),r=requireID3v2Parser(),n=(0,e.default)("music-metadata:parser:DSF");let a=class extends t.AbstractID3Parser{async postId3v2Parse(){const s=this.tokenizer.position,l=await this.tokenizer.readToken(i.ChunkHeader);if(l.id!=="DSD ")throw new Error("Invalid chunk signature");this.metadata.setFormat("container","DSF"),this.metadata.setFormat("lossless",!0);const u=await this.tokenizer.readToken(i.DsdChunk);if(u.metadataPointer===BigInt(0))n("No ID3v2 tag present");else return n(`expect ID3v2 at offset=${u.metadataPointer}`),await this.parseChunks(u.fileSize-l.size),await this.tokenizer.ignore(Number(u.metadataPointer)-this.tokenizer.position-s),new r.ID3v2Parser().parse(this.metadata,this.tokenizer,this.options)}async parseChunks(s){for(;s>=i.ChunkHeader.len;){const l=await this.tokenizer.readToken(i.ChunkHeader);switch(n(`Parsing chunk name=${l.id} size=${l.size}`),l.id){case"fmt ":const u=await this.tokenizer.readToken(i.FormatChunk);this.metadata.setFormat("numberOfChannels",u.channelNum),this.metadata.setFormat("sampleRate",u.samplingFrequency),this.metadata.setFormat("bitsPerSample",u.bitsPerSample),this.metadata.setFormat("numberOfSamples",u.sampleCount),this.metadata.setFormat("duration",Number(u.sampleCount)/u.samplingFrequency);const c=u.bitsPerSample*u.samplingFrequency*u.channelNum;this.metadata.setFormat("bitrate",c);return;default:this.tokenizer.ignore(Number(l.size)-i.ChunkHeader.len);break}s-=l.size}}};return DsfParser.DsfParser=a,DsfParser}var DsdiffParser={},DsdiffToken={},hasRequiredDsdiffToken;function requireDsdiffToken(){if(hasRequiredDsdiffToken)return DsdiffToken;hasRequiredDsdiffToken=1,Object.defineProperty(DsdiffToken,"__esModule",{value:!0}),DsdiffToken.ChunkHeader64=void 0;const e=requireLib$2(),t=requireFourCC();return DsdiffToken.ChunkHeader64={len:12,get:(i,r)=>({chunkID:t.FourCcToken.get(i,r),chunkSize:e.INT64_BE.get(i,r+4)})},DsdiffToken}var hasRequiredDsdiffParser;function requireDsdiffParser(){if(hasRequiredDsdiffParser)return DsdiffParser;hasRequiredDsdiffParser=1,Object.defineProperty(DsdiffParser,"__esModule",{value:!0}),DsdiffParser.DsdiffParser=void 0;const e=requireLib$2(),t=requireBrowser$3(),i=requireCore$2(),r=requireFourCC(),n=requireBasicParser(),a=requireID3v2Parser(),o=requireDsdiffToken(),s=(0,t.default)("music-metadata:parser:aiff");let l=class extends n.BasicParser{async parse(){const c=await this.tokenizer.readToken(o.ChunkHeader64);if(c.chunkID!=="FRM8")throw new Error("Unexpected chunk-ID");const m=(await this.tokenizer.readToken(r.FourCcToken)).trim();switch(m){case"DSD":return this.metadata.setFormat("container",`DSDIFF/${m}`),this.metadata.setFormat("lossless",!0),this.readFmt8Chunks(c.chunkSize-BigInt(r.FourCcToken.len));default:throw Error(`Unsupported DSDIFF type: ${m}`)}}async readFmt8Chunks(c){for(;c>=o.ChunkHeader64.len;){const m=await this.tokenizer.readToken(o.ChunkHeader64);s(`Chunk id=${m.chunkID}`),await this.readData(m),c-=BigInt(o.ChunkHeader64.len)+m.chunkSize}}async readData(c){s(`Reading data of chunk[ID=${c.chunkID}, size=${c.chunkSize}]`);const m=this.tokenizer.position;switch(c.chunkID.trim()){case"FVER":const d=await this.tokenizer.readToken(e.UINT32_LE);s(`DSDIFF version=${d}`);break;case"PROP":if(await this.tokenizer.readToken(r.FourCcToken)!=="SND ")throw new Error("Unexpected PROP-chunk ID");await this.handleSoundPropertyChunks(c.chunkSize-BigInt(r.FourCcToken.len));break;case"ID3":const y=await this.tokenizer.readToken(new e.Uint8ArrayType(Number(c.chunkSize))),w=i.fromBuffer(y);await new a.ID3v2Parser().parse(this.metadata,w,this.options);break;default:s(`Ignore chunk[ID=${c.chunkID}, size=${c.chunkSize}]`);break;case"DSD":this.metadata.setFormat("numberOfSamples",Number(c.chunkSize*BigInt(8)/BigInt(this.metadata.format.numberOfChannels))),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate);break}const f=c.chunkSize-BigInt(this.tokenizer.position-m);f>0&&(s(`After Parsing chunk, remaining ${f} bytes`),await this.tokenizer.ignore(Number(f)))}async handleSoundPropertyChunks(c){for(s(`Parsing sound-property-chunks, remainingSize=${c}`);c>0;){const m=await this.tokenizer.readToken(o.ChunkHeader64);s(`Sound-property-chunk[ID=${m.chunkID}, size=${m.chunkSize}]`);const f=this.tokenizer.position;switch(m.chunkID.trim()){case"FS":const b=await this.tokenizer.readToken(e.UINT32_BE);this.metadata.setFormat("sampleRate",b);break;case"CHNL":const y=await this.tokenizer.readToken(e.UINT16_BE);this.metadata.setFormat("numberOfChannels",y),await this.handleChannelChunks(m.chunkSize-BigInt(e.UINT16_BE.len));break;case"CMPR":const w=(await this.tokenizer.readToken(r.FourCcToken)).trim(),T=await this.tokenizer.readToken(e.UINT8),E=await this.tokenizer.readToken(new e.StringType(T,"ascii"));w==="DSD"&&(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("bitsPerSample",1)),this.metadata.setFormat("codec",`${w} (${E})`);break;case"ABSS":const R=await this.tokenizer.readToken(e.UINT16_BE),C=await this.tokenizer.readToken(e.UINT8),B=await this.tokenizer.readToken(e.UINT8),D=await this.tokenizer.readToken(e.UINT32_BE);s(`ABSS ${R}:${C}:${B}.${D}`);break;case"LSCO":const _=await this.tokenizer.readToken(e.UINT16_BE);s(`LSCO lsConfig=${_}`);break;case"COMT":default:s(`Unknown sound-property-chunk[ID=${m.chunkID}, size=${m.chunkSize}]`),await this.tokenizer.ignore(Number(m.chunkSize))}const d=m.chunkSize-BigInt(this.tokenizer.position-f);d>0&&(s(`After Parsing sound-property-chunk ${m.chunkSize}, remaining ${d} bytes`),await this.tokenizer.ignore(Number(d))),c-=BigInt(o.ChunkHeader64.len)+m.chunkSize,s(`Parsing sound-property-chunks, remainingSize=${c}`)}if(this.metadata.format.lossless&&this.metadata.format.sampleRate&&this.metadata.format.numberOfChannels&&this.metadata.format.bitsPerSample){const m=this.metadata.format.sampleRate*this.metadata.format.numberOfChannels*this.metadata.format.bitsPerSample;this.metadata.setFormat("bitrate",m)}}async handleChannelChunks(c){s(`Parsing channel-chunks, remainingSize=${c}`);const m=[];for(;c>=r.FourCcToken.len;){const f=await this.tokenizer.readToken(r.FourCcToken);s(`Channel[ID=${f}]`),m.push(f),c-=BigInt(r.FourCcToken.len)}return s(`Channels: ${m.join(", ")}`),m}};return DsdiffParser.DsdiffParser=l,DsdiffParser}var MatroskaParser={},MatroskaDtd={},hasRequiredMatroskaDtd;function requireMatroskaDtd(){if(hasRequiredMatroskaDtd)return MatroskaDtd;hasRequiredMatroskaDtd=1,Object.defineProperty(MatroskaDtd,"__esModule",{value:!0}),MatroskaDtd.elements=void 0;const e=requireTypes();return MatroskaDtd.elements={440786851:{name:"ebml",container:{17030:{name:"ebmlVersion",value:e.DataType.uint},17143:{name:"ebmlReadVersion",value:e.DataType.uint},17138:{name:"ebmlMaxIDWidth",value:e.DataType.uint},17139:{name:"ebmlMaxSizeWidth",value:e.DataType.uint},17026:{name:"docType",value:e.DataType.string},17031:{name:"docTypeVersion",value:e.DataType.uint},17029:{name:"docTypeReadVersion",value:e.DataType.uint}}},408125543:{name:"segment",container:{290298740:{name:"seekHead",container:{19899:{name:"seek",container:{21419:{name:"seekId",value:e.DataType.binary},21420:{name:"seekPosition",value:e.DataType.uint}}}}},357149030:{name:"info",container:{29604:{name:"uid",value:e.DataType.uid},29572:{name:"filename",value:e.DataType.string},3979555:{name:"prevUID",value:e.DataType.uid},3965867:{name:"prevFilename",value:e.DataType.string},4110627:{name:"nextUID",value:e.DataType.uid},4096955:{name:"nextFilename",value:e.DataType.string},2807729:{name:"timecodeScale",value:e.DataType.uint},17545:{name:"duration",value:e.DataType.float},17505:{name:"dateUTC",value:e.DataType.uint},31657:{name:"title",value:e.DataType.string},19840:{name:"muxingApp",value:e.DataType.string},22337:{name:"writingApp",value:e.DataType.string}}},524531317:{name:"cluster",multiple:!0,container:{231:{name:"timecode",value:e.DataType.uid},163:{name:"unknown",value:e.DataType.binary},167:{name:"position",value:e.DataType.uid},171:{name:"prevSize",value:e.DataType.uid}}},374648427:{name:"tracks",container:{174:{name:"entries",multiple:!0,container:{215:{name:"trackNumber",value:e.DataType.uint},29637:{name:"uid",value:e.DataType.uid},131:{name:"trackType",value:e.DataType.uint},185:{name:"flagEnabled",value:e.DataType.bool},136:{name:"flagDefault",value:e.DataType.bool},21930:{name:"flagForced",value:e.DataType.bool},156:{name:"flagLacing",value:e.DataType.bool},28135:{name:"minCache",value:e.DataType.uint},28136:{name:"maxCache",value:e.DataType.uint},2352003:{name:"defaultDuration",value:e.DataType.uint},2306383:{name:"timecodeScale",value:e.DataType.float},21358:{name:"name",value:e.DataType.string},2274716:{name:"language",value:e.DataType.string},134:{name:"codecID",value:e.DataType.string},25506:{name:"codecPrivate",value:e.DataType.binary},2459272:{name:"codecName",value:e.DataType.string},3839639:{name:"codecSettings",value:e.DataType.string},3883072:{name:"codecInfoUrl",value:e.DataType.string},2536e3:{name:"codecDownloadUrl",value:e.DataType.string},170:{name:"codecDecodeAll",value:e.DataType.bool},28587:{name:"trackOverlay",value:e.DataType.uint},224:{name:"video",container:{154:{name:"flagInterlaced",value:e.DataType.bool},21432:{name:"stereoMode",value:e.DataType.uint},176:{name:"pixelWidth",value:e.DataType.uint},186:{name:"pixelHeight",value:e.DataType.uint},21680:{name:"displayWidth",value:e.DataType.uint},21690:{name:"displayHeight",value:e.DataType.uint},21683:{name:"aspectRatioType",value:e.DataType.uint},3061028:{name:"colourSpace",value:e.DataType.uint},3126563:{name:"gammaValue",value:e.DataType.float}}},225:{name:"audio",container:{181:{name:"samplingFrequency",value:e.DataType.float},30901:{name:"outputSamplingFrequency",value:e.DataType.float},159:{name:"channels",value:e.DataType.uint},148:{name:"channels",value:e.DataType.uint},32123:{name:"channelPositions",value:e.DataType.binary},25188:{name:"bitDepth",value:e.DataType.uint}}},28032:{name:"contentEncodings",container:{25152:{name:"contentEncoding",container:{20529:{name:"order",value:e.DataType.uint},20530:{name:"scope",value:e.DataType.bool},20531:{name:"type",value:e.DataType.uint},20532:{name:"contentEncoding",container:{16980:{name:"contentCompAlgo",value:e.DataType.uint},16981:{name:"contentCompSettings",value:e.DataType.binary}}},20533:{name:"contentEncoding",container:{18401:{name:"contentEncAlgo",value:e.DataType.uint},18402:{name:"contentEncKeyID",value:e.DataType.binary},18403:{name:"contentSignature ",value:e.DataType.binary},18404:{name:"ContentSigKeyID  ",value:e.DataType.binary},18405:{name:"contentSigAlgo ",value:e.DataType.uint},18406:{name:"contentSigHashAlgo ",value:e.DataType.uint}}},25188:{name:"bitDepth",value:e.DataType.uint}}}}}}}}},475249515:{name:"cues",container:{187:{name:"cuePoint",container:{179:{name:"cueTime",value:e.DataType.uid},183:{name:"positions",container:{247:{name:"track",value:e.DataType.uint},241:{name:"clusterPosition",value:e.DataType.uint},21368:{name:"blockNumber",value:e.DataType.uint},234:{name:"codecState",value:e.DataType.uint},219:{name:"reference",container:{150:{name:"time",value:e.DataType.uint},151:{name:"cluster",value:e.DataType.uint},21343:{name:"number",value:e.DataType.uint},235:{name:"codecState",value:e.DataType.uint}}},240:{name:"relativePosition",value:e.DataType.uint}}}}}}},423732329:{name:"attachments",container:{24999:{name:"attachedFiles",multiple:!0,container:{18046:{name:"description",value:e.DataType.string},18030:{name:"name",value:e.DataType.string},18016:{name:"mimeType",value:e.DataType.string},18012:{name:"data",value:e.DataType.binary},18094:{name:"uid",value:e.DataType.uid}}}}},272869232:{name:"chapters",container:{17849:{name:"editionEntry",container:{182:{name:"chapterAtom",container:{29636:{name:"uid",value:e.DataType.uid},145:{name:"timeStart",value:e.DataType.uint},146:{name:"timeEnd",value:e.DataType.uid},152:{name:"hidden",value:e.DataType.bool},17816:{name:"enabled",value:e.DataType.uid},143:{name:"track",container:{137:{name:"trackNumber",value:e.DataType.uid},128:{name:"display",container:{133:{name:"string",value:e.DataType.string},17276:{name:"language ",value:e.DataType.string},17278:{name:"country ",value:e.DataType.string}}}}}}}}}}},307544935:{name:"tags",container:{29555:{name:"tag",multiple:!0,container:{25536:{name:"target",container:{25541:{name:"tagTrackUID",value:e.DataType.uid},25540:{name:"tagChapterUID",value:e.DataType.uint},25542:{name:"tagAttachmentUID",value:e.DataType.uid},25546:{name:"targetType",value:e.DataType.string},26826:{name:"targetTypeValue",value:e.DataType.uint},25545:{name:"tagEditionUID",value:e.DataType.uid}}},26568:{name:"simpleTags",multiple:!0,container:{17827:{name:"name",value:e.DataType.string},17543:{name:"string",value:e.DataType.string},17541:{name:"binary",value:e.DataType.binary},17530:{name:"language",value:e.DataType.string},17531:{name:"languageIETF",value:e.DataType.string},17540:{name:"default",value:e.DataType.bool}}}}}}}}}},MatroskaDtd}var hasRequiredMatroskaParser;function requireMatroskaParser(){if(hasRequiredMatroskaParser)return MatroskaParser;hasRequiredMatroskaParser=1,Object.defineProperty(MatroskaParser,"__esModule",{value:!0}),MatroskaParser.MatroskaParser=void 0;const e=requireLib$2(),t=requireBrowser$3(),i=requireBasicParser(),r=requireTypes(),n=requireMatroskaDtd(),a=(0,t.default)("music-metadata:parser:matroska");let o=class extends i.BasicParser{constructor(){super(),this.padding=0,this.parserMap=new Map,this.ebmlMaxIDLength=4,this.ebmlMaxSizeLength=8,this.parserMap.set(r.DataType.uint,l=>this.readUint(l)),this.parserMap.set(r.DataType.string,l=>this.readString(l)),this.parserMap.set(r.DataType.binary,l=>this.readBuffer(l)),this.parserMap.set(r.DataType.uid,async l=>await this.readUint(l)===1),this.parserMap.set(r.DataType.bool,l=>this.readFlag(l)),this.parserMap.set(r.DataType.float,l=>this.readFloat(l))}init(l,u,c){return super.init(l,u,c),this}async parse(){const l=await this.parseContainer(n.elements,this.tokenizer.fileInfo.size,[]);if(this.metadata.setFormat("container",`EBML/${l.ebml.docType}`),l.segment){const u=l.segment.info;if(u){const m=u.timecodeScale?u.timecodeScale:1e6;if(typeof u.duration=="number"){const f=u.duration*m/1e9;this.addTag("segment:title",u.title),this.metadata.setFormat("duration",f)}}const c=l.segment.tracks;if(c&&c.entries){c.entries.forEach(f=>{const d={codecName:f.codecID.replace("A_","").replace("V_",""),codecSettings:f.codecSettings,flagDefault:f.flagDefault,flagLacing:f.flagLacing,flagEnabled:f.flagEnabled,language:f.language,name:f.name,type:f.trackType,audio:f.audio,video:f.video};this.metadata.addStreamInfo(d)});const m=c.entries.filter(f=>f.trackType===r.TrackType.audio.valueOf()).reduce((f,d)=>!f||!f.flagDefault&&d.flagDefault||d.trackNumber&&d.trackNumber<f.trackNumber?d:f,null);m&&(this.metadata.setFormat("codec",m.codecID.replace("A_","")),this.metadata.setFormat("sampleRate",m.audio.samplingFrequency),this.metadata.setFormat("numberOfChannels",m.audio.channels)),l.segment.tags&&l.segment.tags.tag.forEach(f=>{const d=f.target,b=d?.targetTypeValue?r.TargetType[d.targetTypeValue]:d?.targetType?d.targetType:"track";f.simpleTags.forEach(y=>{const w=y.string?y.string:y.binary;this.addTag(`${b}:${y.name}`,w)})}),l.segment.attachments&&l.segment.attachments.attachedFiles.filter(f=>f.mimeType.startsWith("image/")).map(f=>({data:f.data,format:f.mimeType,description:f.description,name:f.name})).forEach(f=>{this.addTag("picture",f)})}}}async parseContainer(l,u,c){const m={};for(;this.tokenizer.position<u;){let f;try{f=await this.readElement()}catch(b){if(b.message==="End-Of-Stream")break;throw b}const d=l[f.id];if(d)if(a(`Element: name=${d.name}, container=${!!d.container}`),d.container){const b=await this.parseContainer(d.container,f.len>=0?this.tokenizer.position+f.len:-1,c.concat([d.name]));d.multiple?(m[d.name]||(m[d.name]=[]),m[d.name].push(b)):m[d.name]=b}else m[d.name]=await this.parserMap.get(d.value)(f);else switch(f.id){case 236:this.padding+=f.len,await this.tokenizer.ignore(f.len);break;default:a(`parseEbml: path=${c.join("/")}, unknown element: id=${f.id.toString(16)}`),this.padding+=f.len,await this.tokenizer.ignore(f.len)}}return m}async readVintData(l){const u=await this.tokenizer.peekNumber(e.UINT8);let c=128,m=1;for(;(u&c)===0;){if(m>l)throw new Error("VINT value exceeding maximum size");++m,c>>=1}const f=Buffer.alloc(m);return await this.tokenizer.readBuffer(f),f}async readElement(){const l=await this.readVintData(this.ebmlMaxIDLength),u=await this.readVintData(this.ebmlMaxSizeLength);u[0]^=128>>u.length-1;const c=Math.min(6,u.length);return{id:l.readUIntBE(0,l.length),len:u.readUIntBE(u.length-c,c)}}isMaxValue(l){if(l.length===this.ebmlMaxSizeLength){for(let u=1;u<this.ebmlMaxSizeLength;++u)if(l[u]!==255)return!1;return!0}return!1}async readFloat(l){switch(l.len){case 0:return 0;case 4:return this.tokenizer.readNumber(e.Float32_BE);case 8:return this.tokenizer.readNumber(e.Float64_BE);case 10:return this.tokenizer.readNumber(e.Float64_BE);default:throw new Error(`Invalid IEEE-754 float length: ${l.len}`)}}async readFlag(l){return await this.readUint(l)===1}async readUint(l){const u=await this.readBuffer(l),c=Math.min(6,l.len);return u.readUIntBE(l.len-c,c)}async readString(l){return(await this.tokenizer.readToken(new e.StringType(l.len,"utf-8"))).replace(/\00.*$/g,"")}async readBuffer(l){const u=Buffer.alloc(l.len);return await this.tokenizer.readBuffer(u),u}addTag(l,u){this.metadata.addTag("matroska",l,u)}};return MatroskaParser.MatroskaParser=o,MatroskaParser}var hasRequiredParserFactory;function requireParserFactory(){if(hasRequiredParserFactory)return ParserFactory;hasRequiredParserFactory=1,Object.defineProperty(ParserFactory,"__esModule",{value:!0}),ParserFactory.ParserFactory=ParserFactory.parseHttpContentType=void 0;const e=requireCore$1(),t=requireContentType(),i=requireMediaTyper(),r=requireBrowser$3(),n=requireMetadataCollector(),a=requireAiffParser(),o=requireAPEv2Parser(),s=requireAsfParser(),l=requireFlacParser(),u=requireMP4Parser(),c=requireMpegParser(),m=requireMusepack(),f=requireOggParser(),d=requireWaveParser(),b=requireWavPackParser(),y=requireDsfParser(),w=requireDsdiffParser(),T=requireMatroskaParser(),E=(0,r.default)("music-metadata:parser:factory");function R(D){const _=t.parse(D),x=i.parse(_.type);return{type:x.type,subtype:x.subtype,suffix:x.suffix,parameters:_.parameters}}ParserFactory.parseHttpContentType=R;async function C(D,_,x={}){const ee=await B.loadParser(_),N=new n.MetadataCollector(x);return await ee.init(N,D,x).parse(),N.toCommonMetadata()}let B=class qe{static async parseOnContentType(_,x){const{mimeType:ee,path:N,url:U}=await _.fileInfo,Z=qe.getParserIdForMimeType(ee)||qe.getParserIdForExtension(N)||qe.getParserIdForExtension(U);return Z||E("No parser found for MIME-type / extension: "+ee),this.parse(_,Z,x)}static async parse(_,x,ee){if(!x){E("Guess parser on content...");const N=Buffer.alloc(4100);if(await _.peekBuffer(N,{mayBeLess:!0}),_.fileInfo.path&&(x=this.getParserIdForExtension(_.fileInfo.path)),!x){const U=await e.fromBuffer(N);if(!U)throw new Error("Failed to determine audio format");if(E(`Guessed file type is mime=${U.mime}, extension=${U.ext}`),x=qe.getParserIdForMimeType(U.mime),!x)throw new Error("Guessed MIME-type not supported: "+U.mime)}}return C(_,x,ee)}static getParserIdForExtension(_){if(!_)return;switch(this.getExtension(_).toLocaleLowerCase()||_){case".mp2":case".mp3":case".m2a":case".aac":return"mpeg";case".ape":return"apev2";case".mp4":case".m4a":case".m4b":case".m4pa":case".m4v":case".m4r":case".3gp":return"mp4";case".wma":case".wmv":case".asf":return"asf";case".flac":return"flac";case".ogg":case".ogv":case".oga":case".ogm":case".ogx":case".opus":case".spx":return"ogg";case".aif":case".aiff":case".aifc":return"aiff";case".wav":case".bwf":return"riff";case".wv":case".wvp":return"wavpack";case".mpc":return"musepack";case".dsf":return"dsf";case".dff":return"dsdiff";case".mka":case".mkv":case".mk3d":case".mks":case".webm":return"matroska"}}static async loadParser(_){switch(_){case"aiff":return new a.AIFFParser;case"adts":case"mpeg":return new c.MpegParser;case"apev2":return new o.APEv2Parser;case"asf":return new s.AsfParser;case"dsf":return new y.DsfParser;case"dsdiff":return new w.DsdiffParser;case"flac":return new l.FlacParser;case"mp4":return new u.MP4Parser;case"musepack":return new m.default;case"ogg":return new f.OggParser;case"riff":return new d.WaveParser;case"wavpack":return new b.WavPackParser;case"matroska":return new T.MatroskaParser;default:throw new Error(`Unknown parser type: ${_}`)}}static getExtension(_){const x=_.lastIndexOf(".");return x===-1?"":_.slice(x)}static getParserIdForMimeType(_){let x;try{x=R(_)}catch{E(`Invalid HTTP Content-Type header value: ${_}`);return}const ee=x.subtype.indexOf("x-")===0?x.subtype.substring(2):x.subtype;switch(x.type){case"audio":switch(ee){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"adts";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf"}break;case"video":switch(ee){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(ee){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}break}}};return ParserFactory.ParserFactory=B,ParserFactory}var RandomUint8ArrayReader={},hasRequiredRandomUint8ArrayReader;function requireRandomUint8ArrayReader(){if(hasRequiredRandomUint8ArrayReader)return RandomUint8ArrayReader;hasRequiredRandomUint8ArrayReader=1,Object.defineProperty(RandomUint8ArrayReader,"__esModule",{value:!0}),RandomUint8ArrayReader.RandomUint8ArrayReader=void 0;let e=class{constructor(i){this.uint8Array=i,this.fileSize=i.length}async randomRead(i,r,n,a){return i.set(this.uint8Array.subarray(a,a+n),r),n}};return RandomUint8ArrayReader.RandomUint8ArrayReader=e,RandomUint8ArrayReader}var Lyrics3={},hasRequiredLyrics3;function requireLyrics3(){return hasRequiredLyrics3||(hasRequiredLyrics3=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getLyricsHeaderLength=e.endTag2=void 0,e.endTag2="LYRICS200";async function t(i){if(i.fileSize>=143){const r=Buffer.alloc(15);await i.randomRead(r,0,r.length,i.fileSize-143);const n=r.toString("binary");if(n.substr(6)===e.endTag2)return parseInt(n.substr(0,6),10)+15}return 0}e.getLyricsHeaderLength=t})(Lyrics3)),Lyrics3}var hasRequiredCore;function requireCore(){if(hasRequiredCore)return core$2;hasRequiredCore=1,Object.defineProperty(core$2,"__esModule",{value:!0}),core$2.scanAppendingHeaders=core$2.selectCover=core$2.ratingToStars=core$2.orderTags=core$2.parseFromTokenizer=core$2.parseBuffer=core$2.parseStream=void 0;const e=requireCore$2(),t=requireParserFactory(),i=requireRandomUint8ArrayReader(),r=requireAPEv2Parser(),n=requireID3v1Parser(),a=requireLyrics3();function o(d,b,y={}){return l(e.fromStream(d,typeof b=="string"?{mimeType:b}:b),y)}core$2.parseStream=o;async function s(d,b,y={}){const w=new i.RandomUint8ArrayReader(d);await f(w,y);const T=e.fromBuffer(d,typeof b=="string"?{mimeType:b}:b);return l(T,y)}core$2.parseBuffer=s;function l(d,b){return t.ParserFactory.parseOnContentType(d,b)}core$2.parseFromTokenizer=l;function u(d){const b={};for(const y of d)(b[y.id]=b[y.id]||[]).push(y.value);return b}core$2.orderTags=u;function c(d){return d===void 0?0:1+Math.round(d*4)}core$2.ratingToStars=c;function m(d){return d?d.reduce((b,y)=>y.name&&y.name.toLowerCase()in["front","cover","cover (front)"]?y:b):null}core$2.selectCover=m;async function f(d,b={}){let y=d.fileSize;if(await(0,n.hasID3v1Header)(d)){y-=128;const w=await(0,a.getLyricsHeaderLength)(d);y-=w}b.apeHeader=await r.APEv2Parser.findApeFooterOffset(d,y)}return core$2.scanAppendingHeaders=f,core$2}var lib={},browser$2={exports:{}},stream={exports:{}},buffer={},base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=s,base64Js.toByteArray=u,base64Js.fromByteArray=f;for(var e=[],t=[],i=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,a=r.length;n<a;++n)e[n]=r[n],t[r.charCodeAt(n)]=n;t[45]=62,t[95]=63;function o(d){var b=d.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=d.indexOf("=");y===-1&&(y=b);var w=y===b?0:4-y%4;return[y,w]}function s(d){var b=o(d),y=b[0],w=b[1];return(y+w)*3/4-w}function l(d,b,y){return(b+y)*3/4-y}function u(d){var b,y=o(d),w=y[0],T=y[1],E=new i(l(d,w,T)),R=0,C=T>0?w-4:w,B;for(B=0;B<C;B+=4)b=t[d.charCodeAt(B)]<<18|t[d.charCodeAt(B+1)]<<12|t[d.charCodeAt(B+2)]<<6|t[d.charCodeAt(B+3)],E[R++]=b>>16&255,E[R++]=b>>8&255,E[R++]=b&255;return T===2&&(b=t[d.charCodeAt(B)]<<2|t[d.charCodeAt(B+1)]>>4,E[R++]=b&255),T===1&&(b=t[d.charCodeAt(B)]<<10|t[d.charCodeAt(B+1)]<<4|t[d.charCodeAt(B+2)]>>2,E[R++]=b>>8&255,E[R++]=b&255),E}function c(d){return e[d>>18&63]+e[d>>12&63]+e[d>>6&63]+e[d&63]}function m(d,b,y){for(var w,T=[],E=b;E<y;E+=3)w=(d[E]<<16&16711680)+(d[E+1]<<8&65280)+(d[E+2]&255),T.push(c(w));return T.join("")}function f(d){for(var b,y=d.length,w=y%3,T=[],E=16383,R=0,C=y-w;R<C;R+=E)T.push(m(d,R,R+E>C?C:R+E));return w===1?(b=d[y-1],T.push(e[b>>2]+e[b<<4&63]+"==")):w===2&&(b=(d[y-2]<<8)+d[y-1],T.push(e[b>>10]+e[b>>4&63]+e[b<<2&63]+"=")),T.join("")}return base64Js}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hasRequiredBuffer;function requireBuffer(){return hasRequiredBuffer||(hasRequiredBuffer=1,(function(e){const t=requireBase64Js(),i=requireIeee754(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=E,e.INSPECT_MAX_BYTES=50;const n=2147483647;e.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=a(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const S=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(S,h),S.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(S){if(S>n)throw new RangeError('The value "'+S+'" is invalid for option "size"');const h=new Uint8Array(S);return Object.setPrototypeOf(h,s.prototype),h}function s(S,h,g){if(typeof S=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(S)}return l(S,h,g)}s.poolSize=8192;function l(S,h,g){if(typeof S=="string")return f(S,h);if(ArrayBuffer.isView(S))return b(S);if(S==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S);if(X(S,ArrayBuffer)||S&&X(S.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(X(S,SharedArrayBuffer)||S&&X(S.buffer,SharedArrayBuffer)))return y(S,h,g);if(typeof S=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const A=S.valueOf&&S.valueOf();if(A!=null&&A!==S)return s.from(A,h,g);const L=w(S);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof S[Symbol.toPrimitive]=="function")return s.from(S[Symbol.toPrimitive]("string"),h,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S)}s.from=function(S,h,g){return l(S,h,g)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function u(S){if(typeof S!="number")throw new TypeError('"size" argument must be of type number');if(S<0)throw new RangeError('The value "'+S+'" is invalid for option "size"')}function c(S,h,g){return u(S),S<=0?o(S):h!==void 0?typeof g=="string"?o(S).fill(h,g):o(S).fill(h):o(S)}s.alloc=function(S,h,g){return c(S,h,g)};function m(S){return u(S),o(S<0?0:T(S)|0)}s.allocUnsafe=function(S){return m(S)},s.allocUnsafeSlow=function(S){return m(S)};function f(S,h){if((typeof h!="string"||h==="")&&(h="utf8"),!s.isEncoding(h))throw new TypeError("Unknown encoding: "+h);const g=R(S,h)|0;let A=o(g);const L=A.write(S,h);return L!==g&&(A=A.slice(0,L)),A}function d(S){const h=S.length<0?0:T(S.length)|0,g=o(h);for(let A=0;A<h;A+=1)g[A]=S[A]&255;return g}function b(S){if(X(S,Uint8Array)){const h=new Uint8Array(S);return y(h.buffer,h.byteOffset,h.byteLength)}return d(S)}function y(S,h,g){if(h<0||S.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(S.byteLength<h+(g||0))throw new RangeError('"length" is outside of buffer bounds');let A;return h===void 0&&g===void 0?A=new Uint8Array(S):g===void 0?A=new Uint8Array(S,h):A=new Uint8Array(S,h,g),Object.setPrototypeOf(A,s.prototype),A}function w(S){if(s.isBuffer(S)){const h=T(S.length)|0,g=o(h);return g.length===0||S.copy(g,0,0,h),g}if(S.length!==void 0)return typeof S.length!="number"||te(S.length)?o(0):d(S);if(S.type==="Buffer"&&Array.isArray(S.data))return d(S.data)}function T(S){if(S>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return S|0}function E(S){return+S!=S&&(S=0),s.alloc(+S)}s.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==s.prototype},s.compare=function(h,g){if(X(h,Uint8Array)&&(h=s.from(h,h.offset,h.byteLength)),X(g,Uint8Array)&&(g=s.from(g,g.offset,g.byteLength)),!s.isBuffer(h)||!s.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===g)return 0;let A=h.length,L=g.length;for(let G=0,ne=Math.min(A,L);G<ne;++G)if(h[G]!==g[G]){A=h[G],L=g[G];break}return A<L?-1:L<A?1:0},s.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(h,g){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return s.alloc(0);let A;if(g===void 0)for(g=0,A=0;A<h.length;++A)g+=h[A].length;const L=s.allocUnsafe(g);let G=0;for(A=0;A<h.length;++A){let ne=h[A];if(X(ne,Uint8Array))G+ne.length>L.length?(s.isBuffer(ne)||(ne=s.from(ne)),ne.copy(L,G)):Uint8Array.prototype.set.call(L,ne,G);else if(s.isBuffer(ne))ne.copy(L,G);else throw new TypeError('"list" argument must be an Array of Buffers');G+=ne.length}return L};function R(S,h){if(s.isBuffer(S))return S.length;if(ArrayBuffer.isView(S)||X(S,ArrayBuffer))return S.byteLength;if(typeof S!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof S);const g=S.length,A=arguments.length>2&&arguments[2]===!0;if(!A&&g===0)return 0;let L=!1;for(;;)switch(h){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return j(S).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return $(S).length;default:if(L)return A?-1:j(S).length;h=(""+h).toLowerCase(),L=!0}}s.byteLength=R;function C(S,h,g){let A=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,h>>>=0,g<=h))return"";for(S||(S="utf8");;)switch(S){case"hex":return he(this,h,g);case"utf8":case"utf-8":return se(this,h,g);case"ascii":return ge(this,h,g);case"latin1":case"binary":return Y(this,h,g);case"base64":return H(this,h,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,h,g);default:if(A)throw new TypeError("Unknown encoding: "+S);S=(S+"").toLowerCase(),A=!0}}s.prototype._isBuffer=!0;function B(S,h,g){const A=S[h];S[h]=S[g],S[g]=A}s.prototype.swap16=function(){const h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let g=0;g<h;g+=2)B(this,g,g+1);return this},s.prototype.swap32=function(){const h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let g=0;g<h;g+=4)B(this,g,g+3),B(this,g+1,g+2);return this},s.prototype.swap64=function(){const h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let g=0;g<h;g+=8)B(this,g,g+7),B(this,g+1,g+6),B(this,g+2,g+5),B(this,g+3,g+4);return this},s.prototype.toString=function(){const h=this.length;return h===0?"":arguments.length===0?se(this,0,h):C.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(h){if(!s.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:s.compare(this,h)===0},s.prototype.inspect=function(){let h="";const g=e.INSPECT_MAX_BYTES;return h=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(h+=" ... "),"<Buffer "+h+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(h,g,A,L,G){if(X(h,Uint8Array)&&(h=s.from(h,h.offset,h.byteLength)),!s.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(g===void 0&&(g=0),A===void 0&&(A=h?h.length:0),L===void 0&&(L=0),G===void 0&&(G=this.length),g<0||A>h.length||L<0||G>this.length)throw new RangeError("out of range index");if(L>=G&&g>=A)return 0;if(L>=G)return-1;if(g>=A)return 1;if(g>>>=0,A>>>=0,L>>>=0,G>>>=0,this===h)return 0;let ne=G-L,ve=A-g;const Se=Math.min(ne,ve),Ee=this.slice(L,G),Ie=h.slice(g,A);for(let xe=0;xe<Se;++xe)if(Ee[xe]!==Ie[xe]){ne=Ee[xe],ve=Ie[xe];break}return ne<ve?-1:ve<ne?1:0};function D(S,h,g,A,L){if(S.length===0)return-1;if(typeof g=="string"?(A=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,te(g)&&(g=L?0:S.length-1),g<0&&(g=S.length+g),g>=S.length){if(L)return-1;g=S.length-1}else if(g<0)if(L)g=0;else return-1;if(typeof h=="string"&&(h=s.from(h,A)),s.isBuffer(h))return h.length===0?-1:_(S,h,g,A,L);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(S,h,g):Uint8Array.prototype.lastIndexOf.call(S,h,g):_(S,[h],g,A,L);throw new TypeError("val must be string, number or Buffer")}function _(S,h,g,A,L){let G=1,ne=S.length,ve=h.length;if(A!==void 0&&(A=String(A).toLowerCase(),A==="ucs2"||A==="ucs-2"||A==="utf16le"||A==="utf-16le")){if(S.length<2||h.length<2)return-1;G=2,ne/=2,ve/=2,g/=2}function Se(Ie,xe){return G===1?Ie[xe]:Ie.readUInt16BE(xe*G)}let Ee;if(L){let Ie=-1;for(Ee=g;Ee<ne;Ee++)if(Se(S,Ee)===Se(h,Ie===-1?0:Ee-Ie)){if(Ie===-1&&(Ie=Ee),Ee-Ie+1===ve)return Ie*G}else Ie!==-1&&(Ee-=Ee-Ie),Ie=-1}else for(g+ve>ne&&(g=ne-ve),Ee=g;Ee>=0;Ee--){let Ie=!0;for(let xe=0;xe<ve;xe++)if(Se(S,Ee+xe)!==Se(h,xe)){Ie=!1;break}if(Ie)return Ee}return-1}s.prototype.includes=function(h,g,A){return this.indexOf(h,g,A)!==-1},s.prototype.indexOf=function(h,g,A){return D(this,h,g,A,!0)},s.prototype.lastIndexOf=function(h,g,A){return D(this,h,g,A,!1)};function x(S,h,g,A){g=Number(g)||0;const L=S.length-g;A?(A=Number(A),A>L&&(A=L)):A=L;const G=h.length;A>G/2&&(A=G/2);let ne;for(ne=0;ne<A;++ne){const ve=parseInt(h.substr(ne*2,2),16);if(te(ve))return ne;S[g+ne]=ve}return ne}function ee(S,h,g,A){return V(j(h,S.length-g),S,g,A)}function N(S,h,g,A){return V(K(h),S,g,A)}function U(S,h,g,A){return V($(h),S,g,A)}function Z(S,h,g,A){return V(M(h,S.length-g),S,g,A)}s.prototype.write=function(h,g,A,L){if(g===void 0)L="utf8",A=this.length,g=0;else if(A===void 0&&typeof g=="string")L=g,A=this.length,g=0;else if(isFinite(g))g=g>>>0,isFinite(A)?(A=A>>>0,L===void 0&&(L="utf8")):(L=A,A=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const G=this.length-g;if((A===void 0||A>G)&&(A=G),h.length>0&&(A<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let ne=!1;for(;;)switch(L){case"hex":return x(this,h,g,A);case"utf8":case"utf-8":return ee(this,h,g,A);case"ascii":case"latin1":case"binary":return N(this,h,g,A);case"base64":return U(this,h,g,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,h,g,A);default:if(ne)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),ne=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function H(S,h,g){return h===0&&g===S.length?t.fromByteArray(S):t.fromByteArray(S.slice(h,g))}function se(S,h,g){g=Math.min(S.length,g);const A=[];let L=h;for(;L<g;){const G=S[L];let ne=null,ve=G>239?4:G>223?3:G>191?2:1;if(L+ve<=g){let Se,Ee,Ie,xe;switch(ve){case 1:G<128&&(ne=G);break;case 2:Se=S[L+1],(Se&192)===128&&(xe=(G&31)<<6|Se&63,xe>127&&(ne=xe));break;case 3:Se=S[L+1],Ee=S[L+2],(Se&192)===128&&(Ee&192)===128&&(xe=(G&15)<<12|(Se&63)<<6|Ee&63,xe>2047&&(xe<55296||xe>57343)&&(ne=xe));break;case 4:Se=S[L+1],Ee=S[L+2],Ie=S[L+3],(Se&192)===128&&(Ee&192)===128&&(Ie&192)===128&&(xe=(G&15)<<18|(Se&63)<<12|(Ee&63)<<6|Ie&63,xe>65535&&xe<1114112&&(ne=xe))}}ne===null?(ne=65533,ve=1):ne>65535&&(ne-=65536,A.push(ne>>>10&1023|55296),ne=56320|ne&1023),A.push(ne),L+=ve}return le(A)}const fe=4096;function le(S){const h=S.length;if(h<=fe)return String.fromCharCode.apply(String,S);let g="",A=0;for(;A<h;)g+=String.fromCharCode.apply(String,S.slice(A,A+=fe));return g}function ge(S,h,g){let A="";g=Math.min(S.length,g);for(let L=h;L<g;++L)A+=String.fromCharCode(S[L]&127);return A}function Y(S,h,g){let A="";g=Math.min(S.length,g);for(let L=h;L<g;++L)A+=String.fromCharCode(S[L]);return A}function he(S,h,g){const A=S.length;(!h||h<0)&&(h=0),(!g||g<0||g>A)&&(g=A);let L="";for(let G=h;G<g;++G)L+=pe[S[G]];return L}function q(S,h,g){const A=S.slice(h,g);let L="";for(let G=0;G<A.length-1;G+=2)L+=String.fromCharCode(A[G]+A[G+1]*256);return L}s.prototype.slice=function(h,g){const A=this.length;h=~~h,g=g===void 0?A:~~g,h<0?(h+=A,h<0&&(h=0)):h>A&&(h=A),g<0?(g+=A,g<0&&(g=0)):g>A&&(g=A),g<h&&(g=h);const L=this.subarray(h,g);return Object.setPrototypeOf(L,s.prototype),L};function Q(S,h,g){if(S%1!==0||S<0)throw new RangeError("offset is not uint");if(S+h>g)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(h,g,A){h=h>>>0,g=g>>>0,A||Q(h,g,this.length);let L=this[h],G=1,ne=0;for(;++ne<g&&(G*=256);)L+=this[h+ne]*G;return L},s.prototype.readUintBE=s.prototype.readUIntBE=function(h,g,A){h=h>>>0,g=g>>>0,A||Q(h,g,this.length);let L=this[h+--g],G=1;for(;g>0&&(G*=256);)L+=this[h+--g]*G;return L},s.prototype.readUint8=s.prototype.readUInt8=function(h,g){return h=h>>>0,g||Q(h,1,this.length),this[h]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(h,g){return h=h>>>0,g||Q(h,2,this.length),this[h]|this[h+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(h,g){return h=h>>>0,g||Q(h,2,this.length),this[h]<<8|this[h+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(h,g){return h=h>>>0,g||Q(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(h,g){return h=h>>>0,g||Q(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},s.prototype.readBigUInt64LE=de(function(h){h=h>>>0,v(h,"offset");const g=this[h],A=this[h+7];(g===void 0||A===void 0)&&I(h,this.length-8);const L=g+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24,G=this[++h]+this[++h]*2**8+this[++h]*2**16+A*2**24;return BigInt(L)+(BigInt(G)<<BigInt(32))}),s.prototype.readBigUInt64BE=de(function(h){h=h>>>0,v(h,"offset");const g=this[h],A=this[h+7];(g===void 0||A===void 0)&&I(h,this.length-8);const L=g*2**24+this[++h]*2**16+this[++h]*2**8+this[++h],G=this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+A;return(BigInt(L)<<BigInt(32))+BigInt(G)}),s.prototype.readIntLE=function(h,g,A){h=h>>>0,g=g>>>0,A||Q(h,g,this.length);let L=this[h],G=1,ne=0;for(;++ne<g&&(G*=256);)L+=this[h+ne]*G;return G*=128,L>=G&&(L-=Math.pow(2,8*g)),L},s.prototype.readIntBE=function(h,g,A){h=h>>>0,g=g>>>0,A||Q(h,g,this.length);let L=g,G=1,ne=this[h+--L];for(;L>0&&(G*=256);)ne+=this[h+--L]*G;return G*=128,ne>=G&&(ne-=Math.pow(2,8*g)),ne},s.prototype.readInt8=function(h,g){return h=h>>>0,g||Q(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},s.prototype.readInt16LE=function(h,g){h=h>>>0,g||Q(h,2,this.length);const A=this[h]|this[h+1]<<8;return A&32768?A|4294901760:A},s.prototype.readInt16BE=function(h,g){h=h>>>0,g||Q(h,2,this.length);const A=this[h+1]|this[h]<<8;return A&32768?A|4294901760:A},s.prototype.readInt32LE=function(h,g){return h=h>>>0,g||Q(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},s.prototype.readInt32BE=function(h,g){return h=h>>>0,g||Q(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},s.prototype.readBigInt64LE=de(function(h){h=h>>>0,v(h,"offset");const g=this[h],A=this[h+7];(g===void 0||A===void 0)&&I(h,this.length-8);const L=this[h+4]+this[h+5]*2**8+this[h+6]*2**16+(A<<24);return(BigInt(L)<<BigInt(32))+BigInt(g+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24)}),s.prototype.readBigInt64BE=de(function(h){h=h>>>0,v(h,"offset");const g=this[h],A=this[h+7];(g===void 0||A===void 0)&&I(h,this.length-8);const L=(g<<24)+this[++h]*2**16+this[++h]*2**8+this[++h];return(BigInt(L)<<BigInt(32))+BigInt(this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+A)}),s.prototype.readFloatLE=function(h,g){return h=h>>>0,g||Q(h,4,this.length),i.read(this,h,!0,23,4)},s.prototype.readFloatBE=function(h,g){return h=h>>>0,g||Q(h,4,this.length),i.read(this,h,!1,23,4)},s.prototype.readDoubleLE=function(h,g){return h=h>>>0,g||Q(h,8,this.length),i.read(this,h,!0,52,8)},s.prototype.readDoubleBE=function(h,g){return h=h>>>0,g||Q(h,8,this.length),i.read(this,h,!1,52,8)};function ae(S,h,g,A,L,G){if(!s.isBuffer(S))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>L||h<G)throw new RangeError('"value" argument is out of bounds');if(g+A>S.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(h,g,A,L){if(h=+h,g=g>>>0,A=A>>>0,!L){const ve=Math.pow(2,8*A)-1;ae(this,h,g,A,ve,0)}let G=1,ne=0;for(this[g]=h&255;++ne<A&&(G*=256);)this[g+ne]=h/G&255;return g+A},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(h,g,A,L){if(h=+h,g=g>>>0,A=A>>>0,!L){const ve=Math.pow(2,8*A)-1;ae(this,h,g,A,ve,0)}let G=A-1,ne=1;for(this[g+G]=h&255;--G>=0&&(ne*=256);)this[g+G]=h/ne&255;return g+A},s.prototype.writeUint8=s.prototype.writeUInt8=function(h,g,A){return h=+h,g=g>>>0,A||ae(this,h,g,1,255,0),this[g]=h&255,g+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(h,g,A){return h=+h,g=g>>>0,A||ae(this,h,g,2,65535,0),this[g]=h&255,this[g+1]=h>>>8,g+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(h,g,A){return h=+h,g=g>>>0,A||ae(this,h,g,2,65535,0),this[g]=h>>>8,this[g+1]=h&255,g+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(h,g,A){return h=+h,g=g>>>0,A||ae(this,h,g,4,4294967295,0),this[g+3]=h>>>24,this[g+2]=h>>>16,this[g+1]=h>>>8,this[g]=h&255,g+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(h,g,A){return h=+h,g=g>>>0,A||ae(this,h,g,4,4294967295,0),this[g]=h>>>24,this[g+1]=h>>>16,this[g+2]=h>>>8,this[g+3]=h&255,g+4};function ie(S,h,g,A,L){k(h,A,L,S,g,7);let G=Number(h&BigInt(4294967295));S[g++]=G,G=G>>8,S[g++]=G,G=G>>8,S[g++]=G,G=G>>8,S[g++]=G;let ne=Number(h>>BigInt(32)&BigInt(4294967295));return S[g++]=ne,ne=ne>>8,S[g++]=ne,ne=ne>>8,S[g++]=ne,ne=ne>>8,S[g++]=ne,g}function me(S,h,g,A,L){k(h,A,L,S,g,7);let G=Number(h&BigInt(4294967295));S[g+7]=G,G=G>>8,S[g+6]=G,G=G>>8,S[g+5]=G,G=G>>8,S[g+4]=G;let ne=Number(h>>BigInt(32)&BigInt(4294967295));return S[g+3]=ne,ne=ne>>8,S[g+2]=ne,ne=ne>>8,S[g+1]=ne,ne=ne>>8,S[g]=ne,g+8}s.prototype.writeBigUInt64LE=de(function(h,g=0){return ie(this,h,g,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=de(function(h,g=0){return me(this,h,g,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(h,g,A,L){if(h=+h,g=g>>>0,!L){const Se=Math.pow(2,8*A-1);ae(this,h,g,A,Se-1,-Se)}let G=0,ne=1,ve=0;for(this[g]=h&255;++G<A&&(ne*=256);)h<0&&ve===0&&this[g+G-1]!==0&&(ve=1),this[g+G]=(h/ne>>0)-ve&255;return g+A},s.prototype.writeIntBE=function(h,g,A,L){if(h=+h,g=g>>>0,!L){const Se=Math.pow(2,8*A-1);ae(this,h,g,A,Se-1,-Se)}let G=A-1,ne=1,ve=0;for(this[g+G]=h&255;--G>=0&&(ne*=256);)h<0&&ve===0&&this[g+G+1]!==0&&(ve=1),this[g+G]=(h/ne>>0)-ve&255;return g+A},s.prototype.writeInt8=function(h,g,A){return h=+h,g=g>>>0,A||ae(this,h,g,1,127,-128),h<0&&(h=255+h+1),this[g]=h&255,g+1},s.prototype.writeInt16LE=function(h,g,A){return h=+h,g=g>>>0,A||ae(this,h,g,2,32767,-32768),this[g]=h&255,this[g+1]=h>>>8,g+2},s.prototype.writeInt16BE=function(h,g,A){return h=+h,g=g>>>0,A||ae(this,h,g,2,32767,-32768),this[g]=h>>>8,this[g+1]=h&255,g+2},s.prototype.writeInt32LE=function(h,g,A){return h=+h,g=g>>>0,A||ae(this,h,g,4,2147483647,-2147483648),this[g]=h&255,this[g+1]=h>>>8,this[g+2]=h>>>16,this[g+3]=h>>>24,g+4},s.prototype.writeInt32BE=function(h,g,A){return h=+h,g=g>>>0,A||ae(this,h,g,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[g]=h>>>24,this[g+1]=h>>>16,this[g+2]=h>>>8,this[g+3]=h&255,g+4},s.prototype.writeBigInt64LE=de(function(h,g=0){return ie(this,h,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=de(function(h,g=0){return me(this,h,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ye(S,h,g,A,L,G){if(g+A>S.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function _e(S,h,g,A,L){return h=+h,g=g>>>0,L||ye(S,h,g,4),i.write(S,h,g,A,23,4),g+4}s.prototype.writeFloatLE=function(h,g,A){return _e(this,h,g,!0,A)},s.prototype.writeFloatBE=function(h,g,A){return _e(this,h,g,!1,A)};function we(S,h,g,A,L){return h=+h,g=g>>>0,L||ye(S,h,g,8),i.write(S,h,g,A,52,8),g+8}s.prototype.writeDoubleLE=function(h,g,A){return we(this,h,g,!0,A)},s.prototype.writeDoubleBE=function(h,g,A){return we(this,h,g,!1,A)},s.prototype.copy=function(h,g,A,L){if(!s.isBuffer(h))throw new TypeError("argument should be a Buffer");if(A||(A=0),!L&&L!==0&&(L=this.length),g>=h.length&&(g=h.length),g||(g=0),L>0&&L<A&&(L=A),L===A||h.length===0||this.length===0)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(A<0||A>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),h.length-g<L-A&&(L=h.length-g+A);const G=L-A;return this===h&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(g,A,L):Uint8Array.prototype.set.call(h,this.subarray(A,L),g),G},s.prototype.fill=function(h,g,A,L){if(typeof h=="string"){if(typeof g=="string"?(L=g,g=0,A=this.length):typeof A=="string"&&(L=A,A=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!s.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(h.length===1){const ne=h.charCodeAt(0);(L==="utf8"&&ne<128||L==="latin1")&&(h=ne)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(g<0||this.length<g||this.length<A)throw new RangeError("Out of range index");if(A<=g)return this;g=g>>>0,A=A===void 0?this.length:A>>>0,h||(h=0);let G;if(typeof h=="number")for(G=g;G<A;++G)this[G]=h;else{const ne=s.isBuffer(h)?h:s.from(h,L),ve=ne.length;if(ve===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(G=0;G<A-g;++G)this[G+g]=ne[G%ve]}return this};const re={};function W(S,h,g){re[S]=class extends g{constructor(){super(),Object.defineProperty(this,"message",{value:h.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${S}]`,this.stack,delete this.name}get code(){return S}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${S}]: ${this.message}`}}}W("ERR_BUFFER_OUT_OF_BOUNDS",function(S){return S?`${S} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),W("ERR_INVALID_ARG_TYPE",function(S,h){return`The "${S}" argument must be of type number. Received type ${typeof h}`},TypeError),W("ERR_OUT_OF_RANGE",function(S,h,g){let A=`The value of "${S}" is out of range.`,L=g;return Number.isInteger(g)&&Math.abs(g)>2**32?L=J(String(g)):typeof g=="bigint"&&(L=String(g),(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))&&(L=J(L)),L+="n"),A+=` It must be ${h}. Received ${L}`,A},RangeError);function J(S){let h="",g=S.length;const A=S[0]==="-"?1:0;for(;g>=A+4;g-=3)h=`_${S.slice(g-3,g)}${h}`;return`${S.slice(0,g)}${h}`}function oe(S,h,g){v(h,"offset"),(S[h]===void 0||S[h+g]===void 0)&&I(h,S.length-(g+1))}function k(S,h,g,A,L,G){if(S>g||S<h){const ne=typeof h=="bigint"?"n":"";let ve;throw h===0||h===BigInt(0)?ve=`>= 0${ne} and < 2${ne} ** ${(G+1)*8}${ne}`:ve=`>= -(2${ne} ** ${(G+1)*8-1}${ne}) and < 2 ** ${(G+1)*8-1}${ne}`,new re.ERR_OUT_OF_RANGE("value",ve,S)}oe(A,L,G)}function v(S,h){if(typeof S!="number")throw new re.ERR_INVALID_ARG_TYPE(h,"number",S)}function I(S,h,g){throw Math.floor(S)!==S?(v(S,g),new re.ERR_OUT_OF_RANGE("offset","an integer",S)):h<0?new re.ERR_BUFFER_OUT_OF_BOUNDS:new re.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${h}`,S)}const O=/[^+/0-9A-Za-z-_]/g;function z(S){if(S=S.split("=")[0],S=S.trim().replace(O,""),S.length<2)return"";for(;S.length%4!==0;)S=S+"=";return S}function j(S,h){h=h||1/0;let g;const A=S.length;let L=null;const G=[];for(let ne=0;ne<A;++ne){if(g=S.charCodeAt(ne),g>55295&&g<57344){if(!L){if(g>56319){(h-=3)>-1&&G.push(239,191,189);continue}else if(ne+1===A){(h-=3)>-1&&G.push(239,191,189);continue}L=g;continue}if(g<56320){(h-=3)>-1&&G.push(239,191,189),L=g;continue}g=(L-55296<<10|g-56320)+65536}else L&&(h-=3)>-1&&G.push(239,191,189);if(L=null,g<128){if((h-=1)<0)break;G.push(g)}else if(g<2048){if((h-=2)<0)break;G.push(g>>6|192,g&63|128)}else if(g<65536){if((h-=3)<0)break;G.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((h-=4)<0)break;G.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return G}function K(S){const h=[];for(let g=0;g<S.length;++g)h.push(S.charCodeAt(g)&255);return h}function M(S,h){let g,A,L;const G=[];for(let ne=0;ne<S.length&&!((h-=2)<0);++ne)g=S.charCodeAt(ne),A=g>>8,L=g%256,G.push(L),G.push(A);return G}function $(S){return t.toByteArray(z(S))}function V(S,h,g,A){let L;for(L=0;L<A&&!(L+g>=h.length||L>=S.length);++L)h[L+g]=S[L];return L}function X(S,h){return S instanceof h||S!=null&&S.constructor!=null&&S.constructor.name!=null&&S.constructor.name===h.name}function te(S){return S!==S}const pe=(function(){const S="0123456789abcdef",h=new Array(256);for(let g=0;g<16;++g){const A=g*16;for(let L=0;L<16;++L)h[A+L]=S[g]+S[L]}return h})();function de(S){return typeof BigInt>"u"?Te:S}function Te(){throw new Error("BigInt not supported")}})(buffer)),buffer}var primordials,hasRequiredPrimordials;function requirePrimordials(){if(hasRequiredPrimordials)return primordials;hasRequiredPrimordials=1;class e extends Error{constructor(i){if(!Array.isArray(i))throw new TypeError(`Expected input to be an Array, got ${typeof i}`);let r="";for(let n=0;n<i.length;n++)r+=`    ${i[n].stack}
`;super(r),this.name="AggregateError",this.errors=i}}return primordials={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,i){return t.includes(i)},ArrayPrototypeIndexOf(t,i){return t.indexOf(i)},ArrayPrototypeJoin(t,i){return t.join(i)},ArrayPrototypeMap(t,i){return t.map(i)},ArrayPrototypePop(t,i){return t.pop(i)},ArrayPrototypePush(t,i){return t.push(i)},ArrayPrototypeSlice(t,i,r){return t.slice(i,r)},Error,FunctionPrototypeCall(t,i,...r){return t.call(i,...r)},FunctionPrototypeSymbolHasInstance(t,i){return Function.prototype[Symbol.hasInstance].call(t,i)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,i){return Object.defineProperties(t,i)},ObjectDefineProperty(t,i,r){return Object.defineProperty(t,i,r)},ObjectGetOwnPropertyDescriptor(t,i){return Object.getOwnPropertyDescriptor(t,i)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,i){return Object.setPrototypeOf(t,i)},Promise,PromisePrototypeCatch(t,i){return t.catch(i)},PromisePrototypeThen(t,i,r){return t.then(i,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,i){return t.test(i)},SafeSet:Set,String,StringPrototypeSlice(t,i,r){return t.slice(i,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,i,r){return t.set(i,r)},Boolean,Uint8Array},primordials}var util={exports:{}},inspect,hasRequiredInspect;function requireInspect(){return hasRequiredInspect||(hasRequiredInspect=1,inspect={format(e,...t){return e.replace(/%([sdifj])/g,function(...[i,r]){const n=t.shift();return r==="f"?n.toFixed(6):r==="j"?JSON.stringify(n):r==="s"&&typeof n=="object"?`${n.constructor!==Object?n.constructor.name:""} {}`.trim():n.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),inspect}var errors,hasRequiredErrors;function requireErrors(){if(hasRequiredErrors)return errors;hasRequiredErrors=1;const{format:e,inspect:t}=requireInspect(),{AggregateError:i}=requirePrimordials(),r=globalThis.AggregateError||i,n=Symbol("kIsNodeError"),a=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,s="__node_internal_",l={};function u(w,T){if(!w)throw new l.ERR_INTERNAL_ASSERTION(T)}function c(w){let T="",E=w.length;const R=w[0]==="-"?1:0;for(;E>=R+4;E-=3)T=`_${w.slice(E-3,E)}${T}`;return`${w.slice(0,E)}${T}`}function m(w,T,E){if(typeof T=="function")return u(T.length<=E.length,`Code: ${w}; The provided arguments length (${E.length}) does not match the required ones (${T.length}).`),T(...E);const R=(T.match(/%[dfijoOs]/g)||[]).length;return u(R===E.length,`Code: ${w}; The provided arguments length (${E.length}) does not match the required ones (${R}).`),E.length===0?T:e(T,...E)}function f(w,T,E){E||(E=Error);class R extends E{constructor(...B){super(m(w,T,B))}toString(){return`${this.name} [${w}]: ${this.message}`}}Object.defineProperties(R.prototype,{name:{value:E.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${w}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),R.prototype.code=w,R.prototype[n]=!0,l[w]=R}function d(w){const T=s+w.name;return Object.defineProperty(w,"name",{value:T}),w}function b(w,T){if(w&&T&&w!==T){if(Array.isArray(T.errors))return T.errors.push(w),T;const E=new r([T,w],T.message);return E.code=T.code,E}return w||T}class y extends Error{constructor(T="The operation was aborted",E=void 0){if(E!==void 0&&typeof E!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",E);super(T,E),this.code="ABORT_ERR",this.name="AbortError"}}return f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",(w,T,E)=>{u(typeof w=="string","'name' must be a string"),Array.isArray(T)||(T=[T]);let R="The ";w.endsWith(" argument")?R+=`${w} `:R+=`"${w}" ${w.includes(".")?"property":"argument"} `,R+="must be ";const C=[],B=[],D=[];for(const x of T)u(typeof x=="string","All expected entries have to be of type string"),a.includes(x)?C.push(x.toLowerCase()):o.test(x)?B.push(x):(u(x!=="object",'The value "object" should be written as "Object"'),D.push(x));if(B.length>0){const x=C.indexOf("object");x!==-1&&(C.splice(C,x,1),B.push("Object"))}if(C.length>0){switch(C.length){case 1:R+=`of type ${C[0]}`;break;case 2:R+=`one of type ${C[0]} or ${C[1]}`;break;default:{const x=C.pop();R+=`one of type ${C.join(", ")}, or ${x}`}}(B.length>0||D.length>0)&&(R+=" or ")}if(B.length>0){switch(B.length){case 1:R+=`an instance of ${B[0]}`;break;case 2:R+=`an instance of ${B[0]} or ${B[1]}`;break;default:{const x=B.pop();R+=`an instance of ${B.join(", ")}, or ${x}`}}D.length>0&&(R+=" or ")}switch(D.length){case 0:break;case 1:D[0].toLowerCase()!==D[0]&&(R+="an "),R+=`${D[0]}`;break;case 2:R+=`one of ${D[0]} or ${D[1]}`;break;default:{const x=D.pop();R+=`one of ${D.join(", ")}, or ${x}`}}if(E==null)R+=`. Received ${E}`;else if(typeof E=="function"&&E.name)R+=`. Received function ${E.name}`;else if(typeof E=="object"){var _;if((_=E.constructor)!==null&&_!==void 0&&_.name)R+=`. Received an instance of ${E.constructor.name}`;else{const x=t(E,{depth:-1});R+=`. Received ${x}`}}else{let x=t(E,{colors:!1});x.length>25&&(x=`${x.slice(0,25)}...`),R+=`. Received type ${typeof E} (${x})`}return R},TypeError),f("ERR_INVALID_ARG_VALUE",(w,T,E="is invalid")=>{let R=t(T);return R.length>128&&(R=R.slice(0,128)+"..."),`The ${w.includes(".")?"property":"argument"} '${w}' ${E}. Received ${R}`},TypeError),f("ERR_INVALID_RETURN_VALUE",(w,T,E)=>{var R;const C=E!=null&&(R=E.constructor)!==null&&R!==void 0&&R.name?`instance of ${E.constructor.name}`:`type ${typeof E}`;return`Expected ${w} to be returned from the "${T}" function but got ${C}.`},TypeError),f("ERR_MISSING_ARGS",(...w)=>{u(w.length>0,"At least one arg needs to be specified");let T;const E=w.length;switch(w=(Array.isArray(w)?w:[w]).map(R=>`"${R}"`).join(" or "),E){case 1:T+=`The ${w[0]} argument`;break;case 2:T+=`The ${w[0]} and ${w[1]} arguments`;break;default:{const R=w.pop();T+=`The ${w.join(", ")}, and ${R} arguments`}break}return`${T} must be specified`},TypeError),f("ERR_OUT_OF_RANGE",(w,T,E)=>{u(T,'Missing "range" argument');let R;if(Number.isInteger(E)&&Math.abs(E)>2**32)R=c(String(E));else if(typeof E=="bigint"){R=String(E);const C=BigInt(2)**BigInt(32);(E>C||E<-C)&&(R=c(R)),R+="n"}else R=t(E);return`The value of "${w}" is out of range. It must be ${T}. Received ${R}`},RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),errors={AbortError:y,aggregateTwoErrors:d(b),hideStackFrames:d,codes:l},errors}var browser$1={exports:{}},hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$1.exports;hasRequiredBrowser$2=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return browser$1.exports=e,browser$1.exports.AbortSignal=t,browser$1.exports.default=e,browser$1.exports}var events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(B,D,_){return Function.prototype.apply.call(B,D,_)},i;e&&typeof e.ownKeys=="function"?i=e.ownKeys:Object.getOwnPropertySymbols?i=function(B){return Object.getOwnPropertyNames(B).concat(Object.getOwnPropertySymbols(B))}:i=function(B){return Object.getOwnPropertyNames(B)};function r(C){console&&console.warn&&console.warn(C)}var n=Number.isNaN||function(B){return B!==B};function a(){a.init.call(this)}events.exports=a,events.exports.once=T,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function s(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(C){if(typeof C!="number"||C<0||n(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");o=C}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(B){if(typeof B!="number"||B<0||n(B))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+B+".");return this._maxListeners=B,this};function l(C){return C._maxListeners===void 0?a.defaultMaxListeners:C._maxListeners}a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(B){for(var D=[],_=1;_<arguments.length;_++)D.push(arguments[_]);var x=B==="error",ee=this._events;if(ee!==void 0)x=x&&ee.error===void 0;else if(!x)return!1;if(x){var N;if(D.length>0&&(N=D[0]),N instanceof Error)throw N;var U=new Error("Unhandled error."+(N?" ("+N.message+")":""));throw U.context=N,U}var Z=ee[B];if(Z===void 0)return!1;if(typeof Z=="function")t(Z,this,D);else for(var H=Z.length,se=b(Z,H),_=0;_<H;++_)t(se[_],this,D);return!0};function u(C,B,D,_){var x,ee,N;if(s(D),ee=C._events,ee===void 0?(ee=C._events=Object.create(null),C._eventsCount=0):(ee.newListener!==void 0&&(C.emit("newListener",B,D.listener?D.listener:D),ee=C._events),N=ee[B]),N===void 0)N=ee[B]=D,++C._eventsCount;else if(typeof N=="function"?N=ee[B]=_?[D,N]:[N,D]:_?N.unshift(D):N.push(D),x=l(C),x>0&&N.length>x&&!N.warned){N.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+N.length+" "+String(B)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=C,U.type=B,U.count=N.length,r(U)}return C}a.prototype.addListener=function(B,D){return u(this,B,D,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(B,D){return u(this,B,D,!0)};function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(C,B,D){var _={fired:!1,wrapFn:void 0,target:C,type:B,listener:D},x=c.bind(_);return x.listener=D,_.wrapFn=x,x}a.prototype.once=function(B,D){return s(D),this.on(B,m(this,B,D)),this},a.prototype.prependOnceListener=function(B,D){return s(D),this.prependListener(B,m(this,B,D)),this},a.prototype.removeListener=function(B,D){var _,x,ee,N,U;if(s(D),x=this._events,x===void 0)return this;if(_=x[B],_===void 0)return this;if(_===D||_.listener===D)--this._eventsCount===0?this._events=Object.create(null):(delete x[B],x.removeListener&&this.emit("removeListener",B,_.listener||D));else if(typeof _!="function"){for(ee=-1,N=_.length-1;N>=0;N--)if(_[N]===D||_[N].listener===D){U=_[N].listener,ee=N;break}if(ee<0)return this;ee===0?_.shift():y(_,ee),_.length===1&&(x[B]=_[0]),x.removeListener!==void 0&&this.emit("removeListener",B,U||D)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(B){var D,_,x;if(_=this._events,_===void 0)return this;if(_.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):_[B]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete _[B]),this;if(arguments.length===0){var ee=Object.keys(_),N;for(x=0;x<ee.length;++x)N=ee[x],N!=="removeListener"&&this.removeAllListeners(N);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(D=_[B],typeof D=="function")this.removeListener(B,D);else if(D!==void 0)for(x=D.length-1;x>=0;x--)this.removeListener(B,D[x]);return this};function f(C,B,D){var _=C._events;if(_===void 0)return[];var x=_[B];return x===void 0?[]:typeof x=="function"?D?[x.listener||x]:[x]:D?w(x):b(x,x.length)}a.prototype.listeners=function(B){return f(this,B,!0)},a.prototype.rawListeners=function(B){return f(this,B,!1)},a.listenerCount=function(C,B){return typeof C.listenerCount=="function"?C.listenerCount(B):d.call(C,B)},a.prototype.listenerCount=d;function d(C){var B=this._events;if(B!==void 0){var D=B[C];if(typeof D=="function")return 1;if(D!==void 0)return D.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function b(C,B){for(var D=new Array(B),_=0;_<B;++_)D[_]=C[_];return D}function y(C,B){for(;B+1<C.length;B++)C[B]=C[B+1];C.pop()}function w(C){for(var B=new Array(C.length),D=0;D<B.length;++D)B[D]=C[D].listener||C[D];return B}function T(C,B){return new Promise(function(D,_){function x(N){C.removeListener(B,ee),_(N)}function ee(){typeof C.removeListener=="function"&&C.removeListener("error",x),D([].slice.call(arguments))}R(C,B,ee,{once:!0}),B!=="error"&&E(C,x,{once:!0})})}function E(C,B,D){typeof C.on=="function"&&R(C,"error",B,D)}function R(C,B,D,_){if(typeof C.on=="function")_.once?C.once(B,D):C.on(B,D);else if(typeof C.addEventListener=="function")C.addEventListener(B,function x(ee){_.once&&C.removeEventListener(B,x),D(ee)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return events.exports}var hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,(function(e){const t=requireBuffer(),{format:i,inspect:r}=requireInspect(),{codes:{ERR_INVALID_ARG_TYPE:n}}=requireErrors(),{kResistStopPropagation:a,AggregateError:o,SymbolDispose:s}=requirePrimordials(),l=globalThis.AbortSignal||requireBrowser$2().AbortSignal,u=globalThis.AbortController||requireBrowser$2().AbortController,c=Object.getPrototypeOf(async function(){}).constructor,m=globalThis.Blob||t.Blob,f=typeof m<"u"?function(w){return w instanceof m}:function(w){return!1},d=(y,w)=>{if(y!==void 0&&(y===null||typeof y!="object"||!("aborted"in y)))throw new n(w,"AbortSignal",y)},b=(y,w)=>{if(typeof y!="function")throw new n(w,"Function",y)};e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(y){let w=!1;return function(...T){w||(w=!0,y.apply(this,T))}},createDeferredPromise:function(){let y,w;return{promise:new Promise((E,R)=>{y=E,w=R}),resolve:y,reject:w}},promisify(y){return new Promise((w,T)=>{y((E,...R)=>E?T(E):w(...R))})},debuglog(){return function(){}},format:i,inspect:r,types:{isAsyncFunction(y){return y instanceof c},isArrayBufferView(y){return ArrayBuffer.isView(y)}},isBlob:f,deprecate(y,w){return y},addAbortListener:requireEvents().addAbortListener||function(w,T){if(w===void 0)throw new n("signal","AbortSignal",w);d(w,"signal"),b(T,"listener");let E;return w.aborted?queueMicrotask(()=>T()):(w.addEventListener("abort",T,{__proto__:null,once:!0,[a]:!0}),E=()=>{w.removeEventListener("abort",T)}),{__proto__:null,[s](){var R;(R=E)===null||R===void 0||R()}}},AbortSignalAny:l.any||function(w){if(w.length===1)return w[0];const T=new u,E=()=>T.abort();return w.forEach(R=>{d(R,"signals"),R.addEventListener("abort",E,{once:!0})}),T.signal.addEventListener("abort",()=>{w.forEach(R=>R.removeEventListener("abort",E))},{once:!0}),T.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(util)),util.exports}var operators={},validators,hasRequiredValidators;function requireValidators(){if(hasRequiredValidators)return validators;hasRequiredValidators=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:i,ArrayPrototypeMap:r,NumberIsInteger:n,NumberIsNaN:a,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:s,NumberParseInt:l,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:c,String:m,StringPrototypeToUpperCase:f,StringPrototypeTrim:d}=requirePrimordials(),{hideStackFrames:b,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:w,ERR_INVALID_ARG_VALUE:T,ERR_OUT_OF_RANGE:E,ERR_UNKNOWN_SIGNAL:R}}=requireErrors(),{normalizeEncoding:C}=requireUtil(),{isAsyncFunction:B,isArrayBufferView:D}=requireUtil().types,_={};function x(M){return M===(M|0)}function ee(M){return M===M>>>0}const N=/^[0-7]+$/,U="must be a 32-bit unsigned integer or an octal string";function Z(M,$,V){if(typeof M>"u"&&(M=V),typeof M=="string"){if(c(N,M)===null)throw new T($,M,U);M=l(M,8)}return fe(M,$),M}const H=b((M,$,V=s,X=o)=>{if(typeof M!="number")throw new w($,"number",M);if(!n(M))throw new E($,"an integer",M);if(M<V||M>X)throw new E($,`>= ${V} && <= ${X}`,M)}),se=b((M,$,V=-2147483648,X=2147483647)=>{if(typeof M!="number")throw new w($,"number",M);if(!n(M))throw new E($,"an integer",M);if(M<V||M>X)throw new E($,`>= ${V} && <= ${X}`,M)}),fe=b((M,$,V=!1)=>{if(typeof M!="number")throw new w($,"number",M);if(!n(M))throw new E($,"an integer",M);const X=V?1:0,te=4294967295;if(M<X||M>te)throw new E($,`>= ${X} && <= ${te}`,M)});function le(M,$){if(typeof M!="string")throw new w($,"string",M)}function ge(M,$,V=void 0,X){if(typeof M!="number")throw new w($,"number",M);if(V!=null&&M<V||X!=null&&M>X||(V!=null||X!=null)&&a(M))throw new E($,`${V!=null?`>= ${V}`:""}${V!=null&&X!=null?" && ":""}${X!=null?`<= ${X}`:""}`,M)}const Y=b((M,$,V)=>{if(!t(V,M)){const te="must be one of: "+i(r(V,pe=>typeof pe=="string"?`'${pe}'`:m(pe)),", ");throw new T($,M,te)}});function he(M,$){if(typeof M!="boolean")throw new w($,"boolean",M)}function q(M,$,V){return M==null||!u(M,$)?V:M[$]}const Q=b((M,$,V=null)=>{const X=q(V,"allowArray",!1),te=q(V,"allowFunction",!1);if(!q(V,"nullable",!1)&&M===null||!X&&e(M)||typeof M!="object"&&(!te||typeof M!="function"))throw new w($,"Object",M)}),ae=b((M,$)=>{if(M!=null&&typeof M!="object"&&typeof M!="function")throw new w($,"a dictionary",M)}),ie=b((M,$,V=0)=>{if(!e(M))throw new w($,"Array",M);if(M.length<V){const X=`must be longer than ${V}`;throw new T($,M,X)}});function me(M,$){ie(M,$);for(let V=0;V<M.length;V++)le(M[V],`${$}[${V}]`)}function ye(M,$){ie(M,$);for(let V=0;V<M.length;V++)he(M[V],`${$}[${V}]`)}function _e(M,$){ie(M,$);for(let V=0;V<M.length;V++){const X=M[V],te=`${$}[${V}]`;if(X==null)throw new w(te,"AbortSignal",X);oe(X,te)}}function we(M,$="signal"){if(le(M,$),_[M]===void 0)throw _[f(M)]!==void 0?new R(M+" (signals must use all capital letters)"):new R(M)}const re=b((M,$="buffer")=>{if(!D(M))throw new w($,["Buffer","TypedArray","DataView"],M)});function W(M,$){const V=C($),X=M.length;if(V==="hex"&&X%2!==0)throw new T("encoding",$,`is invalid for data of length ${X}`)}function J(M,$="Port",V=!0){if(typeof M!="number"&&typeof M!="string"||typeof M=="string"&&d(M).length===0||+M!==+M>>>0||M>65535||M===0&&!V)throw new y($,M,V);return M|0}const oe=b((M,$)=>{if(M!==void 0&&(M===null||typeof M!="object"||!("aborted"in M)))throw new w($,"AbortSignal",M)}),k=b((M,$)=>{if(typeof M!="function")throw new w($,"Function",M)}),v=b((M,$)=>{if(typeof M!="function"||B(M))throw new w($,"Function",M)}),I=b((M,$)=>{if(M!==void 0)throw new w($,"undefined",M)});function O(M,$,V){if(!t(V,M))throw new w($,`('${i(V,"|")}')`,M)}const z=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function j(M,$){if(typeof M>"u"||!c(z,M))throw new T($,M,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function K(M){if(typeof M=="string")return j(M,"hints"),M;if(e(M)){const $=M.length;let V="";if($===0)return V;for(let X=0;X<$;X++){const te=M[X];j(te,"hints"),V+=te,X!==$-1&&(V+=", ")}return V}throw new T("hints",M,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return validators={isInt32:x,isUint32:ee,parseFileMode:Z,validateArray:ie,validateStringArray:me,validateBooleanArray:ye,validateAbortSignalArray:_e,validateBoolean:he,validateBuffer:re,validateDictionary:ae,validateEncoding:W,validateFunction:k,validateInt32:se,validateInteger:H,validateNumber:ge,validateObject:Q,validateOneOf:Y,validatePlainFunction:v,validatePort:J,validateSignalName:we,validateString:le,validateUint32:fe,validateUndefined:I,validateUnion:O,validateAbortSignal:oe,validateLinkHeaderValue:K},validators}var endOfStream={exports:{}},browser={exports:{}},hasRequiredBrowser$1;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser.exports;hasRequiredBrowser$1=1;var e=browser.exports={},t,i;function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=r}catch{t=r}try{typeof clearTimeout=="function"?i=clearTimeout:i=n}catch{i=n}})();function a(y){if(t===setTimeout)return setTimeout(y,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(y,0);try{return t(y,0)}catch{try{return t.call(null,y,0)}catch{return t.call(this,y,0)}}}function o(y){if(i===clearTimeout)return clearTimeout(y);if((i===n||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(y);try{return i(y)}catch{try{return i.call(null,y)}catch{return i.call(this,y)}}}var s=[],l=!1,u,c=-1;function m(){!l||!u||(l=!1,u.length?s=u.concat(s):c=-1,s.length&&f())}function f(){if(!l){var y=a(m);l=!0;for(var w=s.length;w;){for(u=s,s=[];++c<w;)u&&u[c].run();c=-1,w=s.length}u=null,l=!1,o(y)}}e.nextTick=function(y){var w=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)w[T-1]=arguments[T];s.push(new d(y,w)),s.length===1&&!l&&a(f)};function d(y,w){this.fun=y,this.array=w}d.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function b(){}return e.on=b,e.addListener=b,e.once=b,e.off=b,e.removeListener=b,e.removeAllListeners=b,e.emit=b,e.prependListener=b,e.prependOnceListener=b,e.listeners=function(y){return[]},e.binding=function(y){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(y){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},browser.exports}var utils,hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:i}=requirePrimordials(),r=i("nodejs.stream.destroyed"),n=i("nodejs.stream.errored"),a=i("nodejs.stream.readable"),o=i("nodejs.stream.writable"),s=i("nodejs.stream.disturbed"),l=i("nodejs.webstream.isClosedPromise"),u=i("nodejs.webstream.controllerErrorFunction");function c(q,Q=!1){var ae;return!!(q&&typeof q.pipe=="function"&&typeof q.on=="function"&&(!Q||typeof q.pause=="function"&&typeof q.resume=="function")&&(!q._writableState||((ae=q._readableState)===null||ae===void 0?void 0:ae.readable)!==!1)&&(!q._writableState||q._readableState))}function m(q){var Q;return!!(q&&typeof q.write=="function"&&typeof q.on=="function"&&(!q._readableState||((Q=q._writableState)===null||Q===void 0?void 0:Q.writable)!==!1))}function f(q){return!!(q&&typeof q.pipe=="function"&&q._readableState&&typeof q.on=="function"&&typeof q.write=="function")}function d(q){return q&&(q._readableState||q._writableState||typeof q.write=="function"&&typeof q.on=="function"||typeof q.pipe=="function"&&typeof q.on=="function")}function b(q){return!!(q&&!d(q)&&typeof q.pipeThrough=="function"&&typeof q.getReader=="function"&&typeof q.cancel=="function")}function y(q){return!!(q&&!d(q)&&typeof q.getWriter=="function"&&typeof q.abort=="function")}function w(q){return!!(q&&!d(q)&&typeof q.readable=="object"&&typeof q.writable=="object")}function T(q){return b(q)||y(q)||w(q)}function E(q,Q){return q==null?!1:Q===!0?typeof q[e]=="function":Q===!1?typeof q[t]=="function":typeof q[e]=="function"||typeof q[t]=="function"}function R(q){if(!d(q))return null;const Q=q._writableState,ae=q._readableState,ie=Q||ae;return!!(q.destroyed||q[r]||ie!=null&&ie.destroyed)}function C(q){if(!m(q))return null;if(q.writableEnded===!0)return!0;const Q=q._writableState;return Q!=null&&Q.errored?!1:typeof Q?.ended!="boolean"?null:Q.ended}function B(q,Q){if(!m(q))return null;if(q.writableFinished===!0)return!0;const ae=q._writableState;return ae!=null&&ae.errored?!1:typeof ae?.finished!="boolean"?null:!!(ae.finished||Q===!1&&ae.ended===!0&&ae.length===0)}function D(q){if(!c(q))return null;if(q.readableEnded===!0)return!0;const Q=q._readableState;return!Q||Q.errored?!1:typeof Q?.ended!="boolean"?null:Q.ended}function _(q,Q){if(!c(q))return null;const ae=q._readableState;return ae!=null&&ae.errored?!1:typeof ae?.endEmitted!="boolean"?null:!!(ae.endEmitted||Q===!1&&ae.ended===!0&&ae.length===0)}function x(q){return q&&q[a]!=null?q[a]:typeof q?.readable!="boolean"?null:R(q)?!1:c(q)&&q.readable&&!_(q)}function ee(q){return q&&q[o]!=null?q[o]:typeof q?.writable!="boolean"?null:R(q)?!1:m(q)&&q.writable&&!C(q)}function N(q,Q){return d(q)?R(q)?!0:!(Q?.readable!==!1&&x(q)||Q?.writable!==!1&&ee(q)):null}function U(q){var Q,ae;return d(q)?q.writableErrored?q.writableErrored:(Q=(ae=q._writableState)===null||ae===void 0?void 0:ae.errored)!==null&&Q!==void 0?Q:null:null}function Z(q){var Q,ae;return d(q)?q.readableErrored?q.readableErrored:(Q=(ae=q._readableState)===null||ae===void 0?void 0:ae.errored)!==null&&Q!==void 0?Q:null:null}function H(q){if(!d(q))return null;if(typeof q.closed=="boolean")return q.closed;const Q=q._writableState,ae=q._readableState;return typeof Q?.closed=="boolean"||typeof ae?.closed=="boolean"?Q?.closed||ae?.closed:typeof q._closed=="boolean"&&se(q)?q._closed:null}function se(q){return typeof q._closed=="boolean"&&typeof q._defaultKeepAlive=="boolean"&&typeof q._removedConnection=="boolean"&&typeof q._removedContLen=="boolean"}function fe(q){return typeof q._sent100=="boolean"&&se(q)}function le(q){var Q;return typeof q._consuming=="boolean"&&typeof q._dumped=="boolean"&&((Q=q.req)===null||Q===void 0?void 0:Q.upgradeOrConnect)===void 0}function ge(q){if(!d(q))return null;const Q=q._writableState,ae=q._readableState,ie=Q||ae;return!ie&&fe(q)||!!(ie&&ie.autoDestroy&&ie.emitClose&&ie.closed===!1)}function Y(q){var Q;return!!(q&&((Q=q[s])!==null&&Q!==void 0?Q:q.readableDidRead||q.readableAborted))}function he(q){var Q,ae,ie,me,ye,_e,we,re,W,J;return!!(q&&((Q=(ae=(ie=(me=(ye=(_e=q[n])!==null&&_e!==void 0?_e:q.readableErrored)!==null&&ye!==void 0?ye:q.writableErrored)!==null&&me!==void 0?me:(we=q._readableState)===null||we===void 0?void 0:we.errorEmitted)!==null&&ie!==void 0?ie:(re=q._writableState)===null||re===void 0?void 0:re.errorEmitted)!==null&&ae!==void 0?ae:(W=q._readableState)===null||W===void 0?void 0:W.errored)!==null&&Q!==void 0?Q:!((J=q._writableState)===null||J===void 0)&&J.errored))}return utils={isDestroyed:R,kIsDestroyed:r,isDisturbed:Y,kIsDisturbed:s,isErrored:he,kIsErrored:n,isReadable:x,kIsReadable:a,kIsClosedPromise:l,kControllerErrorFunction:u,kIsWritable:o,isClosed:H,isDuplexNodeStream:f,isFinished:N,isIterable:E,isReadableNodeStream:c,isReadableStream:b,isReadableEnded:D,isReadableFinished:_,isReadableErrored:Z,isNodeStream:d,isWebStream:T,isWritable:ee,isWritableNodeStream:m,isWritableStream:y,isWritableEnded:C,isWritableFinished:B,isWritableErrored:U,isServerRequest:le,isServerResponse:fe,willEmitClose:ge,isTransformStream:w},utils}var hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream.exports;hasRequiredEndOfStream=1;const e=requireBrowser$1(),{AbortError:t,codes:i}=requireErrors(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:n}=i,{kEmptyObject:a,once:o}=requireUtil(),{validateAbortSignal:s,validateFunction:l,validateObject:u,validateBoolean:c}=requireValidators(),{Promise:m,PromisePrototypeThen:f,SymbolDispose:d}=requirePrimordials(),{isClosed:b,isReadable:y,isReadableNodeStream:w,isReadableStream:T,isReadableFinished:E,isReadableErrored:R,isWritable:C,isWritableNodeStream:B,isWritableStream:D,isWritableFinished:_,isWritableErrored:x,isNodeStream:ee,willEmitClose:N,kIsClosedPromise:U}=requireUtils();let Z;function H(Y){return Y.setHeader&&typeof Y.abort=="function"}const se=()=>{};function fe(Y,he,q){var Q,ae;if(arguments.length===2?(q=he,he=a):he==null?he=a:u(he,"options"),l(q,"callback"),s(he.signal,"options.signal"),q=o(q),T(Y)||D(Y))return le(Y,he,q);if(!ee(Y))throw new r("stream",["ReadableStream","WritableStream","Stream"],Y);const ie=(Q=he.readable)!==null&&Q!==void 0?Q:w(Y),me=(ae=he.writable)!==null&&ae!==void 0?ae:B(Y),ye=Y._writableState,_e=Y._readableState,we=()=>{Y.writable||J()};let re=N(Y)&&w(Y)===ie&&B(Y)===me,W=_(Y,!1);const J=()=>{W=!0,Y.destroyed&&(re=!1),!(re&&(!Y.readable||ie))&&(!ie||oe)&&q.call(Y)};let oe=E(Y,!1);const k=()=>{oe=!0,Y.destroyed&&(re=!1),!(re&&(!Y.writable||me))&&(!me||W)&&q.call(Y)},v=M=>{q.call(Y,M)};let I=b(Y);const O=()=>{I=!0;const M=x(Y)||R(Y);if(M&&typeof M!="boolean")return q.call(Y,M);if(ie&&!oe&&w(Y,!0)&&!E(Y,!1))return q.call(Y,new n);if(me&&!W&&!_(Y,!1))return q.call(Y,new n);q.call(Y)},z=()=>{I=!0;const M=x(Y)||R(Y);if(M&&typeof M!="boolean")return q.call(Y,M);q.call(Y)},j=()=>{Y.req.on("finish",J)};H(Y)?(Y.on("complete",J),re||Y.on("abort",O),Y.req?j():Y.on("request",j)):me&&!ye&&(Y.on("end",we),Y.on("close",we)),!re&&typeof Y.aborted=="boolean"&&Y.on("aborted",O),Y.on("end",k),Y.on("finish",J),he.error!==!1&&Y.on("error",v),Y.on("close",O),I?e.nextTick(O):ye!=null&&ye.errorEmitted||_e!=null&&_e.errorEmitted?re||e.nextTick(z):(!ie&&(!re||y(Y))&&(W||C(Y)===!1)||!me&&(!re||C(Y))&&(oe||y(Y)===!1)||_e&&Y.req&&Y.aborted)&&e.nextTick(z);const K=()=>{q=se,Y.removeListener("aborted",O),Y.removeListener("complete",J),Y.removeListener("abort",O),Y.removeListener("request",j),Y.req&&Y.req.removeListener("finish",J),Y.removeListener("end",we),Y.removeListener("close",we),Y.removeListener("finish",J),Y.removeListener("end",k),Y.removeListener("error",v),Y.removeListener("close",O)};if(he.signal&&!I){const M=()=>{const $=q;K(),$.call(Y,new t(void 0,{cause:he.signal.reason}))};if(he.signal.aborted)e.nextTick(M);else{Z=Z||requireUtil().addAbortListener;const $=Z(he.signal,M),V=q;q=o((...X)=>{$[d](),V.apply(Y,X)})}}return K}function le(Y,he,q){let Q=!1,ae=se;if(he.signal)if(ae=()=>{Q=!0,q.call(Y,new t(void 0,{cause:he.signal.reason}))},he.signal.aborted)e.nextTick(ae);else{Z=Z||requireUtil().addAbortListener;const me=Z(he.signal,ae),ye=q;q=o((..._e)=>{me[d](),ye.apply(Y,_e)})}const ie=(...me)=>{Q||e.nextTick(()=>q.apply(Y,me))};return f(Y[U].promise,ie,ie),se}function ge(Y,he){var q;let Q=!1;return he===null&&(he=a),(q=he)!==null&&q!==void 0&&q.cleanup&&(c(he.cleanup,"cleanup"),Q=he.cleanup),new m((ae,ie)=>{const me=fe(Y,he,ye=>{Q&&me(),ye?ie(ye):ae()})})}return endOfStream.exports=fe,endOfStream.exports.finished=ge,endOfStream.exports}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;const e=requireBrowser$1(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:i},AbortError:r}=requireErrors(),{Symbol:n}=requirePrimordials(),{kIsDestroyed:a,isDestroyed:o,isFinished:s,isServerRequest:l}=requireUtils(),u=n("kDestroy"),c=n("kConstruct");function m(N,U,Z){N&&(N.stack,U&&!U.errored&&(U.errored=N),Z&&!Z.errored&&(Z.errored=N))}function f(N,U){const Z=this._readableState,H=this._writableState,se=H||Z;return H!=null&&H.destroyed||Z!=null&&Z.destroyed?(typeof U=="function"&&U(),this):(m(N,H,Z),H&&(H.destroyed=!0),Z&&(Z.destroyed=!0),se.constructed?d(this,N,U):this.once(u,function(fe){d(this,t(fe,N),U)}),this)}function d(N,U,Z){let H=!1;function se(fe){if(H)return;H=!0;const le=N._readableState,ge=N._writableState;m(fe,ge,le),ge&&(ge.closed=!0),le&&(le.closed=!0),typeof Z=="function"&&Z(fe),fe?e.nextTick(b,N,fe):e.nextTick(y,N)}try{N._destroy(U||null,se)}catch(fe){se(fe)}}function b(N,U){w(N,U),y(N)}function y(N){const U=N._readableState,Z=N._writableState;Z&&(Z.closeEmitted=!0),U&&(U.closeEmitted=!0),(Z!=null&&Z.emitClose||U!=null&&U.emitClose)&&N.emit("close")}function w(N,U){const Z=N._readableState,H=N._writableState;H!=null&&H.errorEmitted||Z!=null&&Z.errorEmitted||(H&&(H.errorEmitted=!0),Z&&(Z.errorEmitted=!0),N.emit("error",U))}function T(){const N=this._readableState,U=this._writableState;N&&(N.constructed=!0,N.closed=!1,N.closeEmitted=!1,N.destroyed=!1,N.errored=null,N.errorEmitted=!1,N.reading=!1,N.ended=N.readable===!1,N.endEmitted=N.readable===!1),U&&(U.constructed=!0,U.destroyed=!1,U.closed=!1,U.closeEmitted=!1,U.errored=null,U.errorEmitted=!1,U.finalCalled=!1,U.prefinished=!1,U.ended=U.writable===!1,U.ending=U.writable===!1,U.finished=U.writable===!1)}function E(N,U,Z){const H=N._readableState,se=N._writableState;if(se!=null&&se.destroyed||H!=null&&H.destroyed)return this;H!=null&&H.autoDestroy||se!=null&&se.autoDestroy?N.destroy(U):U&&(U.stack,se&&!se.errored&&(se.errored=U),H&&!H.errored&&(H.errored=U),Z?e.nextTick(w,N,U):w(N,U))}function R(N,U){if(typeof N._construct!="function")return;const Z=N._readableState,H=N._writableState;Z&&(Z.constructed=!1),H&&(H.constructed=!1),N.once(c,U),!(N.listenerCount(c)>1)&&e.nextTick(C,N)}function C(N){let U=!1;function Z(H){if(U){E(N,H??new i);return}U=!0;const se=N._readableState,fe=N._writableState,le=fe||se;se&&(se.constructed=!0),fe&&(fe.constructed=!0),le.destroyed?N.emit(u,H):H?E(N,H,!0):e.nextTick(B,N)}try{N._construct(H=>{e.nextTick(Z,H)})}catch(H){e.nextTick(Z,H)}}function B(N){N.emit(c)}function D(N){return N?.setHeader&&typeof N.abort=="function"}function _(N){N.emit("close")}function x(N,U){N.emit("error",U),e.nextTick(_,N)}function ee(N,U){!N||o(N)||(!U&&!s(N)&&(U=new r),l(N)?(N.socket=null,N.destroy(U)):D(N)?N.abort():D(N.req)?N.req.abort():typeof N.destroy=="function"?N.destroy(U):typeof N.close=="function"?N.close():U?e.nextTick(x,N,U):e.nextTick(_,N),N.destroyed||(N[a]=!0))}return destroy_1={construct:R,destroyer:ee,destroy:f,undestroy:T,errorOrDestroy:E},destroy_1}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=requirePrimordials(),{EventEmitter:i}=requireEvents();function r(a){i.call(this,a)}t(r.prototype,i.prototype),t(r,i),r.prototype.pipe=function(a,o){const s=this;function l(y){a.writable&&a.write(y)===!1&&s.pause&&s.pause()}s.on("data",l);function u(){s.readable&&s.resume&&s.resume()}a.on("drain",u),!a._isStdio&&(!o||o.end!==!1)&&(s.on("end",m),s.on("close",f));let c=!1;function m(){c||(c=!0,a.end())}function f(){c||(c=!0,typeof a.destroy=="function"&&a.destroy())}function d(y){b(),i.listenerCount(this,"error")===0&&this.emit("error",y)}n(s,"error",d),n(a,"error",d);function b(){s.removeListener("data",l),a.removeListener("drain",u),s.removeListener("end",m),s.removeListener("close",f),s.removeListener("error",d),a.removeListener("error",d),s.removeListener("end",b),s.removeListener("close",b),a.removeListener("close",b)}return s.on("end",b),s.on("close",b),a.on("close",b),a.emit("pipe",s),a};function n(a,o,s){if(typeof a.prependListener=="function")return a.prependListener(o,s);!a._events||!a._events[o]?a.on(o,s):e(a._events[o])?a._events[o].unshift(s):a._events[o]=[s,a._events[o]]}return legacy={Stream:r,prependListener:n},legacy}var addAbortSignal={exports:{}},hasRequiredAddAbortSignal;function requireAddAbortSignal(){return hasRequiredAddAbortSignal||(hasRequiredAddAbortSignal=1,(function(e){const{SymbolDispose:t}=requirePrimordials(),{AbortError:i,codes:r}=requireErrors(),{isNodeStream:n,isWebStream:a,kControllerErrorFunction:o}=requireUtils(),s=requireEndOfStream(),{ERR_INVALID_ARG_TYPE:l}=r;let u;const c=(m,f)=>{if(typeof m!="object"||!("aborted"in m))throw new l(f,"AbortSignal",m)};e.exports.addAbortSignal=function(f,d){if(c(f,"signal"),!n(d)&&!a(d))throw new l("stream",["ReadableStream","WritableStream","Stream"],d);return e.exports.addAbortSignalNoValidate(f,d)},e.exports.addAbortSignalNoValidate=function(m,f){if(typeof m!="object"||!("aborted"in m))return f;const d=n(f)?()=>{f.destroy(new i(void 0,{cause:m.reason}))}:()=>{f[o](new i(void 0,{cause:m.reason}))};if(m.aborted)d();else{u=u||requireUtil().addAbortListener;const b=u(m,d);s(f,b[t])}return f}})(addAbortSignal)),addAbortSignal.exports}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:i,Uint8Array:r}=requirePrimordials(),{Buffer:n}=requireBuffer(),{inspect:a}=requireUtil();return buffer_list=class{constructor(){this.head=null,this.tail=null,this.length=0}push(s){const l={data:s,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(s){const l={data:s,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}clear(){this.head=this.tail=null,this.length=0}join(s){if(this.length===0)return"";let l=this.head,u=""+l.data;for(;(l=l.next)!==null;)u+=s+l.data;return u}concat(s){if(this.length===0)return n.alloc(0);const l=n.allocUnsafe(s>>>0);let u=this.head,c=0;for(;u;)i(l,u.data,c),c+=u.data.length,u=u.next;return l}consume(s,l){const u=this.head.data;if(s<u.length){const c=u.slice(0,s);return this.head.data=u.slice(s),c}return s===u.length?this.shift():l?this._getString(s):this._getBuffer(s)}first(){return this.head.data}*[t](){for(let s=this.head;s;s=s.next)yield s.data}_getString(s){let l="",u=this.head,c=0;do{const m=u.data;if(s>m.length)l+=m,s-=m.length;else{s===m.length?(l+=m,++c,u.next?this.head=u.next:this.head=this.tail=null):(l+=e(m,0,s),this.head=u,u.data=e(m,s));break}++c}while((u=u.next)!==null);return this.length-=c,l}_getBuffer(s){const l=n.allocUnsafe(s),u=s;let c=this.head,m=0;do{const f=c.data;if(s>f.length)i(l,f,u-s),s-=f.length;else{s===f.length?(i(l,f,u-s),++m,c.next?this.head=c.next:this.head=this.tail=null):(i(l,new r(f.buffer,f.byteOffset,s),u-s),this.head=c,c.data=f.slice(s));break}++m}while((c=c.next)!==null);return this.length-=m,l}[Symbol.for("nodejs.util.inspect.custom")](s,l){return a(this,{...l,depth:0,customInspect:!1})}},buffer_list}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;const{MathFloor:e,NumberIsInteger:t}=requirePrimordials(),{validateInteger:i}=requireValidators(),{ERR_INVALID_ARG_VALUE:r}=requireErrors().codes;let n=16*1024,a=16;function o(c,m,f){return c.highWaterMark!=null?c.highWaterMark:m?c[f]:null}function s(c){return c?a:n}function l(c,m){i(m,"value",0),c?a=m:n=m}function u(c,m,f,d){const b=o(m,d,f);if(b!=null){if(!t(b)||b<0){const y=d?`options.${f}`:"options.highWaterMark";throw new r(y,b)}return e(b)}return s(c.objectMode)}return state={getHighWaterMark:u,getDefaultHighWaterMark:s,setDefaultHighWaterMark:l},state}var string_decoder={},safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,(function(e,t){var i=requireBuffer(),r=i.Buffer;function n(o,s){for(var l in o)s[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(n(i,t),t.Buffer=a);function a(o,s,l){return r(o,s,l)}a.prototype=Object.create(r.prototype),n(r,a),a.from=function(o,s,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,s,l)},a.alloc=function(o,s,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=r(o);return s!==void 0?typeof l=="string"?u.fill(s,l):u.fill(s):u.fill(0),u},a.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},a.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(o)}})(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var e=requireSafeBuffer().Buffer,t=e.isEncoding||function(T){switch(T=""+T,T&&T.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(T){if(!T)return"utf8";for(var E;;)switch(T){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return T;default:if(E)return;T=(""+T).toLowerCase(),E=!0}}function r(T){var E=i(T);if(typeof E!="string"&&(e.isEncoding===t||!t(T)))throw new Error("Unknown encoding: "+T);return E||T}string_decoder.StringDecoder=n;function n(T){this.encoding=r(T);var E;switch(this.encoding){case"utf16le":this.text=m,this.end=f,E=4;break;case"utf8":this.fillLast=l,E=4;break;case"base64":this.text=d,this.end=b,E=3;break;default:this.write=y,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(E)}n.prototype.write=function(T){if(T.length===0)return"";var E,R;if(this.lastNeed){if(E=this.fillLast(T),E===void 0)return"";R=this.lastNeed,this.lastNeed=0}else R=0;return R<T.length?E?E+this.text(T,R):this.text(T,R):E||""},n.prototype.end=c,n.prototype.text=u,n.prototype.fillLast=function(T){if(this.lastNeed<=T.length)return T.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);T.copy(this.lastChar,this.lastTotal-this.lastNeed,0,T.length),this.lastNeed-=T.length};function a(T){return T<=127?0:T>>5===6?2:T>>4===14?3:T>>3===30?4:T>>6===2?-1:-2}function o(T,E,R){var C=E.length-1;if(C<R)return 0;var B=a(E[C]);return B>=0?(B>0&&(T.lastNeed=B-1),B):--C<R||B===-2?0:(B=a(E[C]),B>=0?(B>0&&(T.lastNeed=B-2),B):--C<R||B===-2?0:(B=a(E[C]),B>=0?(B>0&&(B===2?B=0:T.lastNeed=B-3),B):0))}function s(T,E,R){if((E[0]&192)!==128)return T.lastNeed=0,"";if(T.lastNeed>1&&E.length>1){if((E[1]&192)!==128)return T.lastNeed=1,"";if(T.lastNeed>2&&E.length>2&&(E[2]&192)!==128)return T.lastNeed=2,""}}function l(T){var E=this.lastTotal-this.lastNeed,R=s(this,T);if(R!==void 0)return R;if(this.lastNeed<=T.length)return T.copy(this.lastChar,E,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);T.copy(this.lastChar,E,0,T.length),this.lastNeed-=T.length}function u(T,E){var R=o(this,T,E);if(!this.lastNeed)return T.toString("utf8",E);this.lastTotal=R;var C=T.length-(R-this.lastNeed);return T.copy(this.lastChar,0,C),T.toString("utf8",E,C)}function c(T){var E=T&&T.length?this.write(T):"";return this.lastNeed?E+"":E}function m(T,E){if((T.length-E)%2===0){var R=T.toString("utf16le",E);if(R){var C=R.charCodeAt(R.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=T[T.length-2],this.lastChar[1]=T[T.length-1],R.slice(0,-1)}return R}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=T[T.length-1],T.toString("utf16le",E,T.length-1)}function f(T){var E=T&&T.length?this.write(T):"";if(this.lastNeed){var R=this.lastTotal-this.lastNeed;return E+this.lastChar.toString("utf16le",0,R)}return E}function d(T,E){var R=(T.length-E)%3;return R===0?T.toString("base64",E):(this.lastNeed=3-R,this.lastTotal=3,R===1?this.lastChar[0]=T[T.length-1]:(this.lastChar[0]=T[T.length-2],this.lastChar[1]=T[T.length-1]),T.toString("base64",E,T.length-R))}function b(T){var E=T&&T.length?this.write(T):"";return this.lastNeed?E+this.lastChar.toString("base64",0,3-this.lastNeed):E}function y(T){return T.toString(this.encoding)}function w(T){return T&&T.length?this.write(T):""}return string_decoder}var from_1,hasRequiredFrom;function requireFrom(){if(hasRequiredFrom)return from_1;hasRequiredFrom=1;const e=requireBrowser$1(),{PromisePrototypeThen:t,SymbolAsyncIterator:i,SymbolIterator:r}=requirePrimordials(),{Buffer:n}=requireBuffer(),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_NULL_VALUES:o}=requireErrors().codes;function s(l,u,c){let m;if(typeof u=="string"||u instanceof n)return new l({objectMode:!0,...c,read(){this.push(u),this.push(null)}});let f;if(u&&u[i])f=!0,m=u[i]();else if(u&&u[r])f=!1,m=u[r]();else throw new a("iterable",["Iterable"],u);const d=new l({objectMode:!0,highWaterMark:1,...c});let b=!1;d._read=function(){b||(b=!0,w())},d._destroy=function(T,E){t(y(T),()=>e.nextTick(E,T),R=>e.nextTick(E,R||T))};async function y(T){const E=T!=null,R=typeof m.throw=="function";if(E&&R){const{value:C,done:B}=await m.throw(T);if(await C,B)return}if(typeof m.return=="function"){const{value:C}=await m.return();await C}}async function w(){for(;;){try{const{value:T,done:E}=f?await m.next():m.next();if(E)d.push(null);else{const R=T&&typeof T.then=="function"?await T:T;if(R===null)throw b=!1,new o;if(d.push(R))continue;b=!1}}catch(T){d.destroy(T)}break}}return d}return from_1=s,from_1}var readable,hasRequiredReadable;function requireReadable(){if(hasRequiredReadable)return readable;hasRequiredReadable=1;const e=requireBrowser$1(),{ArrayPrototypeIndexOf:t,NumberIsInteger:i,NumberIsNaN:r,NumberParseInt:n,ObjectDefineProperties:a,ObjectKeys:o,ObjectSetPrototypeOf:s,Promise:l,SafeSet:u,SymbolAsyncDispose:c,SymbolAsyncIterator:m,Symbol:f}=requirePrimordials();readable=X,X.ReadableState=V;const{EventEmitter:d}=requireEvents(),{Stream:b,prependListener:y}=requireLegacy(),{Buffer:w}=requireBuffer(),{addAbortSignal:T}=requireAddAbortSignal(),E=requireEndOfStream();let R=requireUtil().debuglog("stream",P=>{R=P});const C=requireBuffer_list(),B=requireDestroy(),{getHighWaterMark:D,getDefaultHighWaterMark:_}=requireState(),{aggregateTwoErrors:x,codes:{ERR_INVALID_ARG_TYPE:ee,ERR_METHOD_NOT_IMPLEMENTED:N,ERR_OUT_OF_RANGE:U,ERR_STREAM_PUSH_AFTER_EOF:Z,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:H},AbortError:se}=requireErrors(),{validateObject:fe}=requireValidators(),le=f("kPaused"),{StringDecoder:ge}=requireString_decoder(),Y=requireFrom();s(X.prototype,b.prototype),s(X,b);const he=()=>{},{errorOrDestroy:q}=B,Q=1,ae=2,ie=4,me=8,ye=16,_e=32,we=64,re=128,W=256,J=512,oe=1024,k=2048,v=4096,I=8192,O=16384,z=32768,j=65536,K=1<<17,M=1<<18;function $(P){return{enumerable:!1,get(){return(this.state&P)!==0},set(F){F?this.state|=P:this.state&=~P}}}a(V.prototype,{objectMode:$(Q),ended:$(ae),endEmitted:$(ie),reading:$(me),constructed:$(ye),sync:$(_e),needReadable:$(we),emittedReadable:$(re),readableListening:$(W),resumeScheduled:$(J),errorEmitted:$(oe),emitClose:$(k),autoDestroy:$(v),destroyed:$(I),closed:$(O),closeEmitted:$(z),multiAwaitDrain:$(j),readingMore:$(K),dataEmitted:$(M)});function V(P,F,ue){typeof ue!="boolean"&&(ue=F instanceof requireDuplex()),this.state=k|v|ye|_e,P&&P.objectMode&&(this.state|=Q),ue&&P&&P.readableObjectMode&&(this.state|=Q),this.highWaterMark=P?D(this,P,"readableHighWaterMark",ue):_(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[le]=null,P&&P.emitClose===!1&&(this.state&=~k),P&&P.autoDestroy===!1&&(this.state&=~v),this.errored=null,this.defaultEncoding=P&&P.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,P&&P.encoding&&(this.decoder=new ge(P.encoding),this.encoding=P.encoding)}function X(P){if(!(this instanceof X))return new X(P);const F=this instanceof requireDuplex();this._readableState=new V(P,this,F),P&&(typeof P.read=="function"&&(this._read=P.read),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.construct=="function"&&(this._construct=P.construct),P.signal&&!F&&T(P.signal,this)),b.call(this,P),B.construct(this,()=>{this._readableState.needReadable&&L(this,this._readableState)})}X.prototype.destroy=B.destroy,X.prototype._undestroy=B.undestroy,X.prototype._destroy=function(P,F){F(P)},X.prototype[d.captureRejectionSymbol]=function(P){this.destroy(P)},X.prototype[c]=function(){let P;return this.destroyed||(P=this.readableEnded?null:new se,this.destroy(P)),new l((F,ue)=>E(this,ce=>ce&&ce!==P?ue(ce):F(null)))},X.prototype.push=function(P,F){return te(this,P,F,!1)},X.prototype.unshift=function(P,F){return te(this,P,F,!0)};function te(P,F,ue,ce){R("readableAddChunk",F);const be=P._readableState;let ke;if((be.state&Q)===0&&(typeof F=="string"?(ue=ue||be.defaultEncoding,be.encoding!==ue&&(ce&&be.encoding?F=w.from(F,ue).toString(be.encoding):(F=w.from(F,ue),ue=""))):F instanceof w?ue="":b._isUint8Array(F)?(F=b._uint8ArrayToBuffer(F),ue=""):F!=null&&(ke=new ee("chunk",["string","Buffer","Uint8Array"],F))),ke)q(P,ke);else if(F===null)be.state&=~me,h(P,be);else if((be.state&Q)!==0||F&&F.length>0)if(ce)if((be.state&ie)!==0)q(P,new H);else{if(be.destroyed||be.errored)return!1;pe(P,be,F,!0)}else if(be.ended)q(P,new Z);else{if(be.destroyed||be.errored)return!1;be.state&=~me,be.decoder&&!ue?(F=be.decoder.write(F),be.objectMode||F.length!==0?pe(P,be,F,!1):L(P,be)):pe(P,be,F,!1)}else ce||(be.state&=~me,L(P,be));return!be.ended&&(be.length<be.highWaterMark||be.length===0)}function pe(P,F,ue,ce){F.flowing&&F.length===0&&!F.sync&&P.listenerCount("data")>0?((F.state&j)!==0?F.awaitDrainWriters.clear():F.awaitDrainWriters=null,F.dataEmitted=!0,P.emit("data",ue)):(F.length+=F.objectMode?1:ue.length,ce?F.buffer.unshift(ue):F.buffer.push(ue),(F.state&we)!==0&&g(P)),L(P,F)}X.prototype.isPaused=function(){const P=this._readableState;return P[le]===!0||P.flowing===!1},X.prototype.setEncoding=function(P){const F=new ge(P);this._readableState.decoder=F,this._readableState.encoding=this._readableState.decoder.encoding;const ue=this._readableState.buffer;let ce="";for(const be of ue)ce+=F.write(be);return ue.clear(),ce!==""&&ue.push(ce),this._readableState.length=ce.length,this};const de=1073741824;function Te(P){if(P>de)throw new U("size","<= 1GiB",P);return P--,P|=P>>>1,P|=P>>>2,P|=P>>>4,P|=P>>>8,P|=P>>>16,P++,P}function S(P,F){return P<=0||F.length===0&&F.ended?0:(F.state&Q)!==0?1:r(P)?F.flowing&&F.length?F.buffer.first().length:F.length:P<=F.length?P:F.ended?F.length:0}X.prototype.read=function(P){R("read",P),P===void 0?P=NaN:i(P)||(P=n(P,10));const F=this._readableState,ue=P;if(P>F.highWaterMark&&(F.highWaterMark=Te(P)),P!==0&&(F.state&=~re),P===0&&F.needReadable&&((F.highWaterMark!==0?F.length>=F.highWaterMark:F.length>0)||F.ended))return R("read: emitReadable",F.length,F.ended),F.length===0&&F.ended?Ne(this):g(this),null;if(P=S(P,F),P===0&&F.ended)return F.length===0&&Ne(this),null;let ce=(F.state&we)!==0;if(R("need readable",ce),(F.length===0||F.length-P<F.highWaterMark)&&(ce=!0,R("length less than watermark",ce)),F.ended||F.reading||F.destroyed||F.errored||!F.constructed)ce=!1,R("reading, ended or constructing",ce);else if(ce){R("do read"),F.state|=me|_e,F.length===0&&(F.state|=we);try{this._read(F.highWaterMark)}catch(ke){q(this,ke)}F.state&=~_e,F.reading||(P=S(ue,F))}let be;return P>0?be=Xe(P,F):be=null,be===null?(F.needReadable=F.length<=F.highWaterMark,P=0):(F.length-=P,F.multiAwaitDrain?F.awaitDrainWriters.clear():F.awaitDrainWriters=null),F.length===0&&(F.ended||(F.needReadable=!0),ue!==P&&F.ended&&Ne(this)),be!==null&&!F.errorEmitted&&!F.closeEmitted&&(F.dataEmitted=!0,this.emit("data",be)),be};function h(P,F){if(R("onEofChunk"),!F.ended){if(F.decoder){const ue=F.decoder.end();ue&&ue.length&&(F.buffer.push(ue),F.length+=F.objectMode?1:ue.length)}F.ended=!0,F.sync?g(P):(F.needReadable=!1,F.emittedReadable=!0,A(P))}}function g(P){const F=P._readableState;R("emitReadable",F.needReadable,F.emittedReadable),F.needReadable=!1,F.emittedReadable||(R("emitReadable",F.flowing),F.emittedReadable=!0,e.nextTick(A,P))}function A(P){const F=P._readableState;R("emitReadable_",F.destroyed,F.length,F.ended),!F.destroyed&&!F.errored&&(F.length||F.ended)&&(P.emit("readable"),F.emittedReadable=!1),F.needReadable=!F.flowing&&!F.ended&&F.length<=F.highWaterMark,xe(P)}function L(P,F){!F.readingMore&&F.constructed&&(F.readingMore=!0,e.nextTick(G,P,F))}function G(P,F){for(;!F.reading&&!F.ended&&(F.length<F.highWaterMark||F.flowing&&F.length===0);){const ue=F.length;if(R("maybeReadMore read 0"),P.read(0),ue===F.length)break}F.readingMore=!1}X.prototype._read=function(P){throw new N("_read()")},X.prototype.pipe=function(P,F){const ue=this,ce=this._readableState;ce.pipes.length===1&&(ce.multiAwaitDrain||(ce.multiAwaitDrain=!0,ce.awaitDrainWriters=new u(ce.awaitDrainWriters?[ce.awaitDrainWriters]:[]))),ce.pipes.push(P),R("pipe count=%d opts=%j",ce.pipes.length,F);const ke=(!F||F.end!==!1)&&P!==e.stdout&&P!==e.stderr?Ye:Fe;ce.endEmitted?e.nextTick(ke):ue.once("end",ke),P.on("unpipe",Re);function Re(De,Ae){R("onunpipe"),De===ue&&Ae&&Ae.hasUnpiped===!1&&(Ae.hasUnpiped=!0,ot())}function Ye(){R("onend"),P.end()}let Be,Je=!1;function ot(){R("cleanup"),P.removeListener("close",ze),P.removeListener("finish",$e),Be&&P.removeListener("drain",Be),P.removeListener("error",Ue),P.removeListener("unpipe",Re),ue.removeListener("end",Ye),ue.removeListener("end",Fe),ue.removeListener("data",Qe),Je=!0,Be&&ce.awaitDrainWriters&&(!P._writableState||P._writableState.needDrain)&&Be()}function Ze(){Je||(ce.pipes.length===1&&ce.pipes[0]===P?(R("false write response, pause",0),ce.awaitDrainWriters=P,ce.multiAwaitDrain=!1):ce.pipes.length>1&&ce.pipes.includes(P)&&(R("false write response, pause",ce.awaitDrainWriters.size),ce.awaitDrainWriters.add(P)),ue.pause()),Be||(Be=ne(ue,P),P.on("drain",Be))}ue.on("data",Qe);function Qe(De){R("ondata");const Ae=P.write(De);R("dest.write",Ae),Ae===!1&&Ze()}function Ue(De){if(R("onerror",De),Fe(),P.removeListener("error",Ue),P.listenerCount("error")===0){const Ae=P._writableState||P._readableState;Ae&&!Ae.errorEmitted?q(P,De):P.emit("error",De)}}y(P,"error",Ue);function ze(){P.removeListener("finish",$e),Fe()}P.once("close",ze);function $e(){R("onfinish"),P.removeListener("close",ze),Fe()}P.once("finish",$e);function Fe(){R("unpipe"),ue.unpipe(P)}return P.emit("pipe",ue),P.writableNeedDrain===!0?Ze():ce.flowing||(R("pipe resume"),ue.resume()),P};function ne(P,F){return function(){const ce=P._readableState;ce.awaitDrainWriters===F?(R("pipeOnDrain",1),ce.awaitDrainWriters=null):ce.multiAwaitDrain&&(R("pipeOnDrain",ce.awaitDrainWriters.size),ce.awaitDrainWriters.delete(F)),(!ce.awaitDrainWriters||ce.awaitDrainWriters.size===0)&&P.listenerCount("data")&&P.resume()}}X.prototype.unpipe=function(P){const F=this._readableState,ue={hasUnpiped:!1};if(F.pipes.length===0)return this;if(!P){const be=F.pipes;F.pipes=[],this.pause();for(let ke=0;ke<be.length;ke++)be[ke].emit("unpipe",this,{hasUnpiped:!1});return this}const ce=t(F.pipes,P);return ce===-1?this:(F.pipes.splice(ce,1),F.pipes.length===0&&this.pause(),P.emit("unpipe",this,ue),this)},X.prototype.on=function(P,F){const ue=b.prototype.on.call(this,P,F),ce=this._readableState;return P==="data"?(ce.readableListening=this.listenerCount("readable")>0,ce.flowing!==!1&&this.resume()):P==="readable"&&!ce.endEmitted&&!ce.readableListening&&(ce.readableListening=ce.needReadable=!0,ce.flowing=!1,ce.emittedReadable=!1,R("on readable",ce.length,ce.reading),ce.length?g(this):ce.reading||e.nextTick(Se,this)),ue},X.prototype.addListener=X.prototype.on,X.prototype.removeListener=function(P,F){const ue=b.prototype.removeListener.call(this,P,F);return P==="readable"&&e.nextTick(ve,this),ue},X.prototype.off=X.prototype.removeListener,X.prototype.removeAllListeners=function(P){const F=b.prototype.removeAllListeners.apply(this,arguments);return(P==="readable"||P===void 0)&&e.nextTick(ve,this),F};function ve(P){const F=P._readableState;F.readableListening=P.listenerCount("readable")>0,F.resumeScheduled&&F[le]===!1?F.flowing=!0:P.listenerCount("data")>0?P.resume():F.readableListening||(F.flowing=null)}function Se(P){R("readable nexttick read 0"),P.read(0)}X.prototype.resume=function(){const P=this._readableState;return P.flowing||(R("resume"),P.flowing=!P.readableListening,Ee(this,P)),P[le]=!1,this};function Ee(P,F){F.resumeScheduled||(F.resumeScheduled=!0,e.nextTick(Ie,P,F))}function Ie(P,F){R("resume",F.reading),F.reading||P.read(0),F.resumeScheduled=!1,P.emit("resume"),xe(P),F.flowing&&!F.reading&&P.read(0)}X.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[le]=!0,this};function xe(P){const F=P._readableState;for(R("flow",F.flowing);F.flowing&&P.read()!==null;);}X.prototype.wrap=function(P){let F=!1;P.on("data",ce=>{!this.push(ce)&&P.pause&&(F=!0,P.pause())}),P.on("end",()=>{this.push(null)}),P.on("error",ce=>{q(this,ce)}),P.on("close",()=>{this.destroy()}),P.on("destroy",()=>{this.destroy()}),this._read=()=>{F&&P.resume&&(F=!1,P.resume())};const ue=o(P);for(let ce=1;ce<ue.length;ce++){const be=ue[ce];this[be]===void 0&&typeof P[be]=="function"&&(this[be]=P[be].bind(P))}return this},X.prototype[m]=function(){return Ge(this)},X.prototype.iterator=function(P){return P!==void 0&&fe(P,"options"),Ge(this,P)};function Ge(P,F){typeof P.read!="function"&&(P=X.wrap(P,{objectMode:!0}));const ue=nt(P,F);return ue.stream=P,ue}async function*nt(P,F){let ue=he;function ce(Re){this===P?(ue(),ue=he):ue=Re}P.on("readable",ce);let be;const ke=E(P,{writable:!1},Re=>{be=Re?x(be,Re):null,ue(),ue=he});try{for(;;){const Re=P.destroyed?null:P.read();if(Re!==null)yield Re;else{if(be)throw be;if(be===null)return;await new l(ce)}}}catch(Re){throw be=x(be,Re),be}finally{(be||F?.destroyOnReturn!==!1)&&(be===void 0||P._readableState.autoDestroy)?B.destroyer(P,null):(P.off("readable",ce),ke())}}a(X.prototype,{readable:{__proto__:null,get(){const P=this._readableState;return!!P&&P.readable!==!1&&!P.destroyed&&!P.errorEmitted&&!P.endEmitted},set(P){this._readableState&&(this._readableState.readable=!!P)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(P){this._readableState&&(this._readableState.flowing=P)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(P){this._readableState&&(this._readableState.destroyed=P)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),a(V.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[le]!==!1},set(P){this[le]=!!P}}}),X._fromList=Xe;function Xe(P,F){if(F.length===0)return null;let ue;return F.objectMode?ue=F.buffer.shift():!P||P>=F.length?(F.decoder?ue=F.buffer.join(""):F.buffer.length===1?ue=F.buffer.first():ue=F.buffer.concat(F.length),F.buffer.clear()):ue=F.buffer.consume(P,F.decoder),ue}function Ne(P){const F=P._readableState;R("endReadable",F.endEmitted),F.endEmitted||(F.ended=!0,e.nextTick(at,F,P))}function at(P,F){if(R("endReadableNT",P.endEmitted,P.length),!P.errored&&!P.closeEmitted&&!P.endEmitted&&P.length===0){if(P.endEmitted=!0,F.emit("end"),F.writable&&F.allowHalfOpen===!1)e.nextTick(st,F);else if(P.autoDestroy){const ue=F._writableState;(!ue||ue.autoDestroy&&(ue.finished||ue.writable===!1))&&F.destroy()}}}function st(P){P.writable&&!P.writableEnded&&!P.destroyed&&P.end()}X.from=function(P,F){return Y(X,P,F)};let Le;function Ke(){return Le===void 0&&(Le={}),Le}return X.fromWeb=function(P,F){return Ke().newStreamReadableFromReadableStream(P,F)},X.toWeb=function(P,F){return Ke().newReadableStreamFromStreamReadable(P,F)},X.wrap=function(P,F){var ue,ce;return new X({objectMode:(ue=(ce=P.readableObjectMode)!==null&&ce!==void 0?ce:P.objectMode)!==null&&ue!==void 0?ue:!0,...F,destroy(be,ke){B.destroyer(P,be),ke(be)}}).wrap(P)},readable}var writable,hasRequiredWritable;function requireWritable(){if(hasRequiredWritable)return writable;hasRequiredWritable=1;const e=requireBrowser$1(),{ArrayPrototypeSlice:t,Error:i,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:n,ObjectDefineProperties:a,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:s,Symbol:l,SymbolHasInstance:u}=requirePrimordials();writable=fe,fe.WritableState=H;const{EventEmitter:c}=requireEvents(),m=requireLegacy().Stream,{Buffer:f}=requireBuffer(),d=requireDestroy(),{addAbortSignal:b}=requireAddAbortSignal(),{getHighWaterMark:y,getDefaultHighWaterMark:w}=requireState(),{ERR_INVALID_ARG_TYPE:T,ERR_METHOD_NOT_IMPLEMENTED:E,ERR_MULTIPLE_CALLBACK:R,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:B,ERR_STREAM_ALREADY_FINISHED:D,ERR_STREAM_NULL_VALUES:_,ERR_STREAM_WRITE_AFTER_END:x,ERR_UNKNOWN_ENCODING:ee}=requireErrors().codes,{errorOrDestroy:N}=d;o(fe.prototype,m.prototype),o(fe,m);function U(){}const Z=l("kOnFinished");function H(v,I,O){typeof O!="boolean"&&(O=I instanceof requireDuplex()),this.objectMode=!!(v&&v.objectMode),O&&(this.objectMode=this.objectMode||!!(v&&v.writableObjectMode)),this.highWaterMark=v?y(this,v,"writableHighWaterMark",O):w(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const z=!!(v&&v.decodeStrings===!1);this.decodeStrings=!z,this.defaultEncoding=v&&v.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=q.bind(void 0,I),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,se(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!v||v.emitClose!==!1,this.autoDestroy=!v||v.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Z]=[]}function se(v){v.buffered=[],v.bufferedIndex=0,v.allBuffers=!0,v.allNoop=!0}H.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},n(H.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function fe(v){const I=this instanceof requireDuplex();if(!I&&!r(fe,this))return new fe(v);this._writableState=new H(v,this,I),v&&(typeof v.write=="function"&&(this._write=v.write),typeof v.writev=="function"&&(this._writev=v.writev),typeof v.destroy=="function"&&(this._destroy=v.destroy),typeof v.final=="function"&&(this._final=v.final),typeof v.construct=="function"&&(this._construct=v.construct),v.signal&&b(v.signal,this)),m.call(this,v),d.construct(this,()=>{const O=this._writableState;O.writing||me(this,O),re(this,O)})}n(fe,u,{__proto__:null,value:function(v){return r(this,v)?!0:this!==fe?!1:v&&v._writableState instanceof H}}),fe.prototype.pipe=function(){N(this,new C)};function le(v,I,O,z){const j=v._writableState;if(typeof O=="function")z=O,O=j.defaultEncoding;else{if(!O)O=j.defaultEncoding;else if(O!=="buffer"&&!f.isEncoding(O))throw new ee(O);typeof z!="function"&&(z=U)}if(I===null)throw new _;if(!j.objectMode)if(typeof I=="string")j.decodeStrings!==!1&&(I=f.from(I,O),O="buffer");else if(I instanceof f)O="buffer";else if(m._isUint8Array(I))I=m._uint8ArrayToBuffer(I),O="buffer";else throw new T("chunk",["string","Buffer","Uint8Array"],I);let K;return j.ending?K=new x:j.destroyed&&(K=new B("write")),K?(e.nextTick(z,K),N(v,K,!0),K):(j.pendingcb++,ge(v,j,I,O,z))}fe.prototype.write=function(v,I,O){return le(this,v,I,O)===!0},fe.prototype.cork=function(){this._writableState.corked++},fe.prototype.uncork=function(){const v=this._writableState;v.corked&&(v.corked--,v.writing||me(this,v))},fe.prototype.setDefaultEncoding=function(I){if(typeof I=="string"&&(I=s(I)),!f.isEncoding(I))throw new ee(I);return this._writableState.defaultEncoding=I,this};function ge(v,I,O,z,j){const K=I.objectMode?1:O.length;I.length+=K;const M=I.length<I.highWaterMark;return M||(I.needDrain=!0),I.writing||I.corked||I.errored||!I.constructed?(I.buffered.push({chunk:O,encoding:z,callback:j}),I.allBuffers&&z!=="buffer"&&(I.allBuffers=!1),I.allNoop&&j!==U&&(I.allNoop=!1)):(I.writelen=K,I.writecb=j,I.writing=!0,I.sync=!0,v._write(O,z,I.onwrite),I.sync=!1),M&&!I.errored&&!I.destroyed}function Y(v,I,O,z,j,K,M){I.writelen=z,I.writecb=M,I.writing=!0,I.sync=!0,I.destroyed?I.onwrite(new B("write")):O?v._writev(j,I.onwrite):v._write(j,K,I.onwrite),I.sync=!1}function he(v,I,O,z){--I.pendingcb,z(O),ie(I),N(v,O)}function q(v,I){const O=v._writableState,z=O.sync,j=O.writecb;if(typeof j!="function"){N(v,new R);return}O.writing=!1,O.writecb=null,O.length-=O.writelen,O.writelen=0,I?(I.stack,O.errored||(O.errored=I),v._readableState&&!v._readableState.errored&&(v._readableState.errored=I),z?e.nextTick(he,v,O,I,j):he(v,O,I,j)):(O.buffered.length>O.bufferedIndex&&me(v,O),z?O.afterWriteTickInfo!==null&&O.afterWriteTickInfo.cb===j?O.afterWriteTickInfo.count++:(O.afterWriteTickInfo={count:1,cb:j,stream:v,state:O},e.nextTick(Q,O.afterWriteTickInfo)):ae(v,O,1,j))}function Q({stream:v,state:I,count:O,cb:z}){return I.afterWriteTickInfo=null,ae(v,I,O,z)}function ae(v,I,O,z){for(!I.ending&&!v.destroyed&&I.length===0&&I.needDrain&&(I.needDrain=!1,v.emit("drain"));O-- >0;)I.pendingcb--,z();I.destroyed&&ie(I),re(v,I)}function ie(v){if(v.writing)return;for(let j=v.bufferedIndex;j<v.buffered.length;++j){var I;const{chunk:K,callback:M}=v.buffered[j],$=v.objectMode?1:K.length;v.length-=$,M((I=v.errored)!==null&&I!==void 0?I:new B("write"))}const O=v[Z].splice(0);for(let j=0;j<O.length;j++){var z;O[j]((z=v.errored)!==null&&z!==void 0?z:new B("end"))}se(v)}function me(v,I){if(I.corked||I.bufferProcessing||I.destroyed||!I.constructed)return;const{buffered:O,bufferedIndex:z,objectMode:j}=I,K=O.length-z;if(!K)return;let M=z;if(I.bufferProcessing=!0,K>1&&v._writev){I.pendingcb-=K-1;const $=I.allNoop?U:X=>{for(let te=M;te<O.length;++te)O[te].callback(X)},V=I.allNoop&&M===0?O:t(O,M);V.allBuffers=I.allBuffers,Y(v,I,!0,I.length,V,"",$),se(I)}else{do{const{chunk:$,encoding:V,callback:X}=O[M];O[M++]=null;const te=j?1:$.length;Y(v,I,!1,te,$,V,X)}while(M<O.length&&!I.writing);M===O.length?se(I):M>256?(O.splice(0,M),I.bufferedIndex=0):I.bufferedIndex=M}I.bufferProcessing=!1}fe.prototype._write=function(v,I,O){if(this._writev)this._writev([{chunk:v,encoding:I}],O);else throw new E("_write()")},fe.prototype._writev=null,fe.prototype.end=function(v,I,O){const z=this._writableState;typeof v=="function"?(O=v,v=null,I=null):typeof I=="function"&&(O=I,I=null);let j;if(v!=null){const K=le(this,v,I);K instanceof i&&(j=K)}return z.corked&&(z.corked=1,this.uncork()),j||(!z.errored&&!z.ending?(z.ending=!0,re(this,z,!0),z.ended=!0):z.finished?j=new D("end"):z.destroyed&&(j=new B("end"))),typeof O=="function"&&(j||z.finished?e.nextTick(O,j):z[Z].push(O)),this};function ye(v){return v.ending&&!v.destroyed&&v.constructed&&v.length===0&&!v.errored&&v.buffered.length===0&&!v.finished&&!v.writing&&!v.errorEmitted&&!v.closeEmitted}function _e(v,I){let O=!1;function z(j){if(O){N(v,j??R());return}if(O=!0,I.pendingcb--,j){const K=I[Z].splice(0);for(let M=0;M<K.length;M++)K[M](j);N(v,j,I.sync)}else ye(I)&&(I.prefinished=!0,v.emit("prefinish"),I.pendingcb++,e.nextTick(W,v,I))}I.sync=!0,I.pendingcb++;try{v._final(z)}catch(j){z(j)}I.sync=!1}function we(v,I){!I.prefinished&&!I.finalCalled&&(typeof v._final=="function"&&!I.destroyed?(I.finalCalled=!0,_e(v,I)):(I.prefinished=!0,v.emit("prefinish")))}function re(v,I,O){ye(I)&&(we(v,I),I.pendingcb===0&&(O?(I.pendingcb++,e.nextTick((z,j)=>{ye(j)?W(z,j):j.pendingcb--},v,I)):ye(I)&&(I.pendingcb++,W(v,I))))}function W(v,I){I.pendingcb--,I.finished=!0;const O=I[Z].splice(0);for(let z=0;z<O.length;z++)O[z]();if(v.emit("finish"),I.autoDestroy){const z=v._readableState;(!z||z.autoDestroy&&(z.endEmitted||z.readable===!1))&&v.destroy()}}a(fe.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(v){this._writableState&&(this._writableState.destroyed=v)}},writable:{__proto__:null,get(){const v=this._writableState;return!!v&&v.writable!==!1&&!v.destroyed&&!v.errored&&!v.ending&&!v.ended},set(v){this._writableState&&(this._writableState.writable=!!v)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const v=this._writableState;return v?!v.destroyed&&!v.ending&&v.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const J=d.destroy;fe.prototype.destroy=function(v,I){const O=this._writableState;return!O.destroyed&&(O.bufferedIndex<O.buffered.length||O[Z].length)&&e.nextTick(ie,O),J.call(this,v,I),this},fe.prototype._undestroy=d.undestroy,fe.prototype._destroy=function(v,I){I(v)},fe.prototype[c.captureRejectionSymbol]=function(v){this.destroy(v)};let oe;function k(){return oe===void 0&&(oe={}),oe}return fe.fromWeb=function(v,I){return k().newStreamWritableFromWritableStream(v,I)},fe.toWeb=function(v){return k().newWritableStreamFromStreamWritable(v)},writable}var duplexify,hasRequiredDuplexify;function requireDuplexify(){if(hasRequiredDuplexify)return duplexify;hasRequiredDuplexify=1;const e=requireBrowser$1(),t=requireBuffer(),{isReadable:i,isWritable:r,isIterable:n,isNodeStream:a,isReadableNodeStream:o,isWritableNodeStream:s,isDuplexNodeStream:l,isReadableStream:u,isWritableStream:c}=requireUtils(),m=requireEndOfStream(),{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:b}}=requireErrors(),{destroyer:y}=requireDestroy(),w=requireDuplex(),T=requireReadable(),E=requireWritable(),{createDeferredPromise:R}=requireUtil(),C=requireFrom(),B=globalThis.Blob||t.Blob,D=typeof B<"u"?function(H){return H instanceof B}:function(H){return!1},_=globalThis.AbortController||requireBrowser$2().AbortController,{FunctionPrototypeCall:x}=requirePrimordials();class ee extends w{constructor(H){super(H),H?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),H?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}duplexify=function Z(H,se){if(l(H))return H;if(o(H))return U({readable:H});if(s(H))return U({writable:H});if(a(H))return U({writable:!1,readable:!1});if(u(H))return U({readable:T.fromWeb(H)});if(c(H))return U({writable:E.fromWeb(H)});if(typeof H=="function"){const{value:le,write:ge,final:Y,destroy:he}=N(H);if(n(le))return C(ee,le,{objectMode:!0,write:ge,final:Y,destroy:he});const q=le?.then;if(typeof q=="function"){let Q;const ae=x(q,le,ie=>{if(ie!=null)throw new b("nully","body",ie)},ie=>{y(Q,ie)});return Q=new ee({objectMode:!0,readable:!1,write:ge,final(ie){Y(async()=>{try{await ae,e.nextTick(ie,null)}catch(me){e.nextTick(ie,me)}})},destroy:he})}throw new b("Iterable, AsyncIterable or AsyncFunction",se,le)}if(D(H))return Z(H.arrayBuffer());if(n(H))return C(ee,H,{objectMode:!0,writable:!1});if(u(H?.readable)&&c(H?.writable))return ee.fromWeb(H);if(typeof H?.writable=="object"||typeof H?.readable=="object"){const le=H!=null&&H.readable?o(H?.readable)?H?.readable:Z(H.readable):void 0,ge=H!=null&&H.writable?s(H?.writable)?H?.writable:Z(H.writable):void 0;return U({readable:le,writable:ge})}const fe=H?.then;if(typeof fe=="function"){let le;return x(fe,H,ge=>{ge!=null&&le.push(ge),le.push(null)},ge=>{y(le,ge)}),le=new ee({objectMode:!0,writable:!1,read(){}})}throw new d(se,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],H)};function N(Z){let{promise:H,resolve:se}=R();const fe=new _,le=fe.signal;return{value:Z((async function*(){for(;;){const Y=H;H=null;const{chunk:he,done:q,cb:Q}=await Y;if(e.nextTick(Q),q)return;if(le.aborted)throw new f(void 0,{cause:le.reason});({promise:H,resolve:se}=R()),yield he}})(),{signal:le}),write(Y,he,q){const Q=se;se=null,Q({chunk:Y,done:!1,cb:q})},final(Y){const he=se;se=null,he({done:!0,cb:Y})},destroy(Y,he){fe.abort(),he(Y)}}}function U(Z){const H=Z.readable&&typeof Z.readable.read!="function"?T.wrap(Z.readable):Z.readable,se=Z.writable;let fe=!!i(H),le=!!r(se),ge,Y,he,q,Q;function ae(ie){const me=q;q=null,me?me(ie):ie&&Q.destroy(ie)}return Q=new ee({readableObjectMode:!!(H!=null&&H.readableObjectMode),writableObjectMode:!!(se!=null&&se.writableObjectMode),readable:fe,writable:le}),le&&(m(se,ie=>{le=!1,ie&&y(H,ie),ae(ie)}),Q._write=function(ie,me,ye){se.write(ie,me)?ye():ge=ye},Q._final=function(ie){se.end(),Y=ie},se.on("drain",function(){if(ge){const ie=ge;ge=null,ie()}}),se.on("finish",function(){if(Y){const ie=Y;Y=null,ie()}})),fe&&(m(H,ie=>{fe=!1,ie&&y(H,ie),ae(ie)}),H.on("readable",function(){if(he){const ie=he;he=null,ie()}}),H.on("end",function(){Q.push(null)}),Q._read=function(){for(;;){const ie=H.read();if(ie===null){he=Q._read;return}if(!Q.push(ie))return}}),Q._destroy=function(ie,me){!ie&&q!==null&&(ie=new f),he=null,ge=null,Y=null,q===null?me(ie):(q=me,y(se,ie),y(H,ie))},Q}return duplexify}var duplex,hasRequiredDuplex;function requireDuplex(){if(hasRequiredDuplex)return duplex;hasRequiredDuplex=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:i,ObjectSetPrototypeOf:r}=requirePrimordials();duplex=o;const n=requireReadable(),a=requireWritable();r(o.prototype,n.prototype),r(o,n);{const c=i(a.prototype);for(let m=0;m<c.length;m++){const f=c[m];o.prototype[f]||(o.prototype[f]=a.prototype[f])}}function o(c){if(!(this instanceof o))return new o(c);n.call(this,c),a.call(this,c),c?(this.allowHalfOpen=c.allowHalfOpen!==!1,c.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),c.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(o.prototype,{writable:{__proto__:null,...t(a.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(a.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(a.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(a.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(a.prototype,"writableLength")},writableFinished:{__proto__:null,...t(a.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(a.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(a.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(a.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(c){this._readableState&&this._writableState&&(this._readableState.destroyed=c,this._writableState.destroyed=c)}}});let s;function l(){return s===void 0&&(s={}),s}o.fromWeb=function(c,m){return l().newStreamDuplexFromReadableWritablePair(c,m)},o.toWeb=function(c){return l().newReadableWritablePairFromDuplex(c)};let u;return o.from=function(c){return u||(u=requireDuplexify()),u(c,"body")},duplex}var transform,hasRequiredTransform;function requireTransform(){if(hasRequiredTransform)return transform;hasRequiredTransform=1;const{ObjectSetPrototypeOf:e,Symbol:t}=requirePrimordials();transform=o;const{ERR_METHOD_NOT_IMPLEMENTED:i}=requireErrors().codes,r=requireDuplex(),{getHighWaterMark:n}=requireState();e(o.prototype,r.prototype),e(o,r);const a=t("kCallback");function o(u){if(!(this instanceof o))return new o(u);const c=u?n(this,u,"readableHighWaterMark",!0):null;c===0&&(u={...u,highWaterMark:null,readableHighWaterMark:c,writableHighWaterMark:u.writableHighWaterMark||0}),r.call(this,u),this._readableState.sync=!1,this[a]=null,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",l)}function s(u){typeof this._flush=="function"&&!this.destroyed?this._flush((c,m)=>{if(c){u?u(c):this.destroy(c);return}m!=null&&this.push(m),this.push(null),u&&u()}):(this.push(null),u&&u())}function l(){this._final!==s&&s.call(this)}return o.prototype._final=s,o.prototype._transform=function(u,c,m){throw new i("_transform()")},o.prototype._write=function(u,c,m){const f=this._readableState,d=this._writableState,b=f.length;this._transform(u,c,(y,w)=>{if(y){m(y);return}w!=null&&this.push(w),d.ended||b===f.length||f.length<f.highWaterMark?m():this[a]=m})},o.prototype._read=function(){if(this[a]){const u=this[a];this[a]=null,u()}},transform}var passthrough,hasRequiredPassthrough;function requirePassthrough(){if(hasRequiredPassthrough)return passthrough;hasRequiredPassthrough=1;const{ObjectSetPrototypeOf:e}=requirePrimordials();passthrough=i;const t=requireTransform();e(i.prototype,t.prototype),e(i,t);function i(r){if(!(this instanceof i))return new i(r);t.call(this,r)}return i.prototype._transform=function(r,n,a){a(null,r)},passthrough}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;const e=requireBrowser$1(),{ArrayIsArray:t,Promise:i,SymbolAsyncIterator:r,SymbolDispose:n}=requirePrimordials(),a=requireEndOfStream(),{once:o}=requireUtil(),s=requireDestroy(),l=requireDuplex(),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:c,ERR_INVALID_RETURN_VALUE:m,ERR_MISSING_ARGS:f,ERR_STREAM_DESTROYED:d,ERR_STREAM_PREMATURE_CLOSE:b},AbortError:y}=requireErrors(),{validateFunction:w,validateAbortSignal:T}=requireValidators(),{isIterable:E,isReadable:R,isReadableNodeStream:C,isNodeStream:B,isTransformStream:D,isWebStream:_,isReadableStream:x,isReadableFinished:ee}=requireUtils(),N=globalThis.AbortController||requireBrowser$2().AbortController;let U,Z,H;function se(ie,me,ye){let _e=!1;ie.on("close",()=>{_e=!0});const we=a(ie,{readable:me,writable:ye},re=>{_e=!re});return{destroy:re=>{_e||(_e=!0,s.destroyer(ie,re||new d("pipe")))},cleanup:we}}function fe(ie){return w(ie[ie.length-1],"streams[stream.length - 1]"),ie.pop()}function le(ie){if(E(ie))return ie;if(C(ie))return ge(ie);throw new c("val",["Readable","Iterable","AsyncIterable"],ie)}async function*ge(ie){Z||(Z=requireReadable()),yield*Z.prototype[r].call(ie)}async function Y(ie,me,ye,{end:_e}){let we,re=null;const W=k=>{if(k&&(we=k),re){const v=re;re=null,v()}},J=()=>new i((k,v)=>{we?v(we):re=()=>{we?v(we):k()}});me.on("drain",W);const oe=a(me,{readable:!1},W);try{me.writableNeedDrain&&await J();for await(const k of ie)me.write(k)||await J();_e&&(me.end(),await J()),ye()}catch(k){ye(we!==k?u(we,k):k)}finally{oe(),me.off("drain",W)}}async function he(ie,me,ye,{end:_e}){D(me)&&(me=me.writable);const we=me.getWriter();try{for await(const re of ie)await we.ready,we.write(re).catch(()=>{});await we.ready,_e&&await we.close(),ye()}catch(re){try{await we.abort(re),ye(re)}catch(W){ye(W)}}}function q(...ie){return Q(ie,o(fe(ie)))}function Q(ie,me,ye){if(ie.length===1&&t(ie[0])&&(ie=ie[0]),ie.length<2)throw new f("streams");const _e=new N,we=_e.signal,re=ye?.signal,W=[];T(re,"options.signal");function J(){j(new y)}H=H||requireUtil().addAbortListener;let oe;re&&(oe=H(re,J));let k,v;const I=[];let O=0;function z(X){j(X,--O===0)}function j(X,te){var pe;if(X&&(!k||k.code==="ERR_STREAM_PREMATURE_CLOSE")&&(k=X),!(!k&&!te)){for(;I.length;)I.shift()(k);(pe=oe)===null||pe===void 0||pe[n](),_e.abort(),te&&(k||W.forEach(de=>de()),e.nextTick(me,k,v))}}let K;for(let X=0;X<ie.length;X++){const te=ie[X],pe=X<ie.length-1,de=X>0,Te=pe||ye?.end!==!1,S=X===ie.length-1;if(B(te)){let h=function(g){g&&g.name!=="AbortError"&&g.code!=="ERR_STREAM_PREMATURE_CLOSE"&&z(g)};var V=h;if(Te){const{destroy:g,cleanup:A}=se(te,pe,de);I.push(g),R(te)&&S&&W.push(A)}te.on("error",h),R(te)&&S&&W.push(()=>{te.removeListener("error",h)})}if(X===0)if(typeof te=="function"){if(K=te({signal:we}),!E(K))throw new m("Iterable, AsyncIterable or Stream","source",K)}else E(te)||C(te)||D(te)?K=te:K=l.from(te);else if(typeof te=="function"){if(D(K)){var M;K=le((M=K)===null||M===void 0?void 0:M.readable)}else K=le(K);if(K=te(K,{signal:we}),pe){if(!E(K,!0))throw new m("AsyncIterable",`transform[${X-1}]`,K)}else{var $;U||(U=requirePassthrough());const h=new U({objectMode:!0}),g=($=K)===null||$===void 0?void 0:$.then;if(typeof g=="function")O++,g.call(K,G=>{v=G,G!=null&&h.write(G),Te&&h.end(),e.nextTick(z)},G=>{h.destroy(G),e.nextTick(z,G)});else if(E(K,!0))O++,Y(K,h,z,{end:Te});else if(x(K)||D(K)){const G=K.readable||K;O++,Y(G,h,z,{end:Te})}else throw new m("AsyncIterable or Promise","destination",K);K=h;const{destroy:A,cleanup:L}=se(K,!1,!0);I.push(A),S&&W.push(L)}}else if(B(te)){if(C(K)){O+=2;const h=ae(K,te,z,{end:Te});R(te)&&S&&W.push(h)}else if(D(K)||x(K)){const h=K.readable||K;O++,Y(h,te,z,{end:Te})}else if(E(K))O++,Y(K,te,z,{end:Te});else throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],K);K=te}else if(_(te)){if(C(K))O++,he(le(K),te,z,{end:Te});else if(x(K)||E(K))O++,he(K,te,z,{end:Te});else if(D(K))O++,he(K.readable,te,z,{end:Te});else throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],K);K=te}else K=l.from(te)}return(we!=null&&we.aborted||re!=null&&re.aborted)&&e.nextTick(J),K}function ae(ie,me,ye,{end:_e}){let we=!1;if(me.on("close",()=>{we||ye(new b)}),ie.pipe(me,{end:!1}),_e){let W=function(){we=!0,me.end()};var re=W;ee(ie)?e.nextTick(W):ie.once("end",W)}else ye();return a(ie,{readable:!0,writable:!1},W=>{const J=ie._readableState;W&&W.code==="ERR_STREAM_PREMATURE_CLOSE"&&J&&J.ended&&!J.errored&&!J.errorEmitted?ie.once("end",ye).once("error",ye):ye(W)}),a(me,{readable:!1,writable:!0},ye)}return pipeline_1={pipelineImpl:Q,pipeline:q},pipeline_1}var compose,hasRequiredCompose;function requireCompose(){if(hasRequiredCompose)return compose;hasRequiredCompose=1;const{pipeline:e}=requirePipeline(),t=requireDuplex(),{destroyer:i}=requireDestroy(),{isNodeStream:r,isReadable:n,isWritable:a,isWebStream:o,isTransformStream:s,isWritableStream:l,isReadableStream:u}=requireUtils(),{AbortError:c,codes:{ERR_INVALID_ARG_VALUE:m,ERR_MISSING_ARGS:f}}=requireErrors(),d=requireEndOfStream();return compose=function(...y){if(y.length===0)throw new f("streams");if(y.length===1)return t.from(y[0]);const w=[...y];if(typeof y[0]=="function"&&(y[0]=t.from(y[0])),typeof y[y.length-1]=="function"){const U=y.length-1;y[U]=t.from(y[U])}for(let U=0;U<y.length;++U)if(!(!r(y[U])&&!o(y[U]))){if(U<y.length-1&&!(n(y[U])||u(y[U])||s(y[U])))throw new m(`streams[${U}]`,w[U],"must be readable");if(U>0&&!(a(y[U])||l(y[U])||s(y[U])))throw new m(`streams[${U}]`,w[U],"must be writable")}let T,E,R,C,B;function D(U){const Z=C;C=null,Z?Z(U):U?B.destroy(U):!N&&!ee&&B.destroy()}const _=y[0],x=e(y,D),ee=!!(a(_)||l(_)||s(_)),N=!!(n(x)||u(x)||s(x));if(B=new t({writableObjectMode:!!(_!=null&&_.writableObjectMode),readableObjectMode:!!(x!=null&&x.readableObjectMode),writable:ee,readable:N}),ee){if(r(_))B._write=function(Z,H,se){_.write(Z,H)?se():T=se},B._final=function(Z){_.end(),E=Z},_.on("drain",function(){if(T){const Z=T;T=null,Z()}});else if(o(_)){const H=(s(_)?_.writable:_).getWriter();B._write=async function(se,fe,le){try{await H.ready,H.write(se).catch(()=>{}),le()}catch(ge){le(ge)}},B._final=async function(se){try{await H.ready,H.close().catch(()=>{}),E=se}catch(fe){se(fe)}}}const U=s(x)?x.readable:x;d(U,()=>{if(E){const Z=E;E=null,Z()}})}if(N){if(r(x))x.on("readable",function(){if(R){const U=R;R=null,U()}}),x.on("end",function(){B.push(null)}),B._read=function(){for(;;){const U=x.read();if(U===null){R=B._read;return}if(!B.push(U))return}};else if(o(x)){const Z=(s(x)?x.readable:x).getReader();B._read=async function(){for(;;)try{const{value:H,done:se}=await Z.read();if(!B.push(H))return;if(se){B.push(null);return}}catch{return}}}}return B._destroy=function(U,Z){!U&&C!==null&&(U=new c),R=null,T=null,E=null,C===null?Z(U):(C=Z,r(x)&&i(x,U))},B},compose}var hasRequiredOperators;function requireOperators(){if(hasRequiredOperators)return operators;hasRequiredOperators=1;const e=globalThis.AbortController||requireBrowser$2().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:i,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:n},AbortError:a}=requireErrors(),{validateAbortSignal:o,validateInteger:s,validateObject:l}=requireValidators(),u=requirePrimordials().Symbol("kWeak"),c=requirePrimordials().Symbol("kResistStopPropagation"),{finished:m}=requireEndOfStream(),f=requireCompose(),{addAbortSignalNoValidate:d}=requireAddAbortSignal(),{isWritable:b,isNodeStream:y}=requireUtils(),{deprecate:w}=requireUtil(),{ArrayPrototypePush:T,Boolean:E,MathFloor:R,Number:C,NumberIsNaN:B,Promise:D,PromiseReject:_,PromiseResolve:x,PromisePrototypeThen:ee,Symbol:N}=requirePrimordials(),U=N("kEmpty"),Z=N("kEof");function H(re,W){if(W!=null&&l(W,"options"),W?.signal!=null&&o(W.signal,"options.signal"),y(re)&&!b(re))throw new t("stream",re,"must be writable");const J=f(this,re);return W!=null&&W.signal&&d(W.signal,J),J}function se(re,W){if(typeof re!="function")throw new i("fn",["Function","AsyncFunction"],re);W!=null&&l(W,"options"),W?.signal!=null&&o(W.signal,"options.signal");let J=1;W?.concurrency!=null&&(J=R(W.concurrency));let oe=J-1;return W?.highWaterMark!=null&&(oe=R(W.highWaterMark)),s(J,"options.concurrency",1),s(oe,"options.highWaterMark",0),oe+=J,(async function*(){const v=requireUtil().AbortSignalAny([W?.signal].filter(E)),I=this,O=[],z={signal:v};let j,K,M=!1,$=0;function V(){M=!0,X()}function X(){$-=1,te()}function te(){K&&!M&&$<J&&O.length<oe&&(K(),K=null)}async function pe(){try{for await(let de of I){if(M)return;if(v.aborted)throw new a;try{if(de=re(de,z),de===U)continue;de=x(de)}catch(Te){de=_(Te)}$+=1,ee(de,X,V),O.push(de),j&&(j(),j=null),!M&&(O.length>=oe||$>=J)&&await new D(Te=>{K=Te})}O.push(Z)}catch(de){const Te=_(de);ee(Te,X,V),O.push(Te)}finally{M=!0,j&&(j(),j=null)}}pe();try{for(;;){for(;O.length>0;){const de=await O[0];if(de===Z)return;if(v.aborted)throw new a;de!==U&&(yield de),O.shift(),te()}await new D(de=>{j=de})}}finally{M=!0,K&&(K(),K=null)}}).call(this)}function fe(re=void 0){return re!=null&&l(re,"options"),re?.signal!=null&&o(re.signal,"options.signal"),(async function*(){let J=0;for await(const k of this){var oe;if(re!=null&&(oe=re.signal)!==null&&oe!==void 0&&oe.aborted)throw new a({cause:re.signal.reason});yield[J++,k]}}).call(this)}async function le(re,W=void 0){for await(const J of q.call(this,re,W))return!0;return!1}async function ge(re,W=void 0){if(typeof re!="function")throw new i("fn",["Function","AsyncFunction"],re);return!await le.call(this,async(...J)=>!await re(...J),W)}async function Y(re,W){for await(const J of q.call(this,re,W))return J}async function he(re,W){if(typeof re!="function")throw new i("fn",["Function","AsyncFunction"],re);async function J(oe,k){return await re(oe,k),U}for await(const oe of se.call(this,J,W));}function q(re,W){if(typeof re!="function")throw new i("fn",["Function","AsyncFunction"],re);async function J(oe,k){return await re(oe,k)?oe:U}return se.call(this,J,W)}class Q extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function ae(re,W,J){var oe;if(typeof re!="function")throw new i("reducer",["Function","AsyncFunction"],re);J!=null&&l(J,"options"),J?.signal!=null&&o(J.signal,"options.signal");let k=arguments.length>1;if(J!=null&&(oe=J.signal)!==null&&oe!==void 0&&oe.aborted){const j=new a(void 0,{cause:J.signal.reason});throw this.once("error",()=>{}),await m(this.destroy(j)),j}const v=new e,I=v.signal;if(J!=null&&J.signal){const j={once:!0,[u]:this,[c]:!0};J.signal.addEventListener("abort",()=>v.abort(),j)}let O=!1;try{for await(const j of this){var z;if(O=!0,J!=null&&(z=J.signal)!==null&&z!==void 0&&z.aborted)throw new a;k?W=await re(W,j,{signal:I}):(W=j,k=!0)}if(!O&&!k)throw new Q}finally{v.abort()}return W}async function ie(re){re!=null&&l(re,"options"),re?.signal!=null&&o(re.signal,"options.signal");const W=[];for await(const oe of this){var J;if(re!=null&&(J=re.signal)!==null&&J!==void 0&&J.aborted)throw new a(void 0,{cause:re.signal.reason});T(W,oe)}return W}function me(re,W){const J=se.call(this,re,W);return(async function*(){for await(const k of J)yield*k}).call(this)}function ye(re){if(re=C(re),B(re))return 0;if(re<0)throw new n("number",">= 0",re);return re}function _e(re,W=void 0){return W!=null&&l(W,"options"),W?.signal!=null&&o(W.signal,"options.signal"),re=ye(re),(async function*(){var oe;if(W!=null&&(oe=W.signal)!==null&&oe!==void 0&&oe.aborted)throw new a;for await(const v of this){var k;if(W!=null&&(k=W.signal)!==null&&k!==void 0&&k.aborted)throw new a;re--<=0&&(yield v)}}).call(this)}function we(re,W=void 0){return W!=null&&l(W,"options"),W?.signal!=null&&o(W.signal,"options.signal"),re=ye(re),(async function*(){var oe;if(W!=null&&(oe=W.signal)!==null&&oe!==void 0&&oe.aborted)throw new a;for await(const v of this){var k;if(W!=null&&(k=W.signal)!==null&&k!==void 0&&k.aborted)throw new a;if(re-- >0&&(yield v),re<=0)return}}).call(this)}return operators.streamReturningOperators={asIndexedPairs:w(fe,"readable.asIndexedPairs will be removed in a future version."),drop:_e,filter:q,flatMap:me,map:se,take:we,compose:H},operators.promiseReturningOperators={every:ge,forEach:he,reduce:ae,toArray:ie,some:le,find:Y},operators}var promises,hasRequiredPromises;function requirePromises(){if(hasRequiredPromises)return promises;hasRequiredPromises=1;const{ArrayPrototypePop:e,Promise:t}=requirePrimordials(),{isIterable:i,isNodeStream:r,isWebStream:n}=requireUtils(),{pipelineImpl:a}=requirePipeline(),{finished:o}=requireEndOfStream();requireStream();function s(...l){return new t((u,c)=>{let m,f;const d=l[l.length-1];if(d&&typeof d=="object"&&!r(d)&&!i(d)&&!n(d)){const b=e(l);m=b.signal,f=b.end}a(l,(b,y)=>{b?c(b):u(y)},{signal:m,end:f})})}return promises={finished:o,pipeline:s},promises}var hasRequiredStream;function requireStream(){if(hasRequiredStream)return stream.exports;hasRequiredStream=1;const{Buffer:e}=requireBuffer(),{ObjectDefineProperty:t,ObjectKeys:i,ReflectApply:r}=requirePrimordials(),{promisify:{custom:n}}=requireUtil(),{streamReturningOperators:a,promiseReturningOperators:o}=requireOperators(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=requireErrors(),l=requireCompose(),{setDefaultHighWaterMark:u,getDefaultHighWaterMark:c}=requireState(),{pipeline:m}=requirePipeline(),{destroyer:f}=requireDestroy(),d=requireEndOfStream(),b=requirePromises(),y=requireUtils(),w=stream.exports=requireLegacy().Stream;w.isDestroyed=y.isDestroyed,w.isDisturbed=y.isDisturbed,w.isErrored=y.isErrored,w.isReadable=y.isReadable,w.isWritable=y.isWritable,w.Readable=requireReadable();for(const R of i(a)){let B=function(...D){if(new.target)throw s();return w.Readable.from(r(C,this,D))};var E=B;const C=a[R];t(B,"name",{__proto__:null,value:C.name}),t(B,"length",{__proto__:null,value:C.length}),t(w.Readable.prototype,R,{__proto__:null,value:B,enumerable:!1,configurable:!0,writable:!0})}for(const R of i(o)){let B=function(..._){if(new.target)throw s();return r(C,this,_)};var E=B;const C=o[R];t(B,"name",{__proto__:null,value:C.name}),t(B,"length",{__proto__:null,value:C.length}),t(w.Readable.prototype,R,{__proto__:null,value:B,enumerable:!1,configurable:!0,writable:!0})}w.Writable=requireWritable(),w.Duplex=requireDuplex(),w.Transform=requireTransform(),w.PassThrough=requirePassthrough(),w.pipeline=m;const{addAbortSignal:T}=requireAddAbortSignal();return w.addAbortSignal=T,w.finished=d,w.destroy=f,w.compose=l,w.setDefaultHighWaterMark=u,w.getDefaultHighWaterMark=c,t(w,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),t(m,n,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),t(d,n,{__proto__:null,enumerable:!0,get(){return b.finished}}),w.Stream=w,w._isUint8Array=function(C){return C instanceof Uint8Array},w._uint8ArrayToBuffer=function(C){return e.from(C.buffer,C.byteOffset,C.byteLength)},stream.exports}var hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,(function(e){const t=requireStream(),i=requirePromises(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return i}}),e.exports.Stream=t.Stream,e.exports.default=e.exports})(browser$2)),browser$2.exports}var hasRequiredLib$1;function requireLib$1(){if(hasRequiredLib$1)return lib;hasRequiredLib$1=1,Object.defineProperty(lib,"__esModule",{value:!0}),lib.ReadableWebToNodeStream=void 0;const e=requireBrowser();class t extends e.Readable{constructor(r){super(),this.bytesRead=0,this.released=!1,this.reader=r.getReader()}_read(){if(this.released){this.push(null);return}this.pendingRead=this.reader.read().then(r=>{delete this.pendingRead,r.done||this.released?this.push(null):(this.bytesRead+=r.value.length,this.push(r.value))}).catch(r=>{this.destroy(r)})}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}return lib.ReadableWebToNodeStream=t,lib}var hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchFromUrl=e.parseBlob=e.parseReadableStream=e.parseNodeStream=e.selectCover=e.ratingToStars=e.orderTags=e.parseFromTokenizer=e.parseBuffer=void 0;const t=requireBrowser$3(),i=requireCore(),r=requireLib$1(),n=t("music-metadata-browser:main");var a=requireCore();Object.defineProperty(e,"parseBuffer",{enumerable:!0,get:function(){return a.parseBuffer}}),Object.defineProperty(e,"parseFromTokenizer",{enumerable:!0,get:function(){return a.parseFromTokenizer}}),Object.defineProperty(e,"orderTags",{enumerable:!0,get:function(){return a.orderTags}}),Object.defineProperty(e,"ratingToStars",{enumerable:!0,get:function(){return a.ratingToStars}}),Object.defineProperty(e,"selectCover",{enumerable:!0,get:function(){return a.selectCover}}),e.parseNodeStream=i.parseStream;async function o(c,m,f){const d=new r.ReadableWebToNodeStream(c),b=await(0,e.parseNodeStream)(d,typeof m=="string"?{mimeType:m}:m,f);return await d.close(),b}e.parseReadableStream=o;async function s(c,m){c.type,c.size,c instanceof File&&c.name;const f=c.stream?c.stream():l(c);return o(f,{mimeType:c.type,size:c.size},m)}e.parseBlob=s;function l(c){const m=new FileReader;return new ReadableStream({start(f){m.onloadend=d=>{let b=d.target.result;b instanceof ArrayBuffer&&(b=new Uint8Array(b)),f.enqueue(b),f.close()},m.onerror=d=>{f.close()},m.onabort=d=>{f.close()},m.readAsArrayBuffer(c)}})}async function u(c,m){const f=await fetch(c),d={size:parseInt(f.headers.get("Content-Length"),10),mimeType:f.headers.get("Content-Type")};if(f.ok)if(f.body){const b=await o(f.body,d,m);return n("Closing HTTP-readable-stream..."),f.body.locked||await f.body.cancel(),n("HTTP-readable-stream closed."),b}else return s(await f.blob(),m);else throw new Error(`HTTP error status=${f.status}: ${f.statusText}`)}e.fetchFromUrl=u})(lib$3)),lib$3}var libExports=requireLib();const _hoisted_1={class:"app"},_hoisted_2={class:"file-btn"},_hoisted_3={class:"card"},_hoisted_4={class:"header"},_hoisted_5=["src"],_hoisted_6={style:{"min-width":"0"}},_hoisted_7={style:{"font-weight":"600",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},_hoisted_8={class:"time",style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},_hoisted_9=["src"],_hoisted_10={class:"row controls",style:{"margin-bottom":"10px"}},_hoisted_11={class:"time",style:{"margin-left":"auto"}},_hoisted_12=["value"],_hoisted_13={class:"row",style:{"margin-top":"10px"}},_hoisted_14={class:"playlist"},_hoisted_15=["onClick"],_hoisted_16={class:"title"},_hoisted_17={key:0},_hoisted_18={key:1,class:"time"},_hoisted_19={class:"time"},LS_KEY="vue-audio-state-v1",_sfc_main={__name:"App",setup(e){const t=ref([{title:"Lofi Beat",src:"/audio/track1.mp3",artist:"You"},{title:"Ambient Pad",src:"/audio/track2.mp3",artist:"You"}]),i=ref(0),r=computed(()=>t.value[i.value]),n=ref(null),a=ref(!1),o=ref(0),s=ref(.9),l=ref(1),u=ref(!1),c=ref(0),m=ref(0),f=ref(""),d=computed(()=>r.value?.title??""),b=computed(()=>r.value?.artist??"");function y(W){if(!Number.isFinite(W))return"0:00";const J=Math.floor(W/60),oe=Math.floor(W%60).toString().padStart(2,"0");return`${J}:${oe}`}function w(){n.value?.play()}function T(){n.value?.pause()}function E(){a.value?T():w()}function R(){const W=n.value;W&&(W.pause(),W.currentTime=0,a.value=!1,m.value=0,o.value=0,ae())}function C(){i.value=(i.value+1)%t.value.length}function B(){i.value=(i.value-1+t.value.length)%t.value.length}function D(){m.value=n.value.currentTime||0,c.value=n.value.duration||0,o.value=c.value?m.value/c.value:0,q()}function _(W){const J=Number(W.target.value);o.value=J,c.value&&(n.value.currentTime=c.value*J),ae()}function x(){u.value||C()}function ee(W){i.value=W}const N=ref(!1);async function U(W){const J=Array.from(W).filter(oe=>oe.type.startsWith("audio/"));for(const oe of J){const k=URL.createObjectURL(oe);let v=oe.name.replace(/\.[^.]+$/,""),I="",O="";try{const z=await libExports.parseBlob(oe);if(z.common?.title&&(v=z.common.title),z.common?.artist&&(I=z.common.artist),z.common?.picture?.length){const j=z.common.picture[0];O=`data:${j.format};base64,${le(j.data)}`}}catch{}t.value.push({title:v,artist:I,src:k,_localObjectUrl:k,cover:O||""})}!a.value&&J.length&&(i.value=t.value.length-J.length,await we()),me()}function Z(W){N.value=!1,W.dataTransfer?.files?.length&&U(W.dataTransfer.files)}function H(W){W.preventDefault(),N.value=!0}function se(){N.value=!1}function fe(W){W.target?.files?.length&&U(W.target.files)}function le(W){let J="";const oe=new Uint8Array(W),k=oe.byteLength;for(let v=0;v<k;v++)J+=String.fromCharCode(oe[v]);return btoa(J)}function ge(){"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:d.value,artist:b.value,album:"Vue Player",artwork:f.value?[{src:f.value,sizes:"512x512",type:"image/png"}]:void 0}))}function Y(){f.value=r.value?.cover||""}let he=0;function q(){const W=performance.now();W-he>800&&(he=W,me())}let Q;function ae(){clearTimeout(Q),Q=setTimeout(me,300)}function ie(W){return W.map(J=>({title:J.title,artist:J.artist,src:J._localObjectUrl?null:J.src,cover:J.cover||""}))}function me(){try{const W={index:i.value,time:m.value,volume:s.value,rate:l.value,loop:u.value,playlist:ie(t.value),hasLocal:t.value.some(J=>J._localObjectUrl)};localStorage.setItem(LS_KEY,JSON.stringify(W))}catch{}}function ye(){try{const W=localStorage.getItem(LS_KEY);if(!W)return;const J=JSON.parse(W);if(Array.isArray(J.playlist)&&J.playlist.length){const oe=J.playlist.filter(k=>k.src).map(k=>({title:k.title,artist:k.artist,src:k.src,cover:k.cover||""}));oe.length&&(t.value=oe)}Number.isFinite(J.index)&&(i.value=Math.min(Math.max(0,J.index),Math.max(0,t.value.length-1))),Number.isFinite(J.volume)&&(s.value=Math.min(Math.max(0,J.volume),1)),Number.isFinite(J.rate)&&(l.value=Math.min(Math.max(.5,J.rate),2)),typeof J.loop=="boolean"&&(u.value=J.loop),Number.isFinite(J.time)&&(_e=J.time)}catch{}}let _e=0;watch(s,W=>{n.value&&(n.value.volume=W),ae()}),watch(l,W=>{n.value&&(n.value.playbackRate=W),ae()}),watch(u,W=>{n.value&&(n.value.loop=W),ae()}),watch(i,async()=>{await we(),Y(),ge(),me()});async function we(){if(await nextTick(),!!n.value)try{await n.value.play()}catch{}}function re(){c.value=n.value.duration||0,n.value.volume=s.value,n.value.playbackRate=l.value,n.value.loop=u.value,_e&&_e<(n.value.duration||1/0)&&(n.value.currentTime=_e),_e=0,Y(),ge()}return onMounted(()=>{ye();const W=n.value;W?.addEventListener("play",()=>a.value=!0),W?.addEventListener("pause",()=>a.value=!1);const J=oe=>{["INPUT","TEXTAREA","SELECT"].includes(document.activeElement?.tagName)||(oe.code==="Space"&&(oe.preventDefault(),E()),oe.code==="ArrowRight"&&(W.currentTime=Math.min((W.currentTime||0)+5,W.duration||1/0)),oe.code==="ArrowLeft"&&(W.currentTime=Math.max((W.currentTime||0)-5,0)),oe.code==="ArrowUp"&&(s.value=Math.min(s.value+.05,1)),oe.code==="ArrowDown"&&(s.value=Math.max(s.value-.05,0)),oe.code==="KeyS"&&R())};window.addEventListener("keydown",J),onBeforeUnmount(()=>window.removeEventListener("keydown",J)),"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",w),navigator.mediaSession.setActionHandler("pause",T),navigator.mediaSession.setActionHandler("previoustrack",B),navigator.mediaSession.setActionHandler("nexttrack",C),navigator.mediaSession.setActionHandler("seekbackward",()=>W.currentTime=Math.max((W.currentTime||0)-10,0)),navigator.mediaSession.setActionHandler("seekforward",()=>W.currentTime=Math.min((W.currentTime||0)+10,W.duration||1/0)),navigator.mediaSession.setActionHandler("stop",R))}),(W,J)=>(openBlock(),createElementBlock("div",_hoisted_1,[J[8]||(J[8]=createBaseVNode("h1",null," Vue Audio Player",-1)),createBaseVNode("div",{class:normalizeClass(["dropzone",{drag:N.value}]),onDragover:H,onDragleave:se,onDrop:Z},[J[3]||(J[3]=createTextVNode("    (mp3, m4a, wav  ..)   . ",-1)),createBaseVNode("div",_hoisted_2,[createBaseVNode("input",{type:"file",multiple:"",accept:"audio/*",onChange:fe},null,32)])],34),createBaseVNode("div",_hoisted_3,[createBaseVNode("div",_hoisted_4,[f.value?(openBlock(),createElementBlock("img",{key:0,src:f.value,class:"cover",alt:"cover"},null,8,_hoisted_5)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_6,[createBaseVNode("div",_hoisted_7,toDisplayString(d.value),1),createBaseVNode("div",_hoisted_8,toDisplayString(b.value),1)])]),createBaseVNode("audio",{ref_key:"audioEl",ref:n,src:r.value?.src,onTimeupdate:D,onLoadedmetadata:re,onEnded:x},null,40,_hoisted_9),createBaseVNode("div",_hoisted_10,[createBaseVNode("button",{onClick:B,title:"Previous"},""),createBaseVNode("button",{onClick:E,class:normalizeClass({active:a.value}),title:"Play/Pause"},toDisplayString(a.value?" ":" "),3),createBaseVNode("button",{onClick:C,title:"Next"},""),createBaseVNode("div",_hoisted_11,toDisplayString(y(m.value))+" / "+toDisplayString(y(c.value)),1)]),createBaseVNode("input",{class:"range",type:"range",min:"0",max:"1",step:"0.001",value:o.value,onInput:_,"aria-label":"Seek"},null,40,_hoisted_12),createBaseVNode("div",_hoisted_13,[createBaseVNode("label",null,[J[4]||(J[4]=createTextVNode(" ",-1)),withDirectives(createBaseVNode("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":J[0]||(J[0]=oe=>s.value=oe)},null,512),[[vModelText,s.value,void 0,{number:!0}]])]),createBaseVNode("label",null,[J[6]||(J[6]=createTextVNode(" ",-1)),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":J[1]||(J[1]=oe=>l.value=oe)},J[5]||(J[5]=[createBaseVNode("option",{value:.75},"0.75",-1),createBaseVNode("option",{value:1},"1",-1),createBaseVNode("option",{value:1.25},"1.25",-1),createBaseVNode("option",{value:1.5},"1.5",-1),createBaseVNode("option",{value:2},"2",-1)]),512),[[vModelSelect,l.value,void 0,{number:!0}]])]),createBaseVNode("button",{onClick:J[2]||(J[2]=oe=>u.value=!u.value),class:normalizeClass({active:u.value}),title:""},"  Loop "+toDisplayString(u.value?"On":"Off"),3)]),createBaseVNode("div",_hoisted_14,[J[7]||(J[7]=createBaseVNode("h3",null,"",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(t.value,(oe,k)=>(openBlock(),createElementBlock("div",{key:oe.src??oe.title+k,class:normalizeClass(["track",{active:k===i.value}]),onClick:v=>ee(k),title:"   "},[createBaseVNode("span",_hoisted_16,[createTextVNode(toDisplayString(oe.title),1),oe.artist?(openBlock(),createElementBlock("span",_hoisted_17,"  "+toDisplayString(oe.artist),1)):createCommentVNode("",!0),oe.src?createCommentVNode("",!0):(openBlock(),createElementBlock("span",_hoisted_18," (   )"))]),createBaseVNode("span",_hoisted_19,toDisplayString(k===i.value?" ":""),1)],10,_hoisted_15))),128))])])]))}};createApp(_sfc_main).mount("#app");
